/*! For license information please see 240.dc2c1b6e57652ab3e4a5.bundle-prod.js.LICENSE.txt */
(self.webpackChunkai_workout_assistant=self.webpackChunkai_workout_assistant||[]).push([[240],{20264:function(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))break e;n=n[a]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function u(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}o("Symbol",(function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var s=i[n[o]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return e}));var c,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var f;e:{var h={};try{h.__proto__={a:!0},f=h.a;break e}catch(e){}f=!1}c=f?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=c;function p(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,d)d(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ea=t.prototype}function g(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function m(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function v(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function y(e,t,n){return e.g=n,{value:t}}function w(e){this.g=new g,this.h=e}function b(e,t,n,r){try{var i=t.call(e.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.l=!1,i;var o=i.value}catch(t){return e.g.i=null,v(e.g,t),x(e)}return e.g.i=null,r.call(e.g,o),x(e)}function x(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,v(e.g,t)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function _(e){this.next=function(t){return m(e.g),e.g.i?t=b(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=x(e)),t},this.throw=function(t){return m(e.g),e.g.i?t=b(e,e.g.i.throw,t,e.g.o):(v(e.g,t),t=x(e)),t},this.return=function(t){return function(e,t){m(e.g);var n=e.g.i;return n?b(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),x(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function k(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(o){o.done?r(o.value):Promise.resolve(o.value).then(t,n).then(e,i)}(e.next())}))}(new _(new w(e)))}g.prototype.o=function(e){this.h=e},g.prototype.return=function(e){this.j={return:e},this.g=this.s},o("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var o=i.setTimeout;n.prototype.i=function(e){o(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.m(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;o((function(){if(e.B()){var t=i.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=i.CustomEvent,t=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.J(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=s(e),o=i.next();!o.done;o=i.next())r(o.value).J(t,n)}))},t.all=function(e){var n=s(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).J(o(a.length-1),t),i=n.next()}while(!i.done)}))},t}));var S="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};o("Object.assign",(function(e){return e||S})),o("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),o("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}})),o("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),o("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e){return e}))}}));var T=this||self;function I(e,t){e=e.split(".");var n,r=T;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function E(e){!function(e){T.setTimeout((function(){throw e}),0)}(e)}function A(e,t){E(Error("Invalid wire type: "+e+" (at position "+t+")"))}function M(){E(Error("Failed to read varint, encoding is invalid."))}function R(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var C,P,O="undefined"!=typeof TextDecoder,D="undefined"!=typeof TextEncoder;function F(e){if(D)e=(P||(P=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,r=new Uint8Array(3*e.length),i=0;i<e.length;i++){var o=e.charCodeAt(i);if(128>o)r[n++]=o;else{if(2048>o)r[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&i<e.length){var a=e.charCodeAt(++i);if(56320<=a&&57343>=a){o=1024*(o-55296)+a-56320+65536,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128;continue}i--}if(t)throw Error("Found an unpaired surrogate");o=65533}r[n++]=o>>12|224,r[n++]=o>>6&63|128}r[n++]=63&o|128}}e=r.subarray(0,n)}return e}var L={},j=null;function N(e){var t;void 0===t&&(t=0),B(),t=L[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",i=0,o=0;i<e.length-2;i+=3){var a=e[i],s=e[i+1],u=e[i+2],c=t[a>>2];a=t[(3&a)<<4|s>>4],s=t[(15&s)<<2|u>>6],u=t[63&u],n[o++]=c+a+s+u}switch(c=0,u=r,e.length-i){case 2:u=t[(15&(c=e[i+1]))<<2]||r;case 1:e=e[i],n[o]=t[e>>2]+t[(3&e)<<4|c>>4]+u+r}return n.join("")}function U(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=j[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}B();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){r[i++]=e})),r.subarray(0,i)}function B(){if(!j){j={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));L[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===j[o]&&(j[o]=i)}}}}var z,V="function"==typeof Uint8Array;function W(e){if(this.g=e,null!==e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}W.prototype.toJSON=function(){if(null==this.g)var e="";else e=this.g,e=this.g=null==e||"string"==typeof e?e:V&&e instanceof Uint8Array?N(e):null;return e};var H="function"==typeof Uint8Array.prototype.slice;function G(e,t,n){return t===n?z||(z=new Uint8Array(0)):H?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var q=0;function K(e,t){t=void 0!==(t=void 0===t?{}:t).u&&t.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=t,e&&X(this,e)}function X(e,t){e.h=function(e){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer)return new Uint8Array(e);if(e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return U(e);if(e.constructor===W){if(null==e.g)var t=z||(z=new Uint8Array(0));else{t=Uint8Array;var n=e.g;n=null==n||V&&null!=n&&n instanceof Uint8Array?n:"string"==typeof n?U(n):null,t=new t(e=e.g=n)}return t}if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(t),e.l=0,e.i=e.h.length,e.g=e.l}function Y(e){e.g>e.i&&(e.j=!0,E(Error("Tried to read past the end of the data "+e.g+" > "+e.i)))}function $(e){var t=e.h,n=t[e.g],r=127&n;return 128>n?(e.g+=1,Y(e),r):(r|=(127&(n=t[e.g+1]))<<7,128>n?(e.g+=2,Y(e),r):(r|=(127&(n=t[e.g+2]))<<14,128>n?(e.g+=3,Y(e),r):(r|=(127&(n=t[e.g+3]))<<21,128>n?(e.g+=4,Y(e),r):(r|=(15&(n=t[e.g+4]))<<28,128>n?(e.g+=5,Y(e),r>>>0):(e.g+=5,128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]?(e.j=!0,M(),r):(Y(e),r))))))}K.prototype.reset=function(){this.g=this.l};var J=[];function Z(){this.g=new Uint8Array(64),this.h=0}function Q(e,t){if(!(e.h+1<e.g.length)){var n=e.g;e.g=new Uint8Array(Math.ceil(1+2*e.g.length)),e.g.set(n)}e.g[e.h++]=t}function ee(e,t){for(;127<t;)Q(e,127&t|128),t>>>=7;Q(e,t)}function te(e){var t={},n=void 0!==t.N&&t.N;this.m={u:void 0!==t.u&&t.u},this.N=n,t=this.m,J.length?(n=J.pop(),t&&(n.u=t.u),e&&X(n,e),e=n):e=new K(e,t),this.g=e,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function ne(e){var t=e.g;if((t=t.g==t.i)||(t=e.j)||(t=(t=e.g).j||0>t.g||t.g>t.i),t)return!1;e.l=e.g.g;var n=$(e.g);return t=n>>>3,0<=(n&=7)&&5>=n?(e.i=t,e.h=n,!0):(e.j=!0,A(n,e.l),!1)}function re(e){switch(e.h){case 0:if(0!=e.h)re(e);else e:{for(var t=(e=e.g).g,n=0;10>n;n++){if(0==(128&e.h[t])){e.g=t+1,Y(e);break e}t++}e.j=!0,M()}break;case 1:(e=e.g).g+=8,Y(e);break;case 2:2!=e.h?re(e):(t=$(e.g),(e=e.g).g+=t,Y(e));break;case 5:(e=e.g).g+=4,Y(e);break;case 3:for(t=e.i;;){if(!ne(e)){e.j=!0,E(Error("Unmatched start-group tag: stream EOF"));break}if(4==e.h){e.i!=t&&(e.j=!0,E(Error("Unmatched end-group tag")));break}re(e)}break;default:e.j=!0,A(e.h,e.l)}}function ie(e,t,n){e.N||(e=G(e.g.h,n,e.g.g),(n=t.m)?n.push(e):t.m=[e])}Z.prototype.length=function(){return this.h},Z.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,G(e,0,t)},te.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var oe=[];function ae(){this.h=[],this.i=0,this.g=new Z}function se(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function ue(e,t,n){ee(e.g,8*t+2),ee(e.g,n.length),se(e,e.g.end()),se(e,n)}var ce,le="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function fe(e,t){Object.isFrozen(e)||(le?e[le]|=t:void 0!==e.g?e.g|=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}}))}function he(e){return e?null==(t=le?e[le]:e.g)?0:t:0;var t}function de(e){return Array.isArray(e)?(fe(e,1),e):e}function pe(e){if(!Array.isArray(e))throw Error("cannot mark non-array as immutable");fe(e,2)}function ge(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function me(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":return V&&null!=e&&e instanceof Uint8Array?N(e):e;default:return e}}function ve(e,t){if(null!=e)return Array.isArray(e)||ge(e)?ye(e,t):t(e)}function ye(e,t){if(Array.isArray(e)){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=ve(e[r],t);return 1&he(e)&&de(n),n}for(r in n={},e)n[r]=ve(e[r],t);return n}function we(e,t,n){var r=ce;if(ce=null,e||(e=r),r=this.constructor.ca,e||(e=r?[r]:[]),this.j=(r?0:-1)-(this.constructor.aa||0),this.i=null,this.g=e,e=(r=this.g.length)-1,r&&ge(r=this.g[e])?(this.l=e-this.j,this.h=r):void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.h=null):this.l=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(r=this.g[e])?de(r):this.g[e]=_e):(ke(this),(r=this.h[e])?de(r):this.h[e]=_e)}var be,xe,_e=Object.freeze(de([]));function ke(e){var t=e.l+e.j;e.g[t]||(e.h=e.g[t]={})}function Se(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.h?e.h[t]:void 0:e.g[t+e.j]}function Te(e,t,n){n=void 0===n||n;var r=void 0!==r&&r,i=Se(e,t,r);return null==i&&(i=_e),i===_e?Ee(e,t,i=de([]),r):n&&Array.isArray(i)&&2&he(i)&&Ee(e,t,i=i.slice(),r),i}function Ie(e,t,n){return null==(e=null==(e=Se(e,t))?e:+e)?void 0===n?0:n:e}function Ee(e,t,n,r){void 0!==r&&r||t>=e.l?(ke(e),e.h[t]=n):e.g[t+e.j]=n}function Ae(e,t,n){e.i||(e.i={});var r=e.i[n];if(!r){var i=Te(e,n,!1);r=[];for(var o=!!Array.isArray(i)&&!!(2&he(i)),a=0;a<i.length;a++)r[a]=new t(i[a]),o&&pe(r[a].g);o&&(pe(r),Object.freeze(r)),e.i[n]=r}return r}function Me(e,t,n,r,i){var o=Ae(e,r,t);n=n||new r,e=Te(e,t),null!=i?(o.splice(i,0,n),e.splice(i,0,Re(n))):(o.push(n),e.push(Re(n)))}function Re(e){if(e.i)for(var t in e.i){var n=e.i[t];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&Re(n[r]);else n&&Re(n)}return e.g}function Ce(e,t){return null==(e=Se(e,t))?0:e}function Pe(e,t){return null==(e=Se(e,t))?"":e}function Oe(e,t){if(e=e.m){se(t,t.g.end());for(var n=0;n<e.length;n++)se(t,e[n])}}function De(e){var t=e[0];switch(e.length){case 2:var n=e[1];return function(e,r,i){return t(e,r,i,n)};case 3:var r=e[1],i=e[2];return function(e,n,o){return t(e,n,o,r,i)};case 4:var o=e[1],a=e[2],s=e[3];return function(e,n,r){return t(e,n,r,o,a,s)};default:throw Error("unsupported number of parameters, expected [2-4], got "+e.length)}}function Fe(e,t,n){for(;ne(t)&&4!=t.h;){var r=t.i,i=n[r];if(i){if(Array.isArray(i)&&(i=n[r]=De(i)),!i(t,e,r)){i=e;var o=(r=t).l;re(r),ie(r,i,o)}}else i=e,o=(r=t).l,re(r),ie(r,i,o)}return e}function Le(e,t){var n=new ae;if(t(e,n),0===(e=n.i+n.g.length()))n=new Uint8Array(0);else{e=new Uint8Array(e);for(var r=n.h,i=r.length,o=t=0;o<i;o++){var a=r[o];0!==a.length&&(e.set(a,t),t+=a.length)}0!==(i=(r=n.g).h)&&(e.set(r.g.subarray(0,i),t),r.h=0),n.h=[e],n=e}return n}function je(e,t,n){if(oe.length){var r=oe.pop();e&&(X(r.g,e),r.i=-1,r.h=-1),e=r}else e=new te(e);try{return n(new t,e)}finally{(t=e.g).h=null,t.l=0,t.i=0,t.g=0,t.j=!1,t.u=!1,e.i=-1,e.h=-1,e.j=!1,100>oe.length&&oe.push(e)}}function Ne(e,t,n){if(null!=(t=Se(t,n))){ee(e.g,8*n+5),e=e.g;var r=t;0===(r=(n=0>r?1:0)?-r:r)?q=0<1/r?0:2147483648:isNaN(r)?q=2147483647:34028234663852886e22<r?q=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),q=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,q=(n<<31|t+127<<23|8388607&r)>>>0),Q(e,(n=q)>>>0&255),Q(e,n>>>8&255),Q(e,n>>>16&255),Q(e,n>>>24&255)}}function Ue(e,t,n){if(5!==e.h)return!1;var r=(e=e.g).h[e.g],i=e.h[e.g+1],o=e.h[e.g+2],a=e.h[e.g+3];return e.g+=4,Y(e),e=2*((i=(r<<0|i<<8|o<<16|a<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,Ee(t,n,255==r?i?NaN:1/0*e:0==r?e*Math.pow(2,-149)*i:e*Math.pow(2,r-150)*(i+Math.pow(2,23))),!0}function Be(e,t,n){if(0!==e.h)return!1;for(var r=e.g,i=128,o=0,a=e=0;4>a&&128<=i;a++)o|=(127&(i=r.h[r.g++]))<<7*a;if(128<=i&&(o|=(127&(i=r.h[r.g++]))<<28,e|=(127&i)>>4),128<=i)for(a=0;5>a&&128<=i;a++)e|=(127&(i=r.h[r.g++]))<<7*a+3;return 128>i?(r=o>>>0,(e=2147483648&(i=e>>>0))&&(i=~i>>>0,0==(r=1+~r>>>0)&&(i=i+1>>>0)),r=4294967296*i+(r>>>0),e=e?-r:r):(r.j=!0,M(),e=void 0),Ee(t,n,e),!0}function ze(e,t,n){return 0===e.h&&(Ee(t,n,$(e.g)),!0)}function Ve(e,t,n){if(2!==e.h)return!1;var r,i=$(e.g),o=(e=e.g).g;if(e.g+=i,Y(e),e=e.h,O)(r=C)||(r=C=new TextDecoder("utf-8",{fatal:!1})),r=r.decode(e.subarray(o,o+i));else{i=o+i;for(var a,s,u,c=[],l=null;o<i;)128>(a=e[o++])?c.push(a):224>a?o>=i?c.push(65533):(s=e[o++],194>a||128!=(192&s)?(o--,c.push(65533)):c.push((31&a)<<6|63&s)):240>a?o>=i-1?c.push(65533):128!=(192&(s=e[o++]))||224===a&&160>s||237===a&&160<=s||128!=(192&(r=e[o++]))?(o--,c.push(65533)):c.push((15&a)<<12|(63&s)<<6|63&r):244>=a?o>=i-2?c.push(65533):128!=(192&(s=e[o++]))||0!=s-144+(a<<28)>>30||128!=(192&(r=e[o++]))||128!=(192&(u=e[o++]))?(o--,c.push(65533)):(a=(7&a)<<18|(63&s)<<12|(63&r)<<6|63&u,a-=65536,c.push(55296+(a>>10&1023),56320+(1023&a))):c.push(65533),8192<=c.length&&(l=R(l,c),c.length=0);r=R(l,c)}return Ee(t,n,r),!0}function We(e,t,n,r,i){if(2!==e.h)return!1;var o=new r,a=e.g.i,s=$(e.g),u=e.g.g+s;if(e.g.i=u,i(o,e),0!=(i=u-e.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+s+" bytes, instead read "+(s-i)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=u,e.g.i=a,Me(t,n,o,r,void 0),!0}function He(e){we.call(this,e)}function Ge(e,t){var n=Se(e,1);if(null!=n&&null!=n){ee(t.g,8);var r=t.g;if(0<=n)ee(r,n);else{for(var i=0;9>i;i++)Q(r,127&n|128),n>>=7;Q(r,1)}}Ne(t,e,2),null!=(r=Se(e,3))&&ue(t,3,F(r)),null!=(r=Se(e,4))&&ue(t,4,F(r)),Oe(e,t)}function qe(e,t){return Fe(e,t,be||(be={1:ze,2:Ue,3:Ve,4:Ve}))}function Ke(e){we.call(this,e,-1,Je)}function Xe(e,t){return Fe(e,t,xe||(xe={1:[We,He,qe]}))}we.prototype.toJSON=function(){return ye(Re(this),me)},we.prototype.toString=function(){return Re(this).toString()},p(He,we),p(Ke,we),Ke.prototype.addClassification=function(e,t){return Me(this,1,e,He,t),this};var Ye,$e,Je=[1];function Ze(e){we.call(this,e)}function Qe(e,t){Ne(t,e,1),Ne(t,e,2),Ne(t,e,3),Ne(t,e,4),Ne(t,e,5),Oe(e,t)}function et(e,t){return Fe(e,t,Ye||(Ye={1:Ue,2:Ue,3:Ue,4:Ue,5:Ue}))}function tt(e){we.call(this,e,-1,it)}function nt(e,t){return Fe(e,t,$e||($e={1:[We,Ze,et]}))}p(Ze,we),p(tt,we);var rt,it=[1];function ot(e){we.call(this,e)}function at(e,t){Ne(t,e,1),Ne(t,e,2),Ne(t,e,3),Ne(t,e,4),Ne(t,e,5);var n=Se(e,6);if(null!=n&&null!=n){ee(t.g,48);var r=t.g,i=n;n=0>i;var o=(i=Math.abs(i))>>>0;for(i=Math.floor((i-o)/4294967296),i>>>=0,n&&(i=~i>>>0,4294967295<(o=1+(~o>>>0))&&(o=0,4294967295<++i&&(i=0))),n=q=o,o=i;0<o||127<n;)Q(r,127&n|128),n=(n>>>7|o<<25)>>>0,o>>>=7;Q(r,n)}Oe(e,t)}function st(e,t){return Fe(e,t,rt||(rt={1:Ue,2:Ue,3:Ue,4:Ue,5:Ue,6:Be}))}function ut(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function ct(e){return Ae(e,He,1).map((function(e){return{index:Ce(e,1),X:Ie(e,2),label:null!=Se(e,3)?Pe(e,3):void 0,displayName:null!=Se(e,4)?Pe(e,4):void 0}}))}function lt(e){return{x:Ie(e,1),y:Ie(e,2),z:Ie(e,3),visibility:null!=Se(e,4)?Ie(e,4):void 0}}function ft(e){return Ae(je(e,tt,nt),Ze,1).map(lt)}function ht(e,t){this.h=e,this.g=t,this.l=0}function dt(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var r=ut(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=ut(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));r=e.m=o,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),e.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:i},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function pt(e){this.g=e}p(ot,we);var gt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function mt(e,t){return t+e}function vt(e,t){window[e]=t}function yt(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||mt,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=s(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var r=e.options[n].default;void 0!==r&&(this.j[n]="function"==typeof r?r():r)}}function wt(e,t){var n,r;return k((function(i){return t in e.F?i.return(e.F[t]):(n=e.locateFile(t,""),r=fetch(n).then((function(e){return e.arrayBuffer()})),e.F[t]=r,i.return(r))}))}function bt(e,t){for(var n=t.name||"$",r=[].concat(u(t.wants)),i=new e.h.StringList,o=s(t.wants),a=o.next();!a.done;a=o.next())i.push_back(a.value);o=e.h.PacketListener.implement({onResults:function(i){for(var o={},a=0;a<t.wants.length;++a)o[r[a]]=i.get(a);var u=e.listeners[n];u&&(e.C=function(e,t,n){var r,i,o,a,u,c,l,f,h,d,p,g,m,v;return k((function(w){switch(w.g){case 1:if(!n)return w.return(t);for(r={},i=0,o=s(Object.keys(n)),a=o.next();!a.done;a=o.next())u=a.value,"string"!=typeof(c=n[u])&&"texture"===c.type&&void 0!==t[c.stream]&&++i;1<i&&(e.G=!1),l=s(Object.keys(n)),a=l.next();case 2:if(a.done){w.g=4;break}if(f=a.value,"string"==typeof(h=n[f]))return m=r,v=f,y(w,function(e,t,n){var r;return k((function(i){return"number"==typeof n||n instanceof Uint8Array||n instanceof e.h.Uint8BlobList?i.return(n):n instanceof e.h.Texture2dDataOut?((r=e.s[t])||(r=new ht(e.h,e.D),e.s[t]=r),i.return(dt(r,n,e.G))):i.return(void 0)}))}(e,f,t[h]),14);if(d=t[h.stream],"detection_list"===h.type){if(d){for(var b=d.getRectList(),x=d.getLandmarksList(),_=d.getClassificationsList(),S=[],T=0;T<b.size();++T){var I=je(b.get(T),ot,st);I={T:{Y:Ie(I,1),Z:Ie(I,2),height:Ie(I,3),width:Ie(I,4),rotation:Ie(I,5,0),W:Ce(I,6)},O:ft(x.get(T)),M:ct(je(_.get(T),Ke,Xe))},S.push(I)}b=S}else b=[];r[f]=b,w.g=7;break}if("proto_list"===h.type){if(d){for(b=Array(d.size()),x=0;x<d.size();x++)b[x]=d.get(x);d.delete()}else b=[];r[f]=b,w.g=7;break}if(void 0===d){w.g=3;break}if("float_list"===h.type){r[f]=d,w.g=7;break}if("proto"===h.type){r[f]=d,w.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(p=e.s[f])||(p=new ht(e.h,e.D),e.s[f]=p),y(w,dt(p,d,e.G),13);case 13:g=w.h,r[f]=g;case 7:h.transform&&r[f]&&(r[f]=h.transform(r[f])),w.g=3;break;case 14:m[v]=w.h;case 3:a=l.next(),w.g=2;break;case 4:return w.return(r)}}))}(e,o,t.outs).then((function(n){n=u(n);for(var i=0;i<t.wants.length;++i){var a=o[r[i]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(e.C=n)})))}}),e.i.attachMultiListener(i,o),i.delete()}function xt(e){switch(void 0===e&&(e=0),e){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function _t(e){var t=this;e=e||{},this.g=new yt({locateFile:e.locateFile,files:function(e){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:xt(e.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:ft},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:ft},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(e){var n,r,i;return k((function(o){return 1==o.g?(n=xt(e),r="third_party/mediapipe/modules/pose_landmark/"+n,y(o,wt(t.g,n),2)):(i=o.h,t.g.overrideFile(r,i),o.return(!0))}))}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}(e=yt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){var e=this;return k((function(t){e.i&&(e.i.reset(),e.m={},e.s={}),t.g=0}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],i=[],o={},a=s(Object.keys(e)),u=a.next();!u.done;o={K:o.K,L:o.L},u=a.next()){var c=u.value;c in this.j&&this.j[c]===e[c]||(this.j[c]=e[c],void 0!==(u=t[c])&&(u.onChange&&(o.K=u.onChange,o.L=e[c],r.push(function(e){return function(){return k((function(t){if(1==t.g)return y(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0}))}}(o))),u.graphOptionXref&&(c={valueNumber:1===u.type?e[c]:0,valueBoolean:0===u.type&&e[c],valueString:2===u.type?e[c]:""},u=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),u.graphOptionXref),c),i.push(u))))}0===r.length&&0===i.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(i),this.v=(void 0===this.v?[]:this.v).concat(r))}},e.initialize=function(){var e=this;return k((function(t){return 1==t.g?y(t,function(e){var t,n,r,i,o,a,s,c,l,f,h;return k((function(d){switch(d.g){case 1:return e.R?(t=void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(e.j):e.g.files,y(d,k((function(e){switch(e.g){case 1:return e.m=2,y(e,WebAssembly.instantiate(gt),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})),2)):d.return();case 2:if(n=d.h,"object"==typeof window)return vt("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),vt("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),a=t.filter((function(e){return void 0!==e.data})),s=t.filter((function(e){return void 0===e.data})),c=Promise.all(a.map((function(t){var n=wt(e,t.url);if(void 0!==t.path){var r=t.path;n=n.then((function(t){return e.overrideFile(r,t),Promise.resolve(t)}))}return n}))),l=Promise.all(s.map((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(e.locateFile(t.url,e.S)):Promise.resolve()}))).then((function(){var t,n,r;return k((function(i){if(1==i.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=e,y(i,t(n),2);r.h=i.h,i.g=0}))})),f=k((function(t){return e.g.graph&&e.g.graph.url?t=y(t,wt(e,e.g.graph.url),0):(t.g=0,t=void 0),t})),y(d,Promise.all([l,c,f]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=t.filter((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n})).map((function(t){return e.locateFile(t.url,e.S)})),importScripts.apply(null,u(r)),i=e,y(d,createMediapipeSolutionsWasm(Module),6);case 6:i.h=d.h,e.l=new OffscreenCanvas(1,1),e.h.canvas=e.l,o=e.h.GL.createContext(e.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),e.h.GL.makeContextCurrent(o),d.g=4;break;case 7:if(e.l=document.createElement("canvas"),!(h=e.l.getContext("webgl2",{}))&&!(h=e.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),d.return();e.D=h,e.h.canvas=e.l,e.h.createContext(e.l,!0,!0,{});case 4:e.i=new e.h.SolutionWasm,e.R=!1,d.g=0}}))}(e),2):3!=t.g?y(t,function(e){var t,n,r,i,o,a,u,c;return k((function(l){if(1==l.g)return e.g.graph&&e.g.graph.url&&e.P===e.g.graph.url?l.return():(e.o=!0,e.g.graph&&e.g.graph.url?(e.P=e.g.graph.url,y(l,wt(e,e.g.graph.url),3)):void(l.g=2));for(2!=l.g&&(t=l.h,e.i.loadGraph(t)),n=s(Object.keys(e.B)),r=n.next();!r.done;r=n.next())i=r.value,e.i.overrideFile(i,e.B[i]);if(e.B={},e.g.listeners)for(o=s(e.g.listeners),a=o.next();!a.done;a=o.next())u=a.value,bt(e,u);c=e.j,e.j={},e.setOptions(c),l.g=0}))}(e),3):y(t,function(e){var t,n,r,i,o,a;return k((function(u){switch(u.g){case 1:if(!e.o)return u.return();if(!e.v){u.g=2;break}t=s(e.v),n=t.next();case 3:if(n.done){u.g=5;break}return y(u,(0,n.value)(),4);case 4:n=t.next(),u.g=3;break;case 5:e.v=void 0;case 2:if(e.A){for(r=new e.h.GraphOptionChangeRequestList,i=s(e.A),o=i.next();!o.done;o=i.next())a=o.value,r.push_back(a);e.i.changeOptions(r),r.delete(),e.A=void 0}e.o=!1,u.g=0}}))}(e),0)}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){var n,r,i,o,a,u,c,l,f,h=this;return k((function(d){switch(d.g){case 1:return h.g.inputs?(n=1e3*(null==t?performance.now():t),y(d,h.C,2)):d.return();case 2:return y(d,h.initialize(),3);case 3:for(r=new h.h.PacketDataList,i=s(Object.keys(e)),o=i.next();!o.done;o=i.next())if(a=o.value,u=h.g.inputs[a]){e:{var p=e[a];switch(u.type){case"video":var g=h.m[u.stream];if(g||(g=new ht(h.h,h.D),h.m[u.stream]=g),0===g.l&&(g.l=g.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&p instanceof HTMLVideoElement)var m=p.videoWidth,v=p.videoHeight;else"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement?(m=p.naturalWidth,v=p.naturalHeight):(m=p.width,v=p.height);v={glName:g.l,width:m,height:v},(m=g.g).canvas.width=v.width,m.canvas.height=v.height,m.activeTexture(m.TEXTURE0),g.h.bindTexture2d(g.l),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,p),g.h.bindTexture2d(0),g=v;break e;case"detections":for((g=h.m[u.stream])||(g=new pt(h.h),h.m[u.stream]=g),g.data||(g.data=new g.g.DetectionListData),g.data.reset(p.length),v=0;v<p.length;++v){m=p[v];var w=g.data,b=w.setBoundingBox,x=v,_=m.T,k=new ot;if(Ee(k,1,_.Y),Ee(k,2,_.Z),Ee(k,3,_.height),Ee(k,4,_.width),Ee(k,5,_.rotation),Ee(k,6,_.W),_=Le(k,at),b.call(w,x,_),m.O)for(w=0;w<m.O.length;++w){var S=!!(k=m.O[w]).visibility;x=(b=g.data).addNormalizedLandmark,_=v,k=Object.assign(Object.assign({},k),{visibility:S?k.visibility:0}),Ee(S=new Ze,1,k.x),Ee(S,2,k.y),Ee(S,3,k.z),k.visibility&&Ee(S,4,k.visibility),k=Le(S,Qe),x.call(b,_,k)}if(m.M)for(w=0;w<m.M.length;++w)x=(b=g.data).addClassification,_=v,k=m.M[w],Ee(S=new He,2,k.X),k.index&&Ee(S,1,k.index),k.label&&Ee(S,3,k.label),k.displayName&&Ee(S,4,k.displayName),k=Le(S,Ge),x.call(b,_,k)}g=g.data;break e;default:g={}}}switch(c=g,l=u.stream,u.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},c),{stream:l,timestamp:n}));break;case"detections":(f=c).stream=l,f.timestamp=n,r.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return h.i.send(r),y(d,h.C,4);case 4:r.delete(),d.g=0}}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},I("Solution",yt),I("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=_t.prototype).reset=function(){this.g.reset()},e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){var e=this;return k((function(t){return y(t,e.g.initialize(),0)}))},e.send=function(e,t){var n=this;return k((function(r){return y(r,n.g.send(e,t),0)}))},e.setOptions=function(e){this.g.setOptions(e)},I("Pose",_t),I("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),I("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),I("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),I("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),I("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),I("VERSION","0.5.1635988162")}).call(this)},96064:(e,t,n)=>{"use strict";n.d(t,{cH:()=>Tt,oV:()=>Ee});var r=n(20264),i=n(88478),o=n(38985),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var h=["nose","left_eye","right_eye","left_ear","right_ear","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle"],d=["nose","left_eye_inner","left_eye","left_eye_outer","right_eye_inner","right_eye","right_eye_outer","left_ear","right_ear","mouth_left","mouth_right","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_pinky","right_pinky","left_index","right_index","left_thumb","right_thumb","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle","left_heel","right_heel","left_foot_index","right_foot_index"],p={left:[1,2,3,7,9,11,13,15,17,19,21,23,25,27,29,31],right:[4,5,6,8,10,12,14,16,18,20,22,24,26,28,30,32],middle:[0]},g={left:[1,3,5,7,9,11,13,15],right:[2,4,6,8,10,12,14,16],middle:[0]},m=[[0,1],[0,2],[1,3],[2,4],[5,6],[5,7],[5,11],[6,8],[6,12],[7,9],[8,10],[11,12],[11,13],[12,14],[13,15],[14,16]],v=[[0,1],[0,4],[1,2],[2,3],[3,7],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[11,23],[12,14],[14,16],[12,24],[13,15],[15,17],[16,18],[16,20],[15,17],[15,19],[15,21],[16,22],[17,19],[18,20],[23,25],[23,24],[24,26],[25,27],[26,28],[27,29],[28,30],[27,31],[28,32],[29,31],[30,32]];function y(e){return e instanceof SVGAnimatedLength?e.baseVal.value:e}function w(e){return c(this,void 0,void 0,(function(){var t,n;return l(this,(function(r){switch(r.label){case 0:return t=document.createElement("canvas"),e instanceof i.esB?[4,i.Xhn.toPixels(e,t)]:[3,2];case 1:return r.sent(),[3,3];case 2:t.width=y(e.width),t.height=y(e.height),n=t.getContext("2d"),e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0),r.label=3;case 3:return[2,t]}}))}))}function b(e){return c(this,void 0,void 0,(function(){var t,n,r,o,a,s;return l(this,(function(u){switch(u.label){case 0:return e instanceof i.esB?(t=e.shape.slice(0,2),n=t[0],r=t[1],o=ImageData.bind,[4,i.Xhn.toPixels(e)]):[3,2];case 1:return[2,new(o.apply(ImageData,[void 0,u.sent(),r,n]))];case 2:return a=document.createElement("canvas"),s=a.getContext("2d"),a.width=y(e.width),a.height=y(e.height),s.drawImage(e,0,0),[2,s.getImageData(0,0,a.width,a.height)]}}))}))}function x(e){return c(this,void 0,void 0,(function(){var t,n;return l(this,(function(r){switch(r.label){case 0:return e instanceof SVGImageElement||e instanceof OffscreenCanvas?[4,w(e)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=e,r.label=3;case 3:return t=n,[2,i.Xhn.fromPixels(t,4)]}}))}))}function _(e){if(e<0||e>=256)throw new Error("Mask value must be in range [0, 255] but got "+e);if(!Number.isInteger(e))throw new Error("Mask value must be an integer but got "+e)}var k={runtime:"mediapipe",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,modelType:"full"},S=function(){function e(e){this.mask=e}return e.prototype.toCanvasImageSource=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,this.mask]}))}))},e.prototype.toImageData=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,b(this.mask)]}))}))},e.prototype.toTensor=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,x(this.mask)]}))}))},e.prototype.getUnderlyingType=function(){return"canvasimagesource"},e}();function T(e){return _(e),"person"}var I=function(){function e(e){var t,n=this;switch(this.width=0,this.height=0,this.selfieMode=!1,this.poseSolution=new r.Pose({locateFile:function(t,n){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+t:n+"/"+t}}),e.modelType){case"lite":t=0;break;case"heavy":t=2;break;default:t=1}this.poseSolution.setOptions({modelComplexity:t,smoothLandmarks:e.enableSmoothing,enableSegmentation:e.enableSegmentation,smoothSegmentation:e.smoothSegmentation,selfieMode:this.selfieMode}),this.poseSolution.onResults((function(e){if(n.height=e.image.height,n.width=e.image.width,null==e.poseLandmarks)n.poses=[];else{var t=n.translateOutput(e.poseLandmarks,e.poseWorldLandmarks);e.segmentationMask&&(t.segmentation={maskValueToLabel:T,mask:new S(e.segmentationMask)}),n.poses=[t]}}))}return e.prototype.translateOutput=function(e,t){var n=this,r={keypoints:e.map((function(e,t){return{x:e.x*n.width,y:e.y*n.height,z:e.z,score:e.visibility,name:d[t]}}))};return null!=t&&(r.keypoints3D=t.map((function(e,t){return{x:e.x,y:e.y,z:e.z,score:e.visibility,name:d[t]}}))),r},e.prototype.estimatePoses=function(e,t,n){return c(this,void 0,void 0,(function(){var r,o;return l(this,(function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.poseSolution.setOptions({selfieMode:this.selfieMode})),e instanceof i.esB?(o=ImageData.bind,[4,i.Xhn.toPixels(e)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,a.label=3;case 3:return e=r,[4,this.poseSolution.send({image:e},n)];case 4:return a.sent(),[2,this.poses]}}))}))},e.prototype.dispose=function(){this.poseSolution.close()},e.prototype.reset=function(){this.poseSolution.reset()},e.prototype.initialize=function(){return this.poseSolution.initialize()},e}();function E(e){return c(this,void 0,void 0,(function(){var t,n;return l(this,(function(r){switch(r.label){case 0:return t=function(e){if(null==e)return u({},k);var t=u({},e);return t.runtime="mediapipe",null==t.enableSegmentation&&(t.enableSegmentation=k.enableSegmentation),null==t.enableSmoothing&&(t.enableSmoothing=k.enableSmoothing),null==t.smoothSegmentation&&(t.smoothSegmentation=k.smoothSegmentation),null==t.modelType&&(t.modelType=k.modelType),t}(e),[4,(n=new I(t)).initialize()];case 1:return r.sent(),[2,n]}}))}))}function A(e){return e instanceof i.esB?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function M(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function R(e){return e instanceof i.esB?e:i.Xhn.fromPixels(e)}function C(e,t,n){return P(n,"inputResolution"),[1/n.width*e[0][0]*t.width,1/n.height*e[0][1]*t.width,e[0][3]*t.width,1/n.width*e[1][0]*t.height,1/n.height*e[1][1]*t.height,e[1][3]*t.height,0,0]}function P(e,t){i.D5U.assert(0!==e.width,(function(){return t+" width cannot be 0."})),i.D5U.assert(0!==e.height,(function(){return t+" height cannot be 0."}))}function O(e,t,n){var r=n.rotationVectorStartKeypointIndex,i=n.rotationVectorEndKeypointIndex,o=e.locationData,a=o.relativeKeypoints[r].x*t.width,s=o.relativeKeypoints[r].y*t.height,u=o.relativeKeypoints[i].x*t.width,c=o.relativeKeypoints[i].y*t.height,l=2*Math.sqrt((u-a)*(u-a)+(c-s)*(c-s)),f=function(e,t,n){var r,i=e.locationData,o=n.rotationVectorStartKeypointIndex,a=n.rotationVectorEndKeypointIndex;r=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var s=i.relativeKeypoints[o].x*t.width,u=i.relativeKeypoints[o].y*t.height,c=i.relativeKeypoints[a].x*t.width,l=i.relativeKeypoints[a].y*t.height;return M(r-Math.atan2(-(l-u),c-s))}(e,t,n);return{xCenter:a/t.width,yCenter:s/t.height,width:l/t.width,height:l/t.height,rotation:f}}function D(e){if(16!==e.length)throw new Error("Array length must be 16 but got "+e.length);return[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}function F(e,t,n,r,i,o,a){return e[t][i]*(e[n][o]*e[r][a]-e[n][a]*e[r][o])}function L(e,t,n){var r=(t+1)%4,i=(t+2)%4,o=(t+3)%4,a=(n+1)%4,s=(n+2)%4,u=(n+3)%4;return F(e,r,i,o,a,s,u)+F(e,i,o,r,a,s,u)+F(e,o,r,i,a,s,u)}function j(e,t,n){void 0===n&&(n={ignoreRotation:!1});for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i],s=a.x-.5,c=a.y-.5,l=n.ignoreRotation?0:t.rotation,f=Math.cos(l)*s-Math.sin(l)*c,h=Math.sin(l)*s+Math.cos(l)*c;f=f*t.width+t.xCenter,h=h*t.height+t.yCenter;var d=a.z*t.width,p=u({},a);p.x=f,p.y=h,p.z=d,r.push(p)}return r}function N(e,t){var n=function(e,t,n,r){var i=(r-n)/255;return{scale:i,offset:n-0*i}}(0,0,t[0],t[1]);return(0,i.lub)((function(){return(0,i.IHx)((0,i.dC7)(e,n.scale),n.offset)}))}function U(e,t,n){var r,o,a,s,u,c,l,f,h,d,p,g,m=t.outputTensorSize,v=t.keepAspectRatio,y=t.borderMode,w=t.outputTensorFloatRange,b=A(e),x=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(b,n),_=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=t.height,i=t.width;P(t,"targetSize"),P(e,"roi");var o,a,s=r/i,u=e.height/e.width,c=0,l=0;return s>u?(o=e.width,a=e.width*s,l=(1-u/s)/2):(o=e.height/s,a=e.height,c=(1-s/u)/2),e.width=o,e.height=a,{top:l,left:c,right:c,bottom:l}}(x,m,v),k=(r=x,o=b.width,a=b.height,s=r.width,u=r.height,c=Math.cos(r.rotation),l=Math.sin(r.rotation),f=r.xCenter,h=r.yCenter,d=1/o,p=1/a,(g=new Array(16))[0]=s*c*1*d,g[1]=-u*l*d,g[2]=0,g[3]=(-.5*s*c*1+.5*u*l+f)*d,g[4]=s*l*1*p,g[5]=u*c*p,g[6]=0,g[7]=(-.5*u*c-.5*s*l*1+h)*p,g[8]=0,g[9]=0,g[10]=s*d,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,D(g));return{imageTensor:(0,i.lub)((function(){var t=R(e),n=(0,i.odF)(C(k,b,m),[1,8]),r="zero"===y?"constant":"nearest",o=i.BHj.transform((0,i.dt4)((0,i.pju)(t,"float32")),n,"bilinear",r,0,[m.height,m.width]);return null!=w?N(o,w):o})),padding:_,transformationMatrix:k}}function B(e,t,n,r){return 1===r?.5*(e+t):e+(t-e)*n/(r-1)}function z(e){return null!=e&&null!=e.currentTime}function V(e){for(var t={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=0;a<e.length;++a){var s=e[a];n=Math.min(n,s.x),r=Math.max(r,s.x),i=Math.min(i,s.y),o=Math.max(o,s.y),t.locationData.relativeKeypoints.push({x:s.x,y:s.y})}return t.locationData.relativeBoundingBox={xMin:n,yMin:i,xMax:r,yMax:o,width:r-n,height:o-i},t}function W(e,t,n,r){return c(this,void 0,void 0,(function(){var r,o,a,s,u;return l(this,(function(c){switch(c.label){case 0:return e.sort((function(e,t){return Math.max.apply(Math,t.score)-Math.max.apply(Math,e.score)})),r=(0,i.odF)(e.map((function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]}))),o=(0,i.RRF)(e.map((function(e){return e.score[0]}))),[4,i.BHj.nonMaxSuppressionAsync(r,o,t,n)];case 1:return[4,(a=c.sent()).array()];case 2:return s=c.sent(),u=e.filter((function(e,t){return s.indexOf(t)>-1})),(0,i.B90)([r,o,a]),[2,u]}}))}))}function H(e,t){return e.map((function(e){var n=u(u({},e),{x:e.x*t.width,y:e.y*t.height});return null!=e.z&&(n.z=e.z*t.width),n}))}function G(e,t,n){return c(this,void 0,void 0,(function(){var r,o,a,s,c,f,h,d,p,g,m,v,y,w,b,x,_,k,S,T,I,E,A,M;return l(this,(function(l){switch(l.label){case 0:if(r=(0,i.L9e)(t,[0]),o=r.shape,a=o[0],s=o[1],c=o[2],e.length!==c)throw new Error("Expected heatmap to have same number of channels as the number of landmarks. But got landmarks length: "+e.length+", heatmap length: "+c);return f=[],[4,r.buffer()];case 1:for(h=l.sent(),d=0;d<e.length;d++)if(p=e[d],g=u({},p),f.push(g),m=Math.trunc(g.x*s),v=Math.trunc(g.y*a),!(m<0||m>=s||v<0||m>=a)){for(y=Math.trunc((n.kernelSize-1)/2),w=Math.max(0,m-y),b=Math.min(s,m+y+1),x=Math.max(0,v-y),_=Math.min(a,v+y+1),k=0,S=0,T=0,I=0,E=x;E<_;++E)for(A=w;A<b;++A)M=h.get(E,A,d),k+=M,I=Math.max(I,M),S+=A*M,T+=E*M;I>=n.minConfidenceToRefine&&k>0&&(g.x=S/s/k,g.y=T/a/k)}return r.dispose(),[2,f]}}))}))}function q(e,t){var n=t.left,r=t.top,i=t.left+t.right,o=t.top+t.bottom;return e.map((function(e){return u(u({},e),{x:(e.x-n)/(1-i),y:(e.y-r)/(1-o),z:e.z/(1-i)})}))}function K(e,t,n){return c(this,void 0,void 0,(function(){var r,o,a,s,u;return l(this,(function(c){switch(c.label){case 0:return r=e[0],o=e[1],a=function(e,t,n){return(0,i.lub)((function(){var r,o,a,s;n.reverseOutputOrder?(o=(0,i.L9e)((0,i.tPi)(e,[0,n.boxCoordOffset+0],[-1,1])),r=(0,i.L9e)((0,i.tPi)(e,[0,n.boxCoordOffset+1],[-1,1])),s=(0,i.L9e)((0,i.tPi)(e,[0,n.boxCoordOffset+2],[-1,1])),a=(0,i.L9e)((0,i.tPi)(e,[0,n.boxCoordOffset+3],[-1,1]))):(r=(0,i.L9e)((0,i.tPi)(e,[0,n.boxCoordOffset+0],[-1,1])),o=(0,i.L9e)((0,i.tPi)(e,[0,n.boxCoordOffset+1],[-1,1])),a=(0,i.L9e)((0,i.tPi)(e,[0,n.boxCoordOffset+2],[-1,1])),s=(0,i.L9e)((0,i.tPi)(e,[0,n.boxCoordOffset+3],[-1,1]))),o=(0,i.IHx)((0,i.dC7)((0,i.hiC)(o,n.xScale),t.w),t.x),r=(0,i.IHx)((0,i.dC7)((0,i.hiC)(r,n.yScale),t.h),t.y),n.applyExponentialOnBoxSize?(a=(0,i.dC7)((0,i.Qqt)((0,i.hiC)(a,n.hScale)),t.h),s=(0,i.dC7)((0,i.Qqt)((0,i.hiC)(s,n.wScale)),t.w)):(a=(0,i.dC7)((0,i.hiC)(a,n.hScale),t.h),s=(0,i.dC7)((0,i.hiC)(s,n.wScale),t.h));var u=(0,i.luU)(r,(0,i.hiC)(a,2)),c=(0,i.luU)(o,(0,i.hiC)(s,2)),l=(0,i.IHx)(r,(0,i.hiC)(a,2)),f=(0,i.IHx)(o,(0,i.hiC)(s,2)),h=(0,i.zoF)([(0,i.XLQ)(u,[n.numBoxes,1]),(0,i.XLQ)(c,[n.numBoxes,1]),(0,i.XLQ)(l,[n.numBoxes,1]),(0,i.XLQ)(f,[n.numBoxes,1])],1);if(n.numKeypoints)for(var d=0;d<n.numKeypoints;++d){var p=n.keypointCoordOffset+d*n.numValuesPerKeypoint,g=void 0,m=void 0;n.reverseOutputOrder?(g=(0,i.L9e)((0,i.tPi)(e,[0,p],[-1,1])),m=(0,i.L9e)((0,i.tPi)(e,[0,p+1],[-1,1]))):(m=(0,i.L9e)((0,i.tPi)(e,[0,p],[-1,1])),g=(0,i.L9e)((0,i.tPi)(e,[0,p+1],[-1,1])));var v=(0,i.IHx)((0,i.dC7)((0,i.hiC)(g,n.xScale),t.w),t.x),y=(0,i.IHx)((0,i.dC7)((0,i.hiC)(m,n.yScale),t.h),t.y);h=(0,i.zoF)([h,(0,i.XLQ)(v,[n.numBoxes,1]),(0,i.XLQ)(y,[n.numBoxes,1])],1)}return h}))}(o,t,n),s=(0,i.lub)((function(){var e=r;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(e=(0,i.iUl)(r,-n.scoreClippingThresh,n.scoreClippingThresh)),e=(0,i.XD2)(e)):e})),[4,X(a,s,n)];case 1:return u=c.sent(),(0,i.B90)([a,s]),[2,u]}}))}))}function X(e,t,n){return c(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,f,h,d,p,g;return l(this,(function(l){switch(l.label){case 0:return r=[],[4,e.data()];case 1:return i=l.sent(),[4,t.data()];case 2:for(o=l.sent(),a=0;a<n.numBoxes;++a)if(!(null!=n.minScoreThresh&&o[a]<n.minScoreThresh||(s=a*n.numCoords,u=Y(i[s+0],i[s+1],i[s+2],i[s+3],o[a],n.flipVertically,a),(c=u.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((f=u.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,d=0;d<h;d+=n.numValuesPerKeypoint)p=s+n.keypointCoordOffset+d,g={x:i[p+0],y:n.flipVertically?1-i[p+1]:i[p+1]},f.relativeKeypoints.push(g);r.push(u)}return[2,r]}}))}))}function Y(e,t,n,r,i,o,a){return{score:[i],ind:a,locationData:{relativeBoundingBox:{xMin:t,yMin:o?1-n:e,xMax:r,yMax:o?1-e:n,width:r-t,height:n-e}}}}function $(e,t){return"none"===e?t:function(e){return 1/(1+Math.exp(-e))}(t)}function J(e,t,n,r){return c(this,void 0,void 0,(function(){var i,o,a,s,u,c,f,h;return l(this,(function(l){switch(l.label){case 0:return n=n||t.flipHorizontally||!1,r=r||t.flipVertically||!1,i=e.size,o=i/t.numLandmarks,[4,e.data()];case 1:for(a=l.sent(),s=[],u=0;u<t.numLandmarks;++u)c=u*o,(h={x:0,y:0}).x=n?t.inputImageWidth-a[c]:a[c],o>1&&(h.y=r?t.inputImageHeight-a[c+1]:a[c+1]),o>2&&(h.z=a[c+2]),o>3&&(h.score=$(t.visibilityActivation,a[c+3])),s.push(h);for(f=0;f<s.length;++f)(h=s[f]).x=h.x/t.inputImageWidth,h.y=h.y/t.inputImageHeight,h.z=h.z/t.inputImageWidth/(t.normalizeZ||1);return[2,s]}}))}))}function Z(e,t,n){var r=e.width,i=e.height,o=e.rotation;if(null==n.rotation&&null==n.rotationDegree||(o=function(e,t){return null!=t.rotation?e+=t.rotation:null!=t.rotationDegree&&(e+=Math.PI*t.rotationDegree/180),M(e)}(o,n)),0===o)e.xCenter=e.xCenter+r*n.shiftX,e.yCenter=e.yCenter+i*n.shiftY;else{var a=(t.width*r*n.shiftX*Math.cos(o)-t.height*i*n.shiftY*Math.sin(o))/t.width,s=(t.width*r*n.shiftX*Math.sin(o)+t.height*i*n.shiftY*Math.cos(o))/t.height;e.xCenter=e.xCenter+a,e.yCenter=e.yCenter+s}if(n.squareLong){var u=Math.max(r*t.width,i*t.height);r=u/t.width,i=u/t.height}else if(n.squareShort){var c=Math.min(r*t.width,i*t.height);r=c/t.width,i=c/t.height}return e.width=r*n.scaleX,e.height=i*n.scaleY,e}var Q=function(){function e(e){this.alpha=e,this.initialized=!1}return e.prototype.apply=function(e,t){var n;return this.initialized?n=null==t?this.storedValue+this.alpha*(e-this.storedValue):this.storedValue+this.alpha*t*Math.asinh((e-this.storedValue)/t):(n=e,this.initialized=!0),this.rawValue=e,this.storedValue=n,n},e.prototype.applyWithAlpha=function(e,t,n){return this.alpha=t,this.apply(e,n)},e.prototype.hasLastRawValue=function(){return this.initialized},e.prototype.lastRawValue=function(){return this.rawValue},e.prototype.reset=function(){this.initialized=!1},e}(),ee=function(){function e(e){this.frequency=e.frequency,this.minCutOff=e.minCutOff,this.beta=e.beta,this.thresholdCutOff=e.thresholdCutOff,this.thresholdBeta=e.thresholdBeta,this.derivateCutOff=e.derivateCutOff,this.x=new Q(this.getAlpha(this.minCutOff)),this.dx=new Q(this.getAlpha(this.derivateCutOff)),this.lastTimestamp=0}return e.prototype.apply=function(e,t,n){if(null==e)return e;var r=Math.trunc(t);if(this.lastTimestamp>=r)return e;0!==this.lastTimestamp&&0!==r&&(this.frequency=1/(1e-6*(r-this.lastTimestamp))),this.lastTimestamp=r;var i=this.x.hasLastRawValue()?(e-this.x.lastRawValue())*n*this.frequency:0,o=this.dx.applyWithAlpha(i,this.getAlpha(this.derivateCutOff)),a=this.minCutOff+this.beta*Math.abs(o),s=null!=this.thresholdCutOff?this.thresholdCutOff+this.thresholdBeta*Math.abs(o):null;return this.x.applyWithAlpha(e,this.getAlpha(a),s)},e.prototype.getAlpha=function(e){return 1/(1+this.frequency/(2*Math.PI*e))},e}(),te=function(){function e(e){this.config=e}return e.prototype.apply=function(e,t,n){var r=this;if(null==e)return this.reset(),null;this.initializeFiltersIfEmpty(e);var i=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return f(e);i=1/n}return e.map((function(e,n){var o=u(u({},e),{x:r.xFilters[n].apply(e.x,t,i),y:r.yFilters[n].apply(e.y,t,i)});return null!=e.z&&(o.z=r.zFilters[n].apply(e.z,t,i)),o}))},e.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},e.prototype.initializeFiltersIfEmpty=function(e){var t=this;null!=this.xFilters&&this.xFilters.length===e.length||(this.xFilters=e.map((function(e){return new ee(t.config)})),this.yFilters=e.map((function(e){return new ee(t.config)})),this.zFilters=e.map((function(e){return new ee(t.config)})))},e}(),ne=function(){function e(e){this.config=e,this.window=[],this.lowPassFilter=new Q(1),this.lastValue=0,this.lastValueScale=1,this.lastTimestamp=-1}return e.prototype.apply=function(e,t,n){if(null==e)return e;var r,i=Math.trunc(t);if(this.lastTimestamp>=i)return e;if(-1===this.lastTimestamp)r=1;else{for(var o=e*n-this.lastValue*this.lastValueScale,a=i-this.lastTimestamp,s=o,u=a,c=(1+this.window.length)*(1e6/30),l=0,f=this.window;l<f.length;l++){var h=f[l];if(u+h.duration>c)break;s+=h.distance,u+=h.duration}var d=s/(1e-6*u);r=1-1/(1+this.config.velocityScale*Math.abs(d)),this.window.unshift({distance:o,duration:a}),this.window.length>this.config.windowSize&&this.window.pop()}return this.lastValue=e,this.lastValueScale=n,this.lastTimestamp=i,this.lowPassFilter.applyWithAlpha(e,r)},e}(),re=function(){function e(e){this.config=e}return e.prototype.apply=function(e,t,n){var r=this;if(null==e)return this.reset(),null;var i=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return f(e);i=1/n}return this.initializeFiltersIfEmpty(e),e.map((function(e,n){var o=u(u({},e),{x:r.xFilters[n].apply(e.x,t,i),y:r.yFilters[n].apply(e.y,t,i)});return null!=e.z&&(o.z=r.zFilters[n].apply(e.z,t,i)),o}))},e.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},e.prototype.initializeFiltersIfEmpty=function(e){var t=this;null!=this.xFilters&&this.xFilters.length===e.length||(this.xFilters=e.map((function(e){return new ne(t.config)})),this.yFilters=e.map((function(e){return new ne(t.config)})),this.zFilters=e.map((function(e){return new ne(t.config)})))},e}(),ie=function(){function e(e){if(null!=e.velocityFilter)this.keypointsFilter=new re(e.velocityFilter);else{if(null==e.oneEuroFilter)throw new Error("Either configure velocityFilter or oneEuroFilter, but got "+e+".");this.keypointsFilter=new te(e.oneEuroFilter)}}return e.prototype.apply=function(e,t,n,r,i){if(void 0===r&&(r=!1),null==e)return this.keypointsFilter.reset(),null;var o=null!=i?function(e,t){return(e.width*t.width+e.height*t.height)/2}(i,n):1,a=r?H(e,n):e,s=this.keypointsFilter.apply(a,t,o);return r?function(e,t){return e.map((function(e){var n=u(u({},e),{x:e.x/t.width,y:e.y/t.height});return null!=e.z&&(e.z=e.z/t.width),n}))}(s,n):s},e}(),oe=function(){function e(e){this.alpha=e.alpha}return e.prototype.apply=function(e){var t=this;if(null==e)return this.visibilityFilters=null,null;null!=this.visibilityFilters&&this.visibilityFilters.length===e.length||(this.visibilityFilters=e.map((function(e){return new Q(t.alpha)})));for(var n=[],r=0;r<e.length;++r){var i=e[r],o=u({},i);o.score=this.visibilityFilters[r].apply(i.score),n.push(o)}return n},e}(),ae={reduceBoxesInLowestlayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:5,minScale:.1484375,maxScale:.75,inputSizeHeight:224,inputSizeWidth:224,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,32,32,32],aspectRatios:[1],fixedAnchorSize:!0},se={runtime:"tfjs",modelType:"full",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/detector/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"},ue={maxPoses:1,flipHorizontal:!1},ce={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2254,numCoords:12,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:4,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:224,yScale:224,hScale:224,wScale:224,minScoreThresh:.5},le={shiftX:0,shiftY:0,scaleX:1.25,scaleY:1.25,squareLong:!0},fe={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},he={outputTensorSize:{width:256,height:256},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},de={numLandmarks:39,inputImageWidth:256,inputImageHeight:256,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},pe={numLandmarks:39,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},ge={kernelSize:7,minConfidenceToRefine:.5},me={alpha:.1},ve={oneEuroFilter:{frequency:30,minCutOff:.05,beta:80,derivateCutOff:1,minAllowedObjectScale:1e-6}},ye={oneEuroFilter:{frequency:30,minCutOff:.01,beta:10,derivateCutOff:1,minAllowedObjectScale:1e-6}},we={oneEuroFilter:{frequency:30,minCutOff:.1,beta:40,derivateCutOff:1,minAllowedObjectScale:1e-6,disableValueScaling:!0}},be={activation:"none"},xe={combineWithPreviousRatio:.7},_e=function(){function e(e){this.mask=e}return e.prototype.toCanvasImageSource=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,w(this.mask)]}))}))},e.prototype.toImageData=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,b(this.mask)]}))}))},e.prototype.toTensor=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,this.mask]}))}))},e.prototype.getUnderlyingType=function(){return"tensor"},e}();function ke(e){return _(e),"person"}var Se=function(){function e(e,t,n,r,o,a){this.detectorModel=e,this.landmarkModel=t,this.enableSmoothing=n,this.enableSegmentation=r,this.smoothSegmentation=o,this.modelType=a,this.regionOfInterest=null,this.prevFilteredSegmentationMask=null,this.anchors=function(e){null==e.reduceBoxesInLowestLayer&&(e.reduceBoxesInLowestLayer=!1),null==e.interpolatedScaleAspectRatio&&(e.interpolatedScaleAspectRatio=1),null==e.fixedAnchorSize&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var r=[],i=[],o=[],a=[],s=n;s<e.strides.length&&e.strides[s]===e.strides[n];){var u=B(e.minScale,e.maxScale,s,e.strides.length);if(0===s&&e.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),a.push(.1),a.push(u),a.push(u);else{for(var c=0;c<e.aspectRatios.length;++c)o.push(e.aspectRatios[c]),a.push(u);if(e.interpolatedScaleAspectRatio>0){var l=s===e.strides.length-1?1:B(e.minScale,e.maxScale,s+1,e.strides.length);a.push(Math.sqrt(u*l)),o.push(e.interpolatedScaleAspectRatio)}}s++}for(var f=0;f<o.length;++f){var h=Math.sqrt(o[f]);r.push(a[f]/h),i.push(a[f]*h)}var d=0,p=0;if(e.featureMapHeight.length>0)d=e.featureMapHeight[n],p=e.featureMapWidth[n];else{var g=e.strides[n];d=Math.ceil(e.inputSizeHeight/g),p=Math.ceil(e.inputSizeWidth/g)}for(var m=0;m<d;++m)for(var v=0;v<p;++v)for(var y=0;y<r.length;++y){var w={xCenter:(v+e.anchorOffsetX)/p,yCenter:(m+e.anchorOffsetY)/d,width:0,height:0};e.fixedAnchorSize?(w.width=1,w.height=1):(w.width=i[y],w.height=r[y]),t.push(w)}n=s}return t}(ae);var s=(0,i.RRF)(this.anchors.map((function(e){return e.width}))),u=(0,i.RRF)(this.anchors.map((function(e){return e.height}))),c=(0,i.RRF)(this.anchors.map((function(e){return e.xCenter}))),l=(0,i.RRF)(this.anchors.map((function(e){return e.yCenter})));this.anchorTensor={x:c,y:l,w:s,h:u},this.prevFilteredSegmentationMask=this.enableSegmentation?(0,i.odF)([],[0,0]):null}return e.prototype.estimatePoses=function(e,t,n){return c(this,void 0,void 0,(function(){var r,o,a,s,c,f,h,p,g,m,v,y,w,b,x,_,k,S,T,I,E,M,C;return l(this,(function(l){switch(l.label){case 0:return r=function(e){var t;if(null==(t=null==e?ue:u({},e)).maxPoses&&(t.maxPoses=1),t.maxPoses<=0)throw new Error("Invalid maxPoses "+t.maxPoses+". Should be > 0.");if(t.maxPoses>1)throw new Error("Multi-pose detection is not implemented yet. Please set maxPoses to 1.");return t}(t),null==e?(this.reset(),[2,[]]):(this.maxPoses=r.maxPoses,this.timestamp=null!=n?1e3*n:z(e)?1e6*e.currentTime:null,o=A(e),a=(0,i.lub)((function(){return(0,i.pju)(R(e),"float32")})),null!=(s=this.regionOfInterest)?[3,2]:[4,this.detectPose(a)]);case 1:if(0===(c=l.sent()).length)return this.reset(),a.dispose(),[2,[]];f=c[0],s=this.poseDetectionToRoi(f,o),l.label=2;case 2:return[4,this.poseLandmarksByRoi(s,a)];case 3:return h=l.sent(),a.dispose(),null==h?(this.reset(),[2,[]]):(p=h.landmarks,g=h.auxiliaryLandmarks,m=h.poseScore,v=h.worldLandmarks,y=h.segmentationMask,w=this.poseLandmarkFiltering(p,g,v,o),b=w.actualLandmarksFiltered,x=w.auxiliaryLandmarksFiltered,_=w.actualWorldLandmarksFiltered,k=this.poseLandmarksToRoi(x,o),this.regionOfInterest=k,S=this.smoothSegmentation&&null!=y?this.poseSegmentationFiltering(y):y,null!=(T=null!=b?H(b,o):null)&&T.forEach((function(e,t){e.name=d[t]})),null!=(I=_)&&I.forEach((function(e,t){e.name=d[t]})),E={score:m,keypoints:T,keypoints3D:I},null!==S&&(M=(0,i.lub)((function(){var e=(0,i.dt4)(S,2),t=(0,i.vku)(e,[[0,0],[0,0],[0,1]]);return(0,i.VdP)(t,[[0,0],[0,0],[0,2]],"symmetric")})),this.smoothSegmentation||(0,i.B90)(S),C={maskValueToLabel:ke,mask:new _e(M)},E.segmentation=C),[2,[E]])}}))}))},e.prototype.poseSegmentationFiltering=function(e){var t=this.prevFilteredSegmentationMask;return 0===t.size?this.prevFilteredSegmentationMask=e:(this.prevFilteredSegmentationMask=function(e,t,n){return"webgl"===(0,i.N_N)()?function(e,t,n){var r=n.combineWithPreviousRatio.toFixed(2),o={variableNames:["prevMask","newMask"],outputShape:e.shape,userCode:"\n  void main() {\n      ivec2 coords = getOutputCoords();\n      int height = coords[0];\n      int width = coords[1];\n\n      float prevMaskValue = getPrevMask(height, width);\n      float newMaskValue = getNewMask(height, width);\n\n      /*\n      * Assume p := newMaskValue\n      * H(p) := 1 + (p * log(p) + (1-p) * log(1-p)) / log(2)\n      * uncertainty alpha(p) =\n      *   Clamp(1 - (1 - H(p)) * (1 - H(p)), 0, 1) [squaring the\n      * uncertainty]\n      *\n      * The following polynomial approximates uncertainty alpha as a\n      * function of (p + 0.5):\n      */\n      const float c1 = 5.68842;\n      const float c2 = -0.748699;\n      const float c3 = -57.8051;\n      const float c4 = 291.309;\n      const float c5 = -624.717;\n      float t = newMaskValue - 0.5;\n      float x = t * t;\n\n      float uncertainty =\n        1.0 - min(1.0, x * (c1 + x * (c2 + x * (c3 + x * (c4 + x * c5)))));\n\n      float outputValue = newMaskValue + (prevMaskValue - newMaskValue) *\n                             (uncertainty * "+r+");\n\n      setOutput(outputValue);\n    }\n"},a=(0,i.y3$)();return(0,i.lub)((function(){var n=a.compileAndRun(o,[e,t]);return(0,i.SRH)().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}))}(e,t,n):(0,i.lub)((function(){var r=(0,i.luU)(t,.5),o=(0,i.h62)(r),a=(0,i.luU)(1,(0,i.LTh)(1,(0,i.dC7)(o,(0,i.IHx)(5.68842,(0,i.dC7)(o,(0,i.IHx)(-.748699,(0,i.dC7)(o,(0,i.IHx)(-57.8051,(0,i.dC7)(o,(0,i.IHx)(291.309,(0,i.dC7)(o,-624.717)))))))))));return(0,i.IHx)(t,(0,i.dC7)((0,i.luU)(e,t),(0,i.dC7)(a,n.combineWithPreviousRatio)))}))}(t,e,xe),(0,i.B90)(e)),(0,i.B90)(t),this.prevFilteredSegmentationMask},e.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),(0,i.B90)([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h,this.prevFilteredSegmentationMask])},e.prototype.reset=function(){this.regionOfInterest=null,this.enableSegmentation&&((0,i.B90)(this.prevFilteredSegmentationMask),this.prevFilteredSegmentationMask=(0,i.odF)([],[0,0])),this.visibilitySmoothingFilterActual=null,this.visibilitySmoothingFilterAuxiliary=null,this.landmarksSmoothingFilterActual=null,this.landmarksSmoothingFilterAuxiliary=null},e.prototype.detectPose=function(e){return c(this,void 0,void 0,(function(){var t,n,r,o,a,s,u,c,f,h;return l(this,(function(l){switch(l.label){case 0:return t=U(e,fe),n=t.imageTensor,r=t.padding,o=this.detectorModel.predict(n),a=function(e){return(0,i.lub)((function(){var t=function(e){return(0,i.lub)((function(){return[(0,i.tPi)(e,[0,0,0],[1,-1,1]),(0,i.tPi)(e,[0,0,1],[1,-1,-1])]}))}(e),n=t[0],r=t[1];return{boxes:(0,i.L9e)(r),logits:(0,i.L9e)(n)}}))}(o),s=a.boxes,[4,K([u=a.logits,s],this.anchorTensor,ce)];case 1:return 0===(c=l.sent()).length?((0,i.B90)([n,o,u,s]),[2,c]):[4,W(c,this.maxPoses,.3)];case 2:return f=l.sent(),h=function(e,t){void 0===e&&(e=[]);for(var n=t.left,r=t.top,i=t.left+t.right,o=t.top+t.bottom,a=0;a<e.length;a++){var s=e[a],u=s.locationData.relativeBoundingBox,c=(u.xMin-n)/(1-i),l=(u.yMin-r)/(1-o),f=u.width/(1-i),h=u.height/(1-o);u.xMin=c,u.yMin=l,u.width=f,u.height=h,u.xMax=c+f,u.yMax=l+h;var d=s.locationData.relativeKeypoints;d&&d.forEach((function(e){var t=(e.x-n)/(1-i),a=(e.y-r)/(1-o);e.x=t,e.y=a}))}return e}(f,r),(0,i.B90)([n,o,u,s]),[2,h]}}))}))},e.prototype.poseDetectionToRoi=function(e,t){return Z(O(e,t,{rotationVectorEndKeypointIndex:1,rotationVectorStartKeypointIndex:0,rotationVectorTargetAngleDegree:90}),t,le)},e.prototype.poseLandmarksByRoi=function(e,t){return c(this,void 0,void 0,(function(){var n,r,o,a,s,c,f,h,d,p,g,m,v,y;return l(this,(function(l){switch(l.label){case 0:if(n=A(t),r=U(t,he,e),o=r.imageTensor,a=r.padding,s=r.transformationMatrix,"lite"!==this.modelType&&"full"!==this.modelType&&"heavy"!==this.modelType)throw new Error("Model type must be one of lite, full or heavy,but got "+this.modelType);return c=["ld_3d","output_poseflag","activation_heatmap","world_3d"],this.enableSegmentation&&c.push("activation_segmentation"),f=this.landmarkModel.execute(o,c),[4,this.tensorsToPoseLandmarksAndSegmentation(f)];case 1:return null==(h=l.sent())?((0,i.B90)(f),(0,i.B90)(o),[2,null]):(d=h.landmarks,p=h.auxiliaryLandmarks,g=h.poseScore,m=h.worldLandmarks,v=h.segmentationMask,[4,this.poseLandmarksAndSegmentationInverseProjection(n,e,a,s,d,p,m,v)]);case 2:return y=l.sent(),(0,i.B90)(f),(0,i.B90)(o),[2,u({poseScore:g},y)]}}))}))},e.prototype.poseLandmarksAndSegmentationInverseProjection=function(e,t,n,r,o,a,s,f){return c(this,void 0,void 0,(function(){var c,h,d,p,g,m;return l(this,(function(l){return c=q(o,n),h=q(a,n),d=j(c,t),p=j(h,t),g=function(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],a=o.x,s=o.y,c=t.rotation,l=Math.cos(c)*a-Math.sin(c)*s,f=Math.sin(c)*a+Math.cos(c)*s,h=u({},o);h.x=l,h.y=f,n.push(h)}return n}(s,t),m=null,this.enableSegmentation&&(m=(0,i.lub)((function(){var t=f.shape,n=t[0],o=t[1],a=function(e){var t=D(new Array(16).fill(0));t[0][0]=L(e,0,0),t[1][0]=-L(e,0,1),t[2][0]=L(e,0,2),t[3][0]=-L(e,0,3),t[0][2]=L(e,2,0),t[1][2]=-L(e,2,1),t[2][2]=L(e,2,2),t[3][2]=-L(e,2,3),t[0][1]=-L(e,1,0),t[1][1]=L(e,1,1),t[2][1]=-L(e,1,2),t[3][1]=L(e,1,3),t[0][3]=-L(e,3,0),t[1][3]=L(e,3,1),t[2][3]=-L(e,3,2),t[3][3]=L(e,3,3);for(var n=e[0][0]*t[0][0]+e[1][0]*t[0][1]+e[2][0]*t[0][2]+e[3][0]*t[0][3],r=0;r<t.length;r++)for(var i=0;i<t.length;i++)t[r][i]/=n;return t}(r),s=(0,i.odF)(C(a,{width:o,height:n},e),[1,8]),u=[1,n,o,1];return(0,i.L9e)(i.BHj.transform((0,i.XLQ)(f,u),s,"bilinear","constant",0,[e.height,e.width]),[0,3])})),(0,i.B90)(f)),[2,{landmarks:d,auxiliaryLandmarks:p,worldLandmarks:g,segmentationMask:m}]}))}))},e.prototype.tensorsToPoseLandmarksAndSegmentation=function(e){return c(this,void 0,void 0,(function(){var t,n,r,o,a,s,c,f,h,d,p,g,m;return l(this,(function(l){switch(l.label){case 0:return t=e[0],n=e[1],r=e[2],o=e[3],a=this.enableSegmentation?e[4]:null,[4,n.data()];case 1:return(s=l.sent()[0])<.5?[2,null]:[4,J(t,de)];case 2:return[4,G(l.sent(),r,ge)];case 3:return c=l.sent(),f=c.slice(0,33),h=c.slice(33,35),[4,J(o,pe)];case 4:return d=l.sent(),p=d.slice(0,33),g=function(e,t,n){void 0===n&&(n=!0);for(var r=[],i=0;i<e.length;i++){var o=u({},t[i]);n&&(o.score=e[i].score),r.push(o)}return r}(f,p,!0),m=this.enableSegmentation?function(e,t,n){return(0,i.lub)((function(){var n=(0,i.L9e)(e,[0]),r=n.shape[2];if(1===r){var o=n;switch(t.activation){case"none":break;case"sigmoid":o=(0,i.XD2)(o);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+t.activation+")")}var a=o;return(0,i.L9e)(a,[2])}throw new Error("Unsupported number of tensor channels "+r)}))}(a,be):null,[2,{landmarks:f,auxiliaryLandmarks:h,poseScore:s,worldLandmarks:g,segmentationMask:m}]}}))}))},e.prototype.poseLandmarksToRoi=function(e,t){return Z(O(V(e),t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:90}),t,le)},e.prototype.poseLandmarkFiltering=function(e,t,n,r){var i,o,a;if(null!=this.timestamp&&this.enableSmoothing){var s=O(V(t),r,{rotationVectorEndKeypointIndex:0,rotationVectorStartKeypointIndex:1,rotationVectorTargetAngleDegree:90});null==this.visibilitySmoothingFilterActual&&(this.visibilitySmoothingFilterActual=new oe(me)),i=this.visibilitySmoothingFilterActual.apply(e),null==this.visibilitySmoothingFilterAuxiliary&&(this.visibilitySmoothingFilterAuxiliary=new oe(me)),o=this.visibilitySmoothingFilterAuxiliary.apply(t),a=this.visibilitySmoothingFilterActual.apply(n),null==this.landmarksSmoothingFilterActual&&(this.landmarksSmoothingFilterActual=new ie(ve)),i=this.landmarksSmoothingFilterActual.apply(i,this.timestamp,r,!0,s),null==this.landmarksSmoothingFilterAuxiliary&&(this.landmarksSmoothingFilterAuxiliary=new ie(ye)),o=this.landmarksSmoothingFilterAuxiliary.apply(o,this.timestamp,r,!0,s),null==this.worldLandmarksSmoothingFilterActual&&(this.worldLandmarksSmoothingFilterActual=new ie(we)),a=this.worldLandmarksSmoothingFilterActual.apply(n,this.timestamp)}else i=e,o=t,a=n;return{actualLandmarksFiltered:i,auxiliaryLandmarksFiltered:o,actualWorldLandmarksFiltered:a}},e}();function Te(e){return c(this,void 0,void 0,(function(){var t,n,r,i,a,s;return l(this,(function(c){switch(c.label){case 0:return t=function(e){var t=u({},null==e?se:e);if(null==t.enableSmoothing&&(t.enableSmoothing=se.enableSmoothing),null==t.enableSegmentation&&(t.enableSegmentation=se.enableSegmentation),null==t.smoothSegmentation&&(t.smoothSegmentation=se.smoothSegmentation),null==t.modelType&&(t.modelType=se.modelType),null==t.detectorModelUrl&&(t.detectorModelUrl=se.detectorModelUrl),null==t.landmarkModelUrl)switch(t.modelType){case"lite":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/lite/2";break;case"heavy":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/heavy/2";break;default:t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"}return t}(e),n="string"==typeof t.detectorModelUrl&&t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r="string"==typeof t.landmarkModelUrl&&t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([(0,o.YL)(t.detectorModelUrl,{fromTFHub:n}),(0,o.YL)(t.landmarkModelUrl,{fromTFHub:r})])];case 1:return i=c.sent(),a=i[0],s=i[1],[2,new Se(a,s,t.enableSmoothing,t.enableSegmentation,t.smoothSegmentation,t.modelType)]}}))}))}var Ie,Ee,Ae,Me=function(){function e(e){!function(e){if(e.maxTracks<1)throw new Error("Must specify 'maxTracks' to be at least 1, but encountered "+e.maxTracks);if(e.maxAge<=0)throw new Error("Must specify 'maxAge' to be positive, but encountered "+e.maxAge);if(void 0!==e.keypointTrackerParams){if(e.keypointTrackerParams.keypointConfidenceThreshold<0||e.keypointTrackerParams.keypointConfidenceThreshold>1)throw new Error("Must specify 'keypointConfidenceThreshold' to be in the range [0, 1], but encountered "+e.keypointTrackerParams.keypointConfidenceThreshold);if(e.keypointTrackerParams.minNumberOfKeypoints<1)throw new Error("Must specify 'minNumberOfKeypoints' to be at least 1, but encountered "+e.keypointTrackerParams.minNumberOfKeypoints);for(var t=0,n=e.keypointTrackerParams.keypointFalloff;t<n.length;t++){var r=n[t];if(r<=0)throw new Error("Must specify each keypoint falloff parameterto be positive but encountered "+r)}}}(e),this.tracks=[],this.maxTracks=e.maxTracks,this.maxAge=1e3*e.maxAge,this.minSimilarity=e.minSimilarity,this.nextID=1}return e.prototype.apply=function(e,t){this.filterOldTracks(t);var n=this.computeSimilarity(e);return this.assignTracks(e,n,t),this.updateTracks(t),e},e.prototype.getTracks=function(){return this.tracks.slice()},e.prototype.getTrackIDs=function(){return new Set(this.tracks.map((function(e){return e.id})))},e.prototype.filterOldTracks=function(e){var t=this;this.tracks=this.tracks.filter((function(n){return e-n.lastTimestamp<=t.maxAge}))},e.prototype.assignTracks=function(e,t,n){for(var r=Array.from(Array(t[0].length).keys()),i=[],o=0,a=Array.from(Array(e.length).keys());o<a.length;o++){var s=a[o];if(0!==r.length){for(var u=-1,c=-1,l=0,f=r;l<f.length;l++){var h=f[l],d=t[s][h];d>=this.minSimilarity&&d>c&&(u=h,c=d)}if(u>=0){var p=this.tracks[u];p=Object.assign(p,this.createTrack(e[s],n,p.id)),e[s].id=p.id;var g=r.indexOf(u);r.splice(g,1)}else i.push(s)}else i.push(s)}for(var m=0,v=i;m<v.length;m++){s=v[m];var y=this.createTrack(e[s],n);this.tracks.push(y),e[s].id=y.id}},e.prototype.updateTracks=function(e){this.tracks.sort((function(e,t){return t.lastTimestamp-e.lastTimestamp})),this.tracks=this.tracks.slice(0,this.maxTracks)},e.prototype.createTrack=function(e,t,n){var r={id:n||this.nextTrackID(),lastTimestamp:t,keypoints:f(e.keypoints).map((function(e){return u({},e)}))};return void 0!==e.box&&(r.box=u({},e.box)),r},e.prototype.nextTrackID=function(){var e=this.nextID;return this.nextID+=1,e},e.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.tracks=this.tracks.filter((function(t){return!e.includes(t.id)}))},e.prototype.reset=function(){this.tracks=[]},e}(),Re=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.computeSimilarity=function(e){var t=this;return 0===e.length||0===this.tracks.length?[[]]:e.map((function(e){return t.tracks.map((function(n){return t.iou(e,n)}))}))},t.prototype.iou=function(e,t){var n=Math.max(e.box.xMin,t.box.xMin),r=Math.max(e.box.yMin,t.box.yMin),i=Math.min(e.box.xMax,t.box.xMax),o=Math.min(e.box.yMax,t.box.yMax);if(n>=i||r>=o)return 0;var a=(i-n)*(o-r);return a/(e.box.width*e.box.height+t.box.width*t.box.height-a)},t}(Me),Ce=function(e){function t(t){var n=e.call(this,t)||this;return n.keypointThreshold=t.keypointTrackerParams.keypointConfidenceThreshold,n.keypointFalloff=t.keypointTrackerParams.keypointFalloff,n.minNumKeyoints=t.keypointTrackerParams.minNumberOfKeypoints,n}return s(t,e),t.prototype.computeSimilarity=function(e){if(0===e.length||0===this.tracks.length)return[[]];for(var t=[],n=0,r=e;n<r.length;n++){for(var i=r[n],o=[],a=0,s=this.tracks;a<s.length;a++){var u=s[a];o.push(this.oks(i,u))}t.push(o)}return t},t.prototype.oks=function(e,t){for(var n=this.area(t.keypoints)+1e-6,r=0,i=0,o=0;o<e.keypoints.length;++o){var a=e.keypoints[o],s=t.keypoints[o];if(!(a.score<this.keypointThreshold||s.score<this.keypointThreshold)){i+=1;var u=Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2),c=2*this.keypointFalloff[o];r+=Math.exp(-1*u/(2*n*Math.pow(c,2)))}}return i<this.minNumKeyoints?0:r/i},t.prototype.area=function(e){var t=this,n=e.filter((function(e){return e.score>t.keypointThreshold})),r=Math.min.apply(Math,f([1],n.map((function(e){return e.x})))),i=Math.max.apply(Math,f([0],n.map((function(e){return e.x})))),o=Math.min.apply(Math,f([1],n.map((function(e){return e.y}))));return(i-r)*(Math.max.apply(Math,f([0],n.map((function(e){return e.y}))))-o)},t}(Me);function Pe(e){switch(e){case Ee.BlazePose:return d.reduce((function(e,t,n){return e[t]=n,e}),{});case Ee.PoseNet:case Ee.MoveNet:return h.reduce((function(e,t,n){return e[t]=n,e}),{});default:throw new Error("Model "+e+" is not supported.")}}(Ae=Ie||(Ie={})).Keypoint="keypoint",Ae.BoundingBox="boundingBox",function(e){e.MoveNet="MoveNet",e.BlazePose="BlazePose",e.PoseNet="PoseNet"}(Ee||(Ee={})),Object.freeze({__proto__:null,getKeypointIndexBySide:function(e){switch(e){case Ee.BlazePose:return p;case Ee.PoseNet:case Ee.MoveNet:return g;default:throw new Error("Model "+e+" is not supported.")}},getAdjacentPairs:function(e){switch(e){case Ee.BlazePose:return v;case Ee.PoseNet:case Ee.MoveNet:return m;default:throw new Error("Model "+e+" is not supported.")}},getKeypointIndexByName:Pe});var Oe=["SinglePose.Lightning","SinglePose.Thunder","MultiPose.Lightning"],De={modelType:"SinglePose.Lightning",enableSmoothing:!0},Fe={},Le={frequency:30,minCutOff:2.5,beta:300,derivateCutOff:2.5,thresholdCutOff:.5,thresholdBeta:5,disableValueScaling:!0},je={maxTracks:18,maxAge:1e3,minSimilarity:.2,keypointTrackerParams:{keypointConfidenceThreshold:.3,keypointFalloff:[.026,.025,.025,.035,.035,.079,.079,.072,.072,.062,.062,.107,.107,.087,.087,.089,.089],minNumberOfKeypoints:4}},Ne={maxTracks:18,maxAge:1e3,minSimilarity:.15,trackerParams:{}};function Ue(e,t){var n,r,i,o;return e?t.width>t.height?(n=1,r=t.height/t.width,i=0,o=(t.width/2-t.height/2)/t.width):(n=t.width/t.height,r=1,i=(t.height/2-t.width/2)/t.height,o=0):t.width>t.height?(n=t.width/t.height,r=1,i=(t.height/2-t.width/2)/t.height,o=0):(n=1,r=t.height/t.width,i=0,o=(t.width/2-t.height/2)/t.width),{yMin:i,xMin:o,yMax:i+n,xMax:o+r,height:n,width:r}}function Be(e,t){var n={maxTracks:e.maxTracks,maxAge:e.maxAge,minSimilarity:e.minSimilarity};return null!=t.maxTracks&&(n.maxTracks=t.maxTracks),null!=t.maxAge&&(n.maxAge=t.maxAge),null!=t.minSimilarity&&(n.minSimilarity=t.minSimilarity),n}var ze=function(){function e(e,t){this.moveNetModel=e,this.modelInputResolution={height:0,width:0},this.keypointIndexByName=Pe(Ee.MoveNet),"SinglePose.Lightning"===t.modelType?(this.modelInputResolution.width=192,this.modelInputResolution.height=192):"SinglePose.Thunder"===t.modelType&&(this.modelInputResolution.width=256,this.modelInputResolution.height=256),this.multiPoseModel="MultiPose.Lightning"===t.modelType,this.multiPoseModel||(this.keypointFilter=new te(Le),this.cropRegionFilterYMin=new Q(.9),this.cropRegionFilterXMin=new Q(.9),this.cropRegionFilterYMax=new Q(.9),this.cropRegionFilterXMax=new Q(.9)),this.enableSmoothing=t.enableSmoothing,t.minPoseScore?this.minPoseScore=t.minPoseScore:this.minPoseScore=.25,t.multiPoseMaxDimension?this.multiPoseMaxDimension=t.multiPoseMaxDimension:this.multiPoseMaxDimension=256,this.enableTracking=t.enableTracking,this.multiPoseModel&&this.enableTracking&&(t.trackerType===Ie.Keypoint?this.tracker=new Ce(t.trackerConfig):t.trackerType===Ie.BoundingBox&&(this.tracker=new Re(t.trackerConfig)),this.enableSmoothing&&(this.keypointFilterMap=new Map))}return e.prototype.runSinglePersonPoseModel=function(e){return c(this,void 0,void 0,(function(){var t,n,r,o,a;return l(this,(function(s){switch(s.label){case 0:if(4!==(t=this.moveNetModel.execute(e)).shape.length||1!==t.shape[0]||1!==t.shape[1]||17!==t.shape[2]||3!==t.shape[3])throw t.dispose(),new Error("Unexpected output shape from model: ["+t.shape+"]");return"webgpu"===(0,i.N_N)()?[3,1]:(n=t.dataSync(),[3,3]);case 1:return[4,t.data()];case 2:n=s.sent(),s.label=3;case 3:for(t.dispose(),r={keypoints:[],score:0},o=0,a=0;a<17;++a)r.keypoints[a]={y:n[3*a],x:n[3*a+1],score:n[3*a+2]},r.keypoints[a].score>.2&&(++o,r.score+=r.keypoints[a].score);return o>0&&(r.score/=o),[2,r]}}))}))},e.prototype.runMultiPersonPoseModel=function(e){return c(this,void 0,void 0,(function(){var t,n,r,o,a,s,u,c;return l(this,(function(l){switch(l.label){case 0:if(3!==(t=this.moveNetModel.execute(e)).shape.length||1!==t.shape[0]||56!==t.shape[2])throw t.dispose(),new Error("Unexpected output shape from model: ["+t.shape+"]");return"webgpu"===(0,i.N_N)()?[3,1]:(n=t.dataSync(),[3,3]);case 1:return[4,t.data()];case 2:n=l.sent(),l.label=3;case 3:for(t.dispose(),r=[],o=n.length/56,a=0;a<o;++a)for(r[a]={keypoints:[]},s=56*a+51,r[a].box={yMin:n[s],xMin:n[s+1],yMax:n[s+2],xMax:n[s+3],width:n[s+3]-n[s+1],height:n[s+2]-n[s]},u=56*a+55,r[a].score=n[u],r[a].keypoints=[],c=0;c<17;++c)r[a].keypoints[c]={y:n[56*a+3*c],x:n[56*a+3*c+1],score:n[56*a+3*c+2]};return[2,r]}}))}))},e.prototype.estimatePoses=function(e,t,n){return void 0===t&&(t=Fe),c(this,void 0,void 0,(function(){var r,o,a,s,c,f;return l(this,(function(l){switch(l.label){case 0:return t=function(e){return null==e?Fe:u({},e)}(t),null==e?(this.reset(),[2,[]]):(null==n?z(e)&&(n=1e6*e.currentTime):n*=1e3,r=R(e),o=A(r),a=(0,i.dt4)(r,0),e instanceof i.esB||r.dispose(),s=[],this.multiPoseModel?[3,2]:[4,this.estimateSinglePose(a,o,n)]);case 1:return s=l.sent(),[3,4];case 2:return[4,this.estimateMultiplePoses(a,o,n)];case 3:s=l.sent(),l.label=4;case 4:for(c=0;c<s.length;++c)for(f=0;f<s[c].keypoints.length;++f)s[c].keypoints[f].name=h[f],s[c].keypoints[f].y*=o.height,s[c].keypoints[f].x*=o.width;return[2,s]}}))}))},e.prototype.estimateSinglePose=function(e,t,n){return c(this,void 0,void 0,(function(){var r,o,a,s,u=this;return l(this,(function(c){switch(c.label){case 0:return this.cropRegion||(this.cropRegion=Ue(null==this.cropRegion,t)),r=(0,i.lub)((function(){var t=(0,i.odF)([[u.cropRegion.yMin,u.cropRegion.xMin,u.cropRegion.yMax,u.cropRegion.xMax]]),n=(0,i.lls)([1],"int32"),r=[u.modelInputResolution.height,u.modelInputResolution.width];return(0,i.pju)(i.BHj.cropAndResize(e,t,n,r,"bilinear",0),"int32")})),e.dispose(),[4,this.runSinglePersonPoseModel(r)];case 1:if(o=c.sent(),r.dispose(),o.score<this.minPoseScore)return this.reset(),[2,[]];for(a=0;a<o.keypoints.length;++a)o.keypoints[a].y=this.cropRegion.yMin+o.keypoints[a].y*this.cropRegion.height,o.keypoints[a].x=this.cropRegion.xMin+o.keypoints[a].x*this.cropRegion.width;return null!=n&&this.enableSmoothing&&(o.keypoints=this.keypointFilter.apply(o.keypoints,n,1)),s=function(e,t,n,r){for(var i={},o=0,a=h;o<a.length;o++){var s=a[o];i[s]=[t[n[s]].y*r.height,t[n[s]].x*r.width]}if(function(e,t){return(e[t.left_hip].score>.2||e[t.right_hip].score>.2)&&(e[t.left_shoulder].score>.2||e[t.right_shoulder].score>.2)}(t,n)){var u=(i.left_hip[0]+i.right_hip[0])/2,c=(i.left_hip[1]+i.right_hip[1])/2,l=function(e,t,n,r,i){for(var o=["left_shoulder","right_shoulder","left_hip","right_hip"],a=0,s=0,u=0;u<o.length;u++)(d=Math.abs(r-n[o[u]][0]))>a&&(a=d),(p=Math.abs(i-n[o[u]][1]))>s&&(s=p);for(var c=0,l=0,f=0,h=Object.keys(n);f<h.length;f++){var d,p,g=h[f];e[t[g]].score<.2||((d=Math.abs(r-n[g][0]))>c&&(c=d),(p=Math.abs(i-n[g][1]))>l&&(l=p))}return[a,s,c,l]}(t,n,i,u,c),f=l[0],d=l[1],p=l[2],g=l[3],m=Math.max(1.9*d,1.9*f,1.2*p,1.2*g),v=[u-(m=Math.min(m,Math.max(c,r.width-c,u,r.height-u))),c-m];if(m>Math.max(r.width,r.height)/2)return Ue(null==e,r);var y=2*m;return{yMin:v[0]/r.height,xMin:v[1]/r.width,yMax:(v[0]+y)/r.height,xMax:(v[1]+y)/r.width,height:(v[0]+y)/r.height-v[0]/r.height,width:(v[1]+y)/r.width-v[1]/r.width}}return Ue(null==e,r)}(this.cropRegion,o.keypoints,this.keypointIndexByName,t),this.cropRegion=this.filterCropRegion(s),[2,[o]]}}))}))},e.prototype.estimateMultiplePoses=function(e,t,n){return c(this,void 0,void 0,(function(){var r,o,a,s,u,c,f,h,d,p,g,m=this;return l(this,(function(l){switch(l.label){case 0:return t.width>t.height?(o=this.multiPoseMaxDimension,a=Math.round(this.multiPoseMaxDimension*t.height/t.width),r=i.BHj.resizeBilinear(e,[a,o]),u=o,c=32*Math.ceil(a/32),s=(0,i.vku)(r,[[0,0],[0,c-a],[0,0],[0,0]])):(o=Math.round(this.multiPoseMaxDimension*t.width/t.height),a=this.multiPoseMaxDimension,r=i.BHj.resizeBilinear(e,[a,o]),u=32*Math.ceil(o/32),c=a,s=(0,i.vku)(r,[[0,0],[0,0],[0,u-o],[0,0]])),r.dispose(),e.dispose(),f=(0,i.pju)(s,"int32"),s.dispose(),[4,this.runMultiPersonPoseModel(f)];case 1:for(h=l.sent(),f.dispose(),h=h.filter((function(e){return e.score>=m.minPoseScore})),p=0;p<h.length;++p)for(d=0;d<h[p].keypoints.length;++d)h[p].keypoints[d].y*=c/a,h[p].keypoints[d].x*=u/o;if(this.enableTracking&&(this.tracker.apply(h,n),this.enableSmoothing)){for(p=0;p<h.length;++p)this.keypointFilterMap.has(h[p].id)||this.keypointFilterMap.set(h[p].id,new te(Le)),h[p].keypoints=this.keypointFilterMap.get(h[p].id).apply(h[p].keypoints,n,1);g=this.tracker.getTrackIDs(),this.keypointFilterMap.forEach((function(e,t){g.has(t)||m.keypointFilterMap.delete(t)}))}return[2,h]}}))}))},e.prototype.filterCropRegion=function(e){if(e){var t=this.cropRegionFilterYMin.apply(e.yMin),n=this.cropRegionFilterXMin.apply(e.xMin),r=this.cropRegionFilterYMax.apply(e.yMax),i=this.cropRegionFilterXMax.apply(e.xMax);return{yMin:t,xMin:n,yMax:r,xMax:i,height:r-t,width:i-n}}return this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset(),null},e.prototype.dispose=function(){this.moveNetModel.dispose()},e.prototype.reset=function(){this.cropRegion=null,this.resetFilters()},e.prototype.resetFilters=function(){this.keypointFilter.reset(),this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset()},e}();function Ve(e){return void 0===e&&(e=De),c(this,void 0,void 0,(function(){var t,n,r,a;return l(this,(function(s){switch(s.label){case 0:return t=function(e){var t,n=null==e?De:u({},e);if(null==n.modelType)n.modelType="SinglePose.Lightning";else if(Oe.indexOf(n.modelType)<0)throw new Error("Invalid architecture "+n.modelType+". Should be one of "+Oe);if(null==n.enableSmoothing&&(n.enableSmoothing=!0),null!=n.minPoseScore&&(n.minPoseScore<0||n.minPoseScore>1))throw new Error("minPoseScore should be between 0.0 and 1.0");if(null!=n.multiPoseMaxDimension&&(n.multiPoseMaxDimension%32!=0||n.multiPoseMaxDimension<32))throw new Error("multiPoseMaxDimension must be a multiple of 32 and higher than 0");if("MultiPose.Lightning"===n.modelType&&null==n.enableTracking&&(n.enableTracking=!0),"MultiPose.Lightning"===n.modelType&&!0===n.enableTracking)if(null==n.trackerType&&(n.trackerType=Ie.BoundingBox),n.trackerType===Ie.Keypoint)null!=n.trackerConfig?n.trackerConfig=function(e){var t=Be(je,e);return t.keypointTrackerParams=u({},je.keypointTrackerParams),null!=e.keypointTrackerParams&&(null!=e.keypointTrackerParams.keypointConfidenceThreshold&&(t.keypointTrackerParams.keypointConfidenceThreshold=e.keypointTrackerParams.keypointConfidenceThreshold),null!=e.keypointTrackerParams.keypointFalloff&&(t.keypointTrackerParams.keypointFalloff=e.keypointTrackerParams.keypointFalloff),null!=e.keypointTrackerParams.minNumberOfKeypoints&&(t.keypointTrackerParams.minNumberOfKeypoints=e.keypointTrackerParams.minNumberOfKeypoints)),t}(n.trackerConfig):n.trackerConfig=je;else{if(n.trackerType!==Ie.BoundingBox)throw new Error("Tracker type not supported by MoveNet");null!=n.trackerConfig?n.trackerConfig=(t=n.trackerConfig,Be(Ne,t)):n.trackerConfig=Ne}return n}(e),r=!0,t.modelUrl?(r="string"==typeof t.modelUrl&&t.modelUrl.indexOf("https://tfhub.dev")>-1,[4,(0,o.YL)(t.modelUrl,{fromTFHub:r})]):[3,2];case 1:return n=s.sent(),[3,4];case 2:return a=void 0,"SinglePose.Lightning"===t.modelType?a="https://tfhub.dev/google/tfjs-model/movenet/singlepose/lightning/4":"SinglePose.Thunder"===t.modelType?a="https://tfhub.dev/google/tfjs-model/movenet/singlepose/thunder/4":"MultiPose.Lightning"===t.modelType&&(a="https://tfhub.dev/google/tfjs-model/movenet/multipose/lightning/1"),[4,(0,o.YL)(a,{fromTFHub:r})];case 3:n=s.sent(),s.label=4;case 4:return"webgl"===(0,i.N_N)()&&(0,i.OBj)().set("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",0),[2,new ze(n,t)]}}))}))}var We={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:{height:257,width:257}},He=["MobileNetV1","ResNet50"],Ge={MobileNetV1:[8,16],ResNet50:[16]},qe=[8,16,32],Ke={MobileNetV1:[.5,.75,1],ResNet50:[1]},Xe=[1,2,4],Ye={maxPoses:1,flipHorizontal:!1},$e={maxPoses:5,flipHorizontal:!1,scoreThreshold:.5,nmsRadius:20},Je=[-123.15,-115.9,-103.06];function Ze(e){return Math.floor(e/2)}var Qe=function(){function e(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return e.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},e.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},e.prototype.empty=function(){return-1===this.numberOfElements},e.prototype.size=function(){return this.numberOfElements+1},e.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},e.prototype.max=function(){return this.priorityQueue[0]},e.prototype.swim=function(e){for(;e>0&&this.less(Ze(e),e);)this.exchange(e,Ze(e)),e=Ze(e)},e.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},e.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},e.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},e.prototype.exchange=function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n},e}();function et(e,t,n,r,i,o){for(var a=o.shape,s=a[0],u=a[1],c=!0,l=Math.max(n-i,0),f=Math.min(n+i+1,s),h=l;h<f;++h){for(var d=Math.max(r-i,0),p=Math.min(r+i+1,u),g=d;g<p;++g)if(o.get(h,g,e)>t){c=!1;break}if(!c)break}return c}function tt(e){return c(this,void 0,void 0,(function(){return l(this,(function(t){return[2,Promise.all(e.map((function(e){return e.buffer()})))]}))}))}function nt(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+17)}}function rt(e,t,n){var r=nt(e.heatmapY,e.heatmapX,e.id,n),i=r.y,o=r.x;return{x:e.heatmapX*t+o,y:e.heatmapY*t+i}}function it(e,t,n,r){var i=n.x,o=n.y;return e.some((function(e){var n,a,s,u,c=e.keypoints;return n=o,a=i,(s=c[r].y-n)*s+(u=c[r].x-a)*u<=t}))}var ot=h.reduce((function(e,t,n){return e[t]=n,e}),{}),at=[["nose","left_eye"],["left_eye","left_ear"],["nose","right_eye"],["right_eye","right_ear"],["nose","left_shoulder"],["left_shoulder","left_elbow"],["left_elbow","left_wrist"],["left_shoulder","left_hip"],["left_hip","left_knee"],["left_knee","left_ankle"],["nose","right_shoulder"],["right_shoulder","right_elbow"],["right_elbow","right_wrist"],["right_shoulder","right_hip"],["right_hip","right_knee"],["right_knee","right_ankle"]].map((function(e){var t=e[0],n=e[1];return[ot[t],ot[n]]})),st=at.map((function(e){return e[1]})),ut=at.map((function(e){return e[0]}));function ct(e,t,n){return e<t?t:e>n?n:e}function lt(e,t,n,r){return{y:ct(Math.round(e.y/t),0,n-1),x:ct(Math.round(e.x/t),0,r-1)}}function ft(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ht(e,t,n,r,i,o,a,s){void 0===s&&(s=2);for(var u=r.shape,c=u[0],l=u[1],f={y:t.y,x:t.x},d=ft(f,function(e,t,n){var r=n.shape[2]/2;return{y:n.get(t.y,t.x,e),x:n.get(t.y,t.x,r+e)}}(e,lt(f,o,c,l),a)),p=0;p<s;p++){var g=lt(d,o,c,l),m=nt(g.y,g.x,n,i);d=ft({x:g.x*o,y:g.y*o},{x:m.x,y:m.y})}var v=lt(d,o,c,l),y=r.get(v.y,v.x,n);return{y:d.y,x:d.x,name:h[n],score:y}}function dt(e,t,n,r,i,o){var a=t.shape[2],s=st.length,u=new Array(a),c=e.part,l=e.score,f=rt(c,r,n);u[c.id]={score:l,name:h[c.id],y:f.y,x:f.x};for(var d=s-1;d>=0;--d){var p=st[d],g=ut[d];u[p]&&!u[g]&&(u[g]=ht(d,u[p],g,t,n,r,o))}for(d=0;d<s;++d)p=ut[d],g=st[d],u[p]&&!u[g]&&(u[g]=ht(d,u[p],g,t,n,r,i));return u}function pt(e,t,n){return n.reduce((function(n,r,i){var o=r.y,a=r.x,s=r.score;return it(e,t,{y:o,x:a},i)||(n+=s),n}),0)/n.length}function gt(e,t,n,r,i,o,a,s){return void 0===a&&(a=.5),void 0===s&&(s=20),c(this,void 0,void 0,(function(){var u,c,f,h,d,p,g,m,v,y,w,b;return l(this,(function(l){switch(l.label){case 0:return[4,tt([e,t,n,r])];case 1:for(u=l.sent(),c=u[0],f=u[1],h=u[2],d=u[3],p=[],g=function(e,t,n){for(var r=n.shape,i=r[0],o=r[1],a=r[2],s=new Qe(i*o*a,(function(e){return e.score})),u=0;u<i;++u)for(var c=0;c<o;++c)for(var l=0;l<a;++l){var f=n.get(u,c,l);f<e||et(l,f,u,c,1,n)&&s.enqueue({score:f,part:{heatmapY:u,heatmapX:c,id:l}})}return s}(a,0,c),m=s*s;p.length<o&&!g.empty();)v=g.dequeue(),y=rt(v.part,i,f),it(p,m,y,v.part.id)||(w=dt(v,c,f,i,h,d),b=pt(p,m,w),p.push({keypoints:w,score:b}));return[2,p]}}))}))}function mt(e,t,n){return(0,i.lub)((function(){var r=function(e,t){for(var n=[],r=0;r<h.length;r++){var o=vt(e.get(r,0).valueOf(),e.get(r,1).valueOf(),r,t),a=o.x,s=o.y;n.push(s),n.push(a)}return(0,i.odF)(n,[h.length,2])}(e,n);return(0,i.IHx)((0,i.pju)((0,i.dC7)(e.toTensor(),(0,i.iD$)(t,"int32")),"float32"),r)}))}function vt(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+h.length)}}function yt(e,t,n){return c(this,void 0,void 0,(function(){var r,o,a,s,u,c,f,d,p,g;return l(this,(function(l){switch(l.label){case 0:return r=0,o=function(e){var t=e.shape,n=t[0],r=t[1],o=t[2];return(0,i.lub)((function(){var t,a,s=(0,i.XLQ)(e,[n*r,o]),u=(0,i.NqF)(s,0),c=(0,i.dt4)((0,i.hiC)(u,(0,i.iD$)(r,"int32")),1),l=(0,i.dt4)((t=u,a=r,(0,i.lub)((function(){var e=(0,i.hiC)(t,(0,i.iD$)(a,"int32"));return(0,i.luU)(t,(0,i.dC7)(e,(0,i.iD$)(a,"int32")))}))),1);return(0,i.zoF)([c,l],1)}))}(e),[4,Promise.all([e.buffer(),t.buffer(),o.buffer()])];case 1:return a=l.sent(),s=a[0],u=a[1],c=a[2],[4,(f=mt(c,n,u)).buffer()];case 2:return d=l.sent(),p=Array.from(function(e,t){for(var n=t.shape[0],r=new Float32Array(n),i=0;i<n;i++){var o=t.get(i,0),a=t.get(i,1);r[i]=e.get(o,a,i)}return r}(s,c)),g=p.map((function(e,t){return r+=e,{y:d.get(t,0),x:d.get(t,1),score:e,name:h[t]}})),o.dispose(),f.dispose(),[2,{keypoints:g,score:r/g.length}]}}))}))}function wt(e,t){return(e-1)%t==0}var bt="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",xt="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/";function _t(e,t){return function(e,t){return(e-1)%t==0}(e,t)?e:Math.floor(e/t)*t+1}var kt=function(){function e(e,t){this.posenetModel=e;var n=this.posenetModel.inputs[0].shape;i.D5U.assert(-1===n[1]&&-1===n[2],(function(){return"Input shape ["+n[1]+", "+n[2]+"] must both be equal to or -1"}));var r,o,a=(r=t.inputResolution,o=t.outputStride,{height:_t(r.height,o),width:_t(r.width,o)});!function(e){i.D5U.assert(qe.indexOf(e)>=0,(function(){return"outputStride of "+e+" is invalid. It must be either 8 or 16."}))}(t.outputStride),function(e,t){i.D5U.assert(wt(e.height,t),(function(){return"height of "+e.height+" is invalid for output stride "+t+"."})),i.D5U.assert(wt(e.width,t),(function(){return"width of "+e.width+" is invalid for output stride "+t+"."}))}(a,t.outputStride),this.inputResolution=a,this.outputStride=t.outputStride,this.architecture=t.architecture}return e.prototype.estimatePoses=function(e,t){return void 0===t&&(t=Ye),c(this,void 0,void 0,(function(){var n,r,o,a,s,c,f,h,d,p,g,m,v,y,w;return l(this,(function(l){switch(l.label){case 0:return n=function(e){var t=e;if(null==t.maxPoses&&(t.maxPoses=1),t.maxPoses<=0)throw new Error("Invalid maxPoses "+t.maxPoses+". Should be > 0.");if(t.maxPoses>1){if((t=u(u({},$e),t)).scoreThreshold<0||t.scoreThreshold>1)throw new Error("Invalid scoreThreshold "+t.scoreThreshold+". Should be in range [0.0, 1.0]");if(t.nmsRadius<=0)throw new Error("Invalid nmsRadius "+t.nmsRadius+".")}return t}(t),null==e?[2,[]]:(this.maxPoses=n.maxPoses,r=U(e,{outputTensorSize:this.inputResolution,keepAspectRatio:!0,borderMode:"replicate"}),o=r.imageTensor,a=r.padding,s="ResNet50"===this.architecture?(0,i.IHx)(o,Je):N(o,[-1,1]),c=this.posenetModel.predict(s),"ResNet50"===this.architecture?(f=(0,i.L9e)(c[2],[0]),h=(0,i.L9e)(c[3],[0]),d=(0,i.L9e)(c[0],[0]),p=(0,i.L9e)(c[1],[0])):(f=(0,i.L9e)(c[0],[0]),h=(0,i.L9e)(c[1],[0]),d=(0,i.L9e)(c[2],[0]),p=(0,i.L9e)(c[3],[0])),g=(0,i.XD2)(h),1!==this.maxPoses?[3,2]:[4,yt(g,f,this.outputStride)]);case 1:return v=l.sent(),m=[v],[3,4];case 2:return[4,gt(g,f,d,p,this.outputStride,this.maxPoses,n.scoreThreshold,n.nmsRadius)];case 3:m=l.sent(),l.label=4;case 4:return y=A(e),w=function(e,t,n,r){var i=t.height,o=t.width,a=i/(n.height*(1-r.top-r.bottom)),s=o/(n.width*(1-r.left-r.right)),u=-r.top*n.height,c=-r.left*n.width;if(1===s&&1===a&&0===u&&0===c)return e;for(var l=0,f=e;l<f.length;l++)for(var h=0,d=f[l].keypoints;h<d.length;h++){var p=d[h];p.x=(p.x+c)*s,p.y=(p.y+u)*a}return e}(m,y,this.inputResolution,a),n.flipHorizontal&&(w=function(e,t){for(var n=0,r=e;n<r.length;n++)for(var i=0,o=r[n].keypoints;i<o.length;i++){var a=o[i];a.x=t.width-1-a.x}return e}(w,y)),o.dispose(),s.dispose(),(0,i.B90)(c),f.dispose(),h.dispose(),d.dispose(),p.dispose(),g.dispose(),[2,w]}}))}))},e.prototype.dispose=function(){this.posenetModel.dispose()},e.prototype.reset=function(){},e}();function St(e){return void 0===e&&(e=We),c(this,void 0,void 0,(function(){var t,n,r,i,a;return l(this,(function(s){switch(s.label){case 0:return"ResNet50"!==(t=function(e){var t=e||We;if(null==t.architecture&&(t.architecture="MobileNetV1"),He.indexOf(t.architecture)<0)throw new Error("Invalid architecture "+t.architecture+". Should be one of "+He);if(null==t.inputResolution&&(t.inputResolution={height:257,width:257}),null==t.outputStride&&(t.outputStride=16),Ge[t.architecture].indexOf(t.outputStride)<0)throw new Error("Invalid outputStride "+t.outputStride+". Should be one of "+Ge[t.architecture]+" for architecture "+t.architecture+".");if(null==t.multiplier&&(t.multiplier=1),Ke[t.architecture].indexOf(t.multiplier)<0)throw new Error("Invalid multiplier "+t.multiplier+". Should be one of "+Ke[t.architecture]+" for architecture "+t.architecture+".");if(null==t.quantBytes&&(t.quantBytes=4),Xe.indexOf(t.quantBytes)<0)throw new Error("Invalid quantBytes "+t.quantBytes+". Should be one of "+Xe+" for architecture "+t.architecture+".");if("MobileNetV1"===t.architecture&&32===t.outputStride&&1!==t.multiplier)throw new Error("When using an output stride of 32, you must select 1 as the multiplier.");return t}(e)).architecture?[3,2]:(u=t.outputStride,c=t.quantBytes,l="model-stride"+u+".json",n=4===c?xt+"float/"+l:xt+"quant"+c+"/"+l,[4,(0,o.YL)(t.modelUrl||n)]);case 1:return r=s.sent(),[2,new kt(r,t)];case 2:return i=function(e,t,n){var r={1:"100",.75:"075",.5:"050"},i="model-stride"+e+".json";return 4===n?bt+"float/"+r[t]+"/"+i:bt+"quant"+n+"/"+r[t]+"/"+i}(t.outputStride,t.multiplier,t.quantBytes),[4,(0,o.YL)(t.modelUrl||i)];case 3:return a=s.sent(),[2,new kt(a,t)]}var u,c,l}))}))}function Tt(e,t){return c(this,void 0,void 0,(function(){var n,r;return l(this,(function(i){switch(e){case Ee.PoseNet:return[2,St(t)];case Ee.BlazePose:if(r=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,Te(t)];if("mediapipe"===n.runtime)return[2,E(t)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r);case Ee.MoveNet:return[2,Ve(t)];default:throw new Error(e+" is not a supported model name.")}}))}))}},1221:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addImpl:()=>p,bincountImpl:()=>m,bincountReduceImpl:()=>v,castImpl:()=>l,ceilImpl:()=>x,concatImpl:()=>_,equalImpl:()=>k,expImpl:()=>S,expm1Impl:()=>T,floorImpl:()=>I,gatherNdImpl:()=>E,gatherV2Impl:()=>A,greaterEqualImpl:()=>R,greaterImpl:()=>M,lessEqualImpl:()=>P,lessImpl:()=>C,linSpaceImpl:()=>O,logImpl:()=>D,maxImpl:()=>F,maximumImpl:()=>L,minimumImpl:()=>j,multiplyImpl:()=>N,negImpl:()=>B,notEqualImpl:()=>z,prodImpl:()=>W,raggedGatherImpl:()=>G,raggedRangeImpl:()=>q,raggedTensorToTensorImpl:()=>J,rangeImpl:()=>Z,rsqrtImpl:()=>Q,scatterImpl:()=>ee,sigmoidImpl:()=>te,simpleAbsImpl:()=>o,sliceImpl:()=>ne,sparseFillEmptyRowsImpl:()=>re,sparseReshapeImpl:()=>ie,sparseSegmentReductionImpl:()=>oe,sqrtImpl:()=>ae,squaredDifferenceImpl:()=>se,stridedSliceImpl:()=>ue,stringNGramsImpl:()=>le,stringSplitImpl:()=>he,stringToHashBucketFastImpl:()=>de,subImpl:()=>pe,tileImpl:()=>me,topKImpl:()=>we,transposeImpl:()=>V,uniqueImpl:()=>be});var r=n(88478);function i(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&r.D5U.assert("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}function o(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function a(e){return(t,n,i,o,a)=>{const s=r.Wap.assertAndGetBroadcastShape(t,n),u=s.length,c=r.D5U.computeStrides(s),l=r.D5U.sizeFromShape(s),f=r.D5U.getTypedArrayFromDType(a,l),h=t.length,d=n.length,p=r.D5U.computeStrides(t),g=r.D5U.computeStrides(n),m=r.Wap.getBroadcastDims(t,s),v=r.Wap.getBroadcastDims(n,s);if(m.length+v.length===0)for(let t=0;t<f.length;++t)f[t]=e(i[t%i.length],o[t%o.length]);else for(let t=0;t<f.length;++t){const n=r.D5U.indexToLoc(t,u,c),a=n.slice(-h);m.forEach((e=>a[e]=0));const s=r.D5U.locToIndex(a,h,p),l=n.slice(-d);v.forEach((e=>l[e]=0));const y=r.D5U.locToIndex(l,d,g);f[t]=e(i[s],o[y])}return[f,s]}}function s(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",a)},s}function u(e,t,n="float32"){if("complex64"===n)return s({inputs:{real:u(e,t,"float32"),imag:u(e,t,"float32")},backend:e});const i=r.D5U.makeZerosTypedArray(r.D5U.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function c(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function l(e,t,n,i){if("int32"===i)return[t,"int32",Int32Array.from(e)];if("bool"===i){const i=r.D5U.toTypedArray([0],n),[o,s]=a(((e,t)=>e!==t?1:0))(t,[],e,i,"bool");return[s,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${i}`)}function f(e){const{inputs:t,backend:n,attrs:i}=e,{x:o}=t,{dtype:a}=i;if("complex64"===a){if("complex64"===o.dtype)return c({inputs:{x:o},backend:n});const e=u(n,o.shape,o.dtype),t=f({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=s({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}({inputs:{input:o},backend:n}),t=f({inputs:{x:e},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(e),t}if(!r.D5U.hasEncodingLoss(o.dtype,a)){const e=c({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:a}}const h=n.data.get(o.dataId).values,[d,p,g]=l(h,o.shape,o.dtype,a);return n.makeTensorInfo(d,p,g)}function h(e,t,n,o){return null==n?({inputs:n,backend:a})=>{const{a:s,b:u}=n,c=a;i([s,u],e);const l=c.data.get(s.dataId).values,f=c.data.get(u.dataId).values,h="string"===s.dtype?r.Wap.fromUint8ToStringArray(l):l,d="string"===s.dtype?r.Wap.fromUint8ToStringArray(f):f,p=o||s.dtype,[g,m]=t(s.shape,u.shape,h,d,p);return c.makeTensorInfo(m,p,g)}:({inputs:e,backend:r})=>{const{a:i,b:a}=e,u=r;if("complex64"===i.dtype||"complex64"===a.dtype){const e=f({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),t=u.data.get(e.dataId),r=t.complexTensorInfos.real,o=t.complexTensorInfos.imag,c=u.data.get(r.dataId).values,l=u.data.get(o.dataId).values,h=f({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),d=u.data.get(h.dataId),p=d.complexTensorInfos.real,g=d.complexTensorInfos.imag,m=u.data.get(p.dataId).values,v=u.data.get(g.dataId).values,[y,w,b]=n(i.shape,a.shape,c,l,m,v),x=u.makeTensorInfo(b,"float32",y),_=u.makeTensorInfo(b,"float32",w),k=s({inputs:{real:x,imag:_},backend:u});return u.disposeIntermediateTensorInfo(e),u.disposeIntermediateTensorInfo(h),u.disposeIntermediateTensorInfo(x),u.disposeIntermediateTensorInfo(_),k}{const e=u.data.get(i.dataId).values,n=u.data.get(a.dataId).values,r=o||i.dtype,[s,c]=t(i.shape,a.shape,e,n,r);return u.makeTensorInfo(c,r,s)}}}function d(e){return(t,n,i,o,a,s)=>{const u=r.Wap.assertAndGetBroadcastShape(t,n),c=r.D5U.sizeFromShape(u),l=u.length,f=r.D5U.computeStrides(u),h=r.D5U.getTypedArrayFromDType("float32",c),d=r.D5U.getTypedArrayFromDType("float32",c),p=r.Wap.getBroadcastDims(t,u),g=r.Wap.getBroadcastDims(n,u),m=r.Wap.mergeRealAndImagArrays(i,o),v=r.Wap.mergeRealAndImagArrays(a,s),y=t.length,w=r.D5U.computeStrides(t),b=n.length,x=r.D5U.computeStrides(n);if(p.length+g.length===0)for(let t=0;t<h.length;t++){const n=t%m.length,r=t%v.length,i=e(m[2*n],m[2*n+1],v[2*r],v[2*r+1]);h[t]=i.real,d[t]=i.imag}else for(let t=0;t<h.length;t++){const n=r.D5U.indexToLoc(t,l,f),i=n.slice(-y);p.forEach((e=>i[e]=0));const o=r.D5U.locToIndex(i,y,w),a=n.slice(-b);g.forEach((e=>a[e]=0));const s=r.D5U.locToIndex(a,b,x),u=e(m[2*o],m[2*o+1],v[2*s],v[2*s+1]);h[t]=u.real,d[t]=u.imag}return[h,d,u]}}r.SYM,r.Zz9,r.iJz,r.xJR,r.RFZ;const p=a(((e,t)=>e+t)),g=d(((e,t,n,r)=>({real:e+n,imag:t+r})));function m(e,t,n,i,o){const a=r.D5U.sizeFromShape(i),s=r.D5U.makeZerosTypedArray(o,n);for(let n=0;n<e.length;n++){const r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=o||(s[r]+=a>0?t[n]:1)}return s}function v(e,t,n,i=!1){const o=e.shape[0],a=e.shape[1],s=(0,r.f3b)([o,n],t.dtype);for(let r=0;r<o;r++)for(let o=0;o<a;o++){const a=e.get(r,o);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(i?s.set(1,r,a):t.size>0?s.set(s.get(r,a)+t.get(r,o),r,a):s.set(s.get(r,a)+1,r,a))}return s}function y(e){return(t,n,i)=>{const o=r.D5U.getTypedArrayFromDType(n,t.length);for(let n=0;n<t.length;++n)o[n]=e(t[n],i);return o}}function w(e,t,n){return({inputs:o,attrs:a,backend:s})=>{const{x:u}=o;if(i(u,e),"string"===u.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const c=s,l=c.data.get(u.dataId).values,f=r.D5U.sizeFromShape(u.shape),h=n||u.dtype,d=r.D5U.getArrayFromDType(h,f);for(let e=0;e<f;++e)d[e]=t(l[e],a);return c.makeTensorInfo(u.shape,h,d)}}function b(e,t,n){return({inputs:r,attrs:o,backend:a})=>{const{x:s}=r;if(i(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const u=a,c=u.data.get(s.dataId).values,l=n||s.dtype,f=t(c,l,o);return u.makeTensorInfo(s.shape,l,f)}}h(r.mm_,p,g),r.mm_;const x=y((e=>Math.ceil(e)));function _(e,t,n,i){const o=r.D5U.getArrayFromDType(n,r.D5U.sizeFromShape(t));if(i&&"string"!==n){let t=0;e.forEach((e=>{const n=r.D5U.sizeFromShape(e.shape);o.set(e.vals,t),t+=n}))}else{let i=0;e.forEach((e=>{const a="string"===n?r.Wap.fromUint8ToStringArray(e.vals):e.vals;let s=0;for(let n=0;n<e.shape[0];++n){const r=n*t[1]+i;for(let t=0;t<e.shape[1];++t)o[r+t]=a[s++]}i+=e.shape[1]}))}return o}b(r.gJX,x),r.gJX;const k=a(((e,t)=>e===t?1:0)),S=(h(r.hdR,k,null,"bool"),r.hdR,y((e=>Math.exp(e)))),T=(b(r.NEP,S,"float32"),r.NEP,y((e=>Math.expm1(e)))),I=(b(r.Y0y,T),r.Y0y,y((e=>Math.floor(e))));function E(e,t,n,i,o,a,s,u,c){const l=(0,r.f3b)([i,a],n);for(let n=0;n<i;n++){const r=[];let i=0;for(let t=0;t<o;t++){const a=e[n*o+t];i+=a*s[t],r.push(a)}if(i<0||i>=c/a)throw new Error(`Invalid indices: ${r} does not index into ${u}`);for(let e=0;e<a;e++)l.values[n*a+e]=t.get(...t.indexToLoc(i*a+e))}return l}function A(e,t,n){const i=(0,r.f3b)(n,e.dtype);for(let n=0;n<i.size;++n){const r=i.indexToLoc(n).slice(),o=r[0],a=r[2],s=t.locToIndex([o,a]);r[2]=t.values[s];const u=e.locToIndex(r);0<=u&&u<e.values.length&&(i.values[n]=e.values[u])}return i}b(r.OR,I),r.OR;const M=a(((e,t)=>e>t?1:0)),R=(h(r.iZT,M,null,"bool"),r.iZT,a(((e,t)=>e>=t?1:0))),C=(h(r.Acj,R,null,"bool"),r.Acj,a(((e,t)=>e<t?1:0))),P=(h(r.vtC,C,null,"bool"),r.vtC,a(((e,t)=>e<=t?1:0)));function O(e,t,n){const i=(t-e)/(n-1),o=r.D5U.makeZerosTypedArray(n,"float32");o[0]=e;for(let e=1;e<o.length;e++)o[e]=o[e-1]+i;return o}h(r.CAk,P,null,"bool"),r.CAk;const D=y((e=>Math.log(e)));function F(e,t,n,i){const o=r.D5U.getTypedArrayFromDType(i,r.D5U.sizeFromShape(n));for(let n=0;n<o.length;++n){const r=n*t;let i=e[r];for(let n=0;n<t;++n){const t=e[r+n];(Number.isNaN(t)||t>i)&&(i=t)}o[n]=i}return o}b(r.ZbH,D),r.ZbH;const L=a(((e,t)=>Math.max(e,t))),j=(h(r.BMI,L),r.BMI,a(((e,t)=>Math.min(e,t)))),N=(h(r.q8u,j),r.q8u,a(((e,t)=>e*t))),U=d(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})));function B(e,t,n){const i=r.D5U.createScalarValue(-1,n);return N([],t,i,e,n)}h(r.wYn,N,U),r.wYn,r.kuV;const z=a(((e,t)=>e!==t?1:0));function V(e,t,n,i,o){const a=t.length,s=r.D5U.sizeFromShape(t),u=r.D5U.computeStrides(t),c=r.D5U.computeStrides(o),l=r.D5U.getTypedArrayFromDType(n,r.D5U.sizeFromShape(o));for(let t=0;t<s;++t){const n=r.D5U.indexToLoc(t,a,u),o=new Array(n.length);for(let e=0;e<o.length;e++)o[e]=n[i[e]];l[r.D5U.locToIndex(o,a,c)]=e[t]}return l}function W(e,t,n,i){const[o,a]=r.Wap.computeOutAndReduceShapes(e,i),s=(0,r.x8V)(t,"int32"),u=r.D5U.makeZerosTypedArray(r.D5U.sizeFromShape(o),s),c=r.D5U.sizeFromShape(a);for(let e=0;e<u.length;++e){const t=e*c;let r=1;for(let e=0;e<c;++e)r*=n[t+e];u[e]=r}return{outVals:u,outShape:o,outDtype:s}}function H(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function G(e,t,n,i,o,a,s,u){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,i)=>{if(e<0||e>=n){const o=r.D5U.indexToLoc(i,t.length,r.D5U.computeStrides(t)).join(",");throw new Error(`indices[${o}] = ${e} is not in [0, ${n})`)}}))}(a,s,t[0][0]-1),0===i.length)throw new Error("params.rank must be nonzero");const c=i[0],{outSplits:l,valueSlices:f,numValues:h}=function(e,t,n,r){const i=[];let o=0;const a=t.length-1+n.length,s=new Array(a).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let u=1;for(let e=0;e<t.length-1;++e){u*=t[e];const n=t[e+1];for(let t=1;t<u+1;++t)s[e].push(t*n)}for(let r=0;r<e.length;++r){let a=e[r],u=e[r]+1;for(let e=0;e<n.length;++e){const r=n[e],i=e+t.length-1;if(i>=0){const e=s[i],t=e[e.length-1]-r[a];for(let e=a;e<u;++e)s[i].push(r[e+1]+t)}a=r[a],u=r[u]}u!==a&&(i.push([a,u]),o+=u-a)}return{outSplits:s,valueSlices:i,numValues:o}}(a,s,e,c),d=function(e){const t=[];for(let n=0;n<e.length;++n){const i=e[n].length,o=r.D5U.getArrayFromDType("int32",i);t.push(o),e[n].forEach(((e,t)=>o[t]=e))}return t}(l),p=function(e,t,n,i,o){const a=t.slice();a[0]=o;const s=r.D5U.getArrayFromDType(n,r.D5U.sizeFromShape(a)),u=e.length;return function(e,t,n,r,i,o){const a=H(t,2)[1],s=H(o,2)[1];let u=0;for(const t of n)for(let n=t[0];n<t[1];++n){for(let t=0;t<r;++t)i[u*s+t]=e[n*a+t];++u}}(e,t,i,0===u?0:u/t[0],s,a),[s,a]}(n,i,o,f,h);return[d,p[0],p[1]]}h(r.yQU,z,null,"bool"),r.yQU,r.G3Y,r.DlI;function q(e,t,n,i,o,a,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const u=0===t.length,c=0===o.length,l=0===s.length,f=[];u||f.push(t[0]),c||f.push(o[0]),l||f.push(s[0]);for(let e=1;e<f.length;++e)if(f[e]!==f[e-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===f.length?1:f[0],d=r.D5U.getArrayFromDType("int32",h+1);d[0]=0;for(let t=0;t<h;++t){const n=u?e[0]:e[t],r=c?i[0]:i[t],o=l?a[0]:a[t];if(0===o)throw new Error("Requires delta != 0");let s;if(o>0&&r<n||o<0&&r>n)s=0;else if(s=Math.ceil(Math.abs((r-n)/o)),s>2147483647)throw new Error("Requires ((limit - start) / delta) <= 2147483647");d[t+1]=d[t]+s}const p=d[h],g=r.D5U.getArrayFromDType(n,p);let m=0;for(let t=0;t<h;++t){const n=d[t+1]-d[t];let r=u?e[0]:e[t];const i=l?a[0]:a[t];for(let e=0;e<n;++e)g[m++]=r,r+=i}return[d,g]}var K=r.Wap.RowPartitionType;class X{constructor(e,t,n,i,o,a,s,u,c,l){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=i,this.valuesDType=o,this.defaultValue=a,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=r.Wap.getRowPartitionTypesHelper(l),this.raggedRank=r.Wap.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===K.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===K.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case K.VALUE_ROWIDS:return X.getMaxWidthValueRowID(t);case K.ROW_SPLITS:return X.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${K[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],i=0;for(let o=1;o<t;++o){const t=e[o];t!==r&&(r=t,i=Math.max(o-n,i),n=o)}return Math.max(t-n,i)}tensorShapeFromTensor(e,t,n=!0){if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return $(e,n)}calculateOutputSize(e){const t=this.valuesShape,n=this.defaultValueShape;r.Wap.validateDefaultValueShape(n,t);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=r.Wap.combineRaggedTensorToTensorShapes(this.raggedRank,i,t);o[0]<0&&(o[0]=e);for(let e=1;e<=this.raggedRank;++e)o[e]<0&&(o[e]=this.getMaxWidth(e));return o}calculateFirstParentOutputIndex(e,t,n){const i=Math.min(e,n),o=[];let a=0;for(let e=0;e<i;++e,a+=t)o.push(a);for(let t=i;t<e;++t)o.push(-1);return r.D5U.assert(o.length===e,(()=>"Final length of result must be equal to firstDimension.")),o}calculateOutputIndexRowSplit(e,t,n,r){const i=e.length,o=[];for(let a=0;a<i-1;++a){const i=e[a+1]-e[a];let s=Math.min(r,i),u=t[a];-1===u&&(s=0);for(let e=0;e<s;++e)o.push(u),u+=n;for(let e=0;e<i-s;++e)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,r){const i=e.length,o=[];if(0===i)return[];let a=0,s=e[0];if(s>=t.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let u=t[s];o.push(u);for(let c=1;c<i;++c){const i=e[c];if(i===s)u>=0&&(++a,a<r?u+=n:u=-1);else{if(a=0,s=i,i>=t.length)throw new Error(`Got nextValueRowId=${i} which is not less than ${t.length}`);u=t[i]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,r){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case K.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,t,n,r);case K.ROW_SPLITS:if(i.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(i,t,n,r);default:throw new Error(`Unsupported partition type: ${K[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case K.FIRST_DIM_SIZE:return e[0];case K.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case K.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${K[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let e=n.length-2;e>=0;--e)n[e]=n[e+1]*t[e+1];const i=$(t,!1),o=r.D5U.getArrayFromDType(this.valuesDType,r.D5U.sizeFromShape(i));if(n[0]*t[0]>0){let r=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e)r=this.calculateOutputIndex(e-1,r,n[e],t[e]);this.setOutput(this.raggedRank,r,o,i)}return[i,o]}setOutput(e,t,n,i){if(0===n.length)return;const o=this.values,a=n;let s=i.slice();s=s.slice(e+1);const u=r.D5U.sizeFromShape(s),c=t.length;let l=this.defaultValue;if(l.length!==u&&1!==l.length){const e=this.defaultValueShape;(0,r.lub)((()=>{const t=(0,r.XLQ)(l,e),n=(0,r.UFq)(t,s);l=n.dataSync()}))}let f=0,h=0,d=0;for(let e=0;e<=c;++e){let r=e<c?t[e]:-1;if(r!==d){if(h<d){const e=o.subarray(f*u);Y(a.subarray(h*u),e,(d-h)*u)}if(e>=c){const e=n.length;r=Math.floor(e/u)}if(r>d)if(1===this.defaultValue.length)a.subarray(d*u,r*u).fill(this.defaultValue[0]),d=r;else for(;r>d;)Y(a.slice(d*u),l,u),++d;r<0?(f=e+1,h=d):(f=e,h=d,d=h+1)}else++d}}}function Y(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function $(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function J(e,t,n,r,i,o,a,s,u,c){return new X(e,t,n,r,i,o,a,s,u,c).compute()}function Z(e,t,n,i){if(e===t||e<t&&n<0||t<e&&n>1)return r.D5U.makeZerosTypedArray(0,i);const o=Math.abs(Math.ceil((t-e)/n)),a=r.D5U.makeZerosTypedArray(o,i);t<e&&1===n&&(n=-1),a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+n;return a}const Q=y((e=>1/Math.sqrt(e)));function ee(e,t,n,i,o,a,s,u,c,l){const f=[i/o,o],h=e.values,d=t.values;if(0===i)return(0,r.f3b)(n,t.dtype);const p=(0,r.f3b)(f,t.dtype);"string"==typeof c||"number"==typeof c?p.values.fill(c):"boolean"==typeof c&&p.values.fill(+c);for(let e=0;e<a;e++){const r=[];let a=0;for(let t=0;t<s;t++){const n=h[e*s+t];r.push(n),a+=n*u[t]}if(a<0||a>=i/o)throw new Error(`Invalid indices: ${r} does not index into ${n}`);for(let n=0;n<o;n++)l?p.values[a*o+n]+=d[e*o+n]:p.values[a*o+n]=0===t.rank?d[0]:d[e*o+n]}return p}b(r.bV0,Q),r.bV0;const te=y((e=>1/(1+Math.exp(-e))));function ne(e,t,n,i,o){const a=r.kuN.isSliceContinous(i,t,n),s=r.D5U.sizeFromShape(n),u=r.D5U.computeStrides(i);if(a){const n=r.kuN.computeFlatOffset(t,u);return"string"===o?e.slice(n,n+s):e.subarray(n,n+s)}const c="string"===o?r.Wap.fromUint8ToStringArray(e):e,l=(0,r.f3b)(i,o,c),f=(0,r.f3b)(n,o);for(let e=0;e<f.size;++e){const n=f.indexToLoc(e),r=n.map(((e,n)=>e+t[n]));f.set(l.get(...r),...n)}return"string"===o?r.Wap.fromStringArrayToUint8(f.values):f.values}function re(e,t,n,i,o,a,s){const u=t[0],c=a[0],l=new Array(c),f=new Array(u),h=t[1];if(0===c){if(0!==u)throw new Error(r.Wap.getSparseFillEmptyRowsIndicesDenseShapeMismatch(u));return[r.D5U.getArrayFromDType(n,0),[0,h],r.D5U.getArrayFromDType(o,0),l,f]}let d=!0,p=0;const g=new Array(c).fill(0);for(let t=0;t<u;++t){const n=e[t*h];if(n<0)throw new Error(r.Wap.getSparseFillEmptyRowsNegativeIndexErrorMessage(t,n));if(n>=c)throw new Error(r.Wap.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(t,n,c));++g[n],d=d&&n>=p,p=n}let m=!0;for(let e=0;e<c;++e){const t=0===g[e];l[e]=t,m=m&&!t,g[e]=Math.max(g[e],1),e>0&&(g[e]+=g[e-1])}if(m&&d){const t=e,n=i;for(let e=0;e<u;++e)f[e]=e;return[t,[u,h],n,l,f]}{const t=g[c-1],a=r.D5U.getArrayFromDType(n,t*h),d=r.D5U.getArrayFromDType(o,t),p=new Array(c).fill(0);for(let t=0;t<u;++t){const n=e[t*h],r=p[n],o=(0===n?0:g[n-1])+r;p[n]++;for(let n=0;n<h;++n)a[o*h+n]=e[t*h+n];d[o]=i[t],f[t]=o}for(let e=0;e<c;++e)if(0===p[e]){const t=0===e?0:g[e-1];a[t*h+0]=e;for(let e=1;e<h;++e)a[t*h+e]=0;d[t]=s}return[a,[t,h],d,l,f]}}function ie(e,t,n,i,o){const a=r.D5U.sizeFromShape(i),s=t[0],u=o.length,c=[];let l=1,f=-1;for(let e=0;e<u;++e){const t=o[e];if(-1===t){if(-1!==f)throw new Error(r.Wap.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(f,e));f=e,c.push(1)}else{if(t<0)throw new Error(r.Wap.getSparseReshapeNegativeOutputDimErrorMessage(e,t));l*=t,c.push(t)}}if(-1!==f){if(l<=0)throw new Error(r.Wap.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const e=Math.trunc(a/l);if(l*e!==a)throw new Error(r.Wap.getSparseReshapeInputOutputMultipleErrorMessage(i,c));c[f]=e}if(r.D5U.sizeFromShape(c)!==a)throw new Error(r.Wap.getSparseReshapeInputOutputMismatchErrorMessage(i,c));const h=i.length,d=[];if(h>0){d[h-1]=1;for(let e=h-2;e>=0;--e)d[e]=d[e+1]*i[e+1]}const p=[];if(u>0){p[u-1]=1;for(let e=u-2;e>=0;--e)p[e]=p[e+1]*c[e+1]}const g=r.D5U.getArrayFromDType(n,s*u);for(let t=0;t<s;++t){let n=0;for(let r=0;r<h;++r)n+=e[t*h+r]*d[r];for(let e=0;e<u;++e)g[t*u+e]=Math.trunc(n/p[e]),n%=p[e]}return[g,[s,u],c]}function oe(e,t,n,i,o,a=!1,s=0){const u=i.length,c=[t[0],e.length/t[0]],l=c[1],f=u>0?o[u-1]+1:0;if(f<0)throw new Error(r.Wap.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const h=t.slice();h[0]=f;const d=h.reduce(((e,t)=>e*t),1),p=r.D5U.getArrayFromDType(n,d);if(0===u)return f>0&&p.fill(s),[p,h];if(f<=0)throw new Error(r.Wap.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,m=1,v=0,y=o[g];for(;;){let t=0;if(m<u){if(t=o[m],y===t){++m;continue}if(y>=t)throw new Error(r.Wap.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=f)throw new Error(r.Wap.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,f));y>v&&p.fill(s,v*l,y*l);for(let t=g;t<m;++t){const n=i[t];if(n<0||n>=c[0])throw new Error(r.Wap.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(t,i[t],c[0]));for(let t=0;t<l;t++)p[y*l+t]+=e[n*l+t]}if(a)for(let e=0;e<l;e++)p[y*l+e]/=m-g;if(g=m,++m,v=y+1,y=t,m>u)break}return v<f&&p.fill(s,v*l,f*l),[p,h]}w(r.a5O,(e=>1/(1+Math.exp(-e)))),r.a5O,r.p2w;const ae=y((e=>Math.sqrt(e))),se=(w(r.FKq,(e=>Math.sqrt(e))),r.FKq,a(((e,t)=>{const n=e-t;return n*n})));function ue(e,t,n,i){const o=(0,r.f3b)(e,t.dtype);for(let e=0;e<o.size;e++){const r=o.indexToLoc(e),a=new Array(r.length);for(let e=0;e<a.length;e++)a[e]=r[e]*n[e]+i[e];o.set(t.get(...a),...r)}return o}h(r._tC,se),r._tC;class ce{constructor(e,t,n,i,o,a){this.separator=r.D5U.encodeString(e),this.nGramWidths=t,this.leftPad=r.D5U.encodeString(n),this.rightPad=r.D5U.encodeString(i),this.padWidth=o,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,o){for(let a=0;a<i;++a){const s=this.getPadWidth(o),u=Math.max(0,s-a),c=Math.max(0,s-(i-(a+1))),l=o-(u+c),f=t+(u>0?0:a-s);let h=0;h+=u*this.leftPad.length;for(let t=0;t<l;++t)h+=e[f+t].length;h+=c*this.rightPad.length,h+=(u+c+l-1)*this.separator.length,n[r+a]=new Uint8Array(h);const d=n[r+a];let p=0;const g=e=>e.forEach((e=>d[p++]=e));for(let e=0;e<u;++e)g(this.leftPad),g(this.separator);for(let t=0;t<l-1;++t)g(e[f+t]),g(this.separator);if(l>0){g(e[f+l-1]);for(let e=0;e<c;++e)g(this.separator),g(this.rightPad)}else{for(let e=0;e<c-1;++e)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){const n=e.length,i=t.length;if(i>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let r=1;r<i;++r){let i=t[r]>=e;if(i=i&&t[r]<=n,!i)throw new Error(`Invalid split value ${t[r]}, must be in [${e}, ${n}]`);e=t[r]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const o=i-1,a=r.D5U.getArrayFromDType("int32",i);if(0===n||0===i){const e=new Array(n);for(let e=0;e<=o;++e)a[e]=0;return[e,a]}a[0]=0;for(let e=1;e<=o;++e){const n=t[e]-t[e-1];let r=0;this.nGramWidths.forEach((e=>{r+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===r&&(r=1),a[e]=a[e-1]+r}const s=new Array(a[o]);for(let n=0;n<o;++n){const r=t[n];let i=a[n];if(this.nGramWidths.forEach((o=>{const a=t[n+1]-t[n],u=this.getNumNGrams(a,o);this.createNGrams(e,r,s,i,u,o),i+=u})),this.preserveShort&&i===a[n]){const o=t[n+1]-t[n];if(0===o)continue;const a=o+2*this.padWidth,u=1;this.createNGrams(e,r,s,i,u,a)}}return[s,a]}}function le(e,t,n,r,i,o,a,s){return new ce(n,r,i,o,a,s).compute(e,t)}function fe(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const i=t[0];let o=e.indexOf(i);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||r.push(t),o=(e=e.subarray(o+1)).indexOf(i)}return void(n&&0===e.length||r.push(e))}let i=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(i,o);n&&0===t.length||r.push(t),i=o+1}}function he(e,t,n){const i=e.length,o=[];let a=0,s=0;const u=new Array(i);for(let r=0;r<i;++r){const i=o.length;fe(e[r],t,n,o);const c=o.length-i;u[r]=c,a+=c,s=Math.max(s,c)}const c=r.D5U.getArrayFromDType("int32",2*a),l=new Array(a),f=[i,s];let h=0;for(let e=0;e<i;++e)for(let t=0;t<u[e];++t)c[2*h]=e,c[2*h+1]=t,l[h]=o[h],++h;return[c,l,f]}function de(e,t){const n=r.D5U.getArrayFromDType("int32",e.length);for(let i=0;i<e.length;++i)n[i]=r.D5U.fingerPrint64(e[i]).modulo(t).getLowBitsUnsigned();return n}const pe=a(((e,t)=>e-t)),ge=d(((e,t,n,r)=>({real:e-n,imag:t-r})));function me(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const i=(0,r.f3b)(n,e.dtype);for(let t=0;t<i.values.length;++t){const n=i.indexToLoc(t),r=new Array(e.rank);for(let t=0;t<r.length;t++)r[t]=n[t]%e.shape[t];const o=e.locToIndex(r);i.values[t]=e.values[o]}return i}h(r.Tr8,pe,ge),r.Tr8;const ve=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function ye(e,t,n=0,i=e.length-1){for(;i>n;){if(i-n>600){const r=i-n+1,o=t-n+1,a=Math.log(r),s=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*s*(r-s)/r)*Math.sign(o-r/2);ye(e,t,Math.max(n,Math.floor(t-o*s/r+u)),Math.min(i,Math.floor(t+(r-o)*s/r+u)))}const o=e[t];let a=n,s=i;for(r.D5U.swap(e,n,t),ve(e[i],o)>0&&r.D5U.swap(e,n,i);a<s;){for(r.D5U.swap(e,a,s),a++,s--;ve(e[a],o)<0;)a+=1;for(;ve(e[s],o)>0;)s-=1}0===ve(e[n],o)?r.D5U.swap(e,n,s):(s+=1,r.D5U.swap(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}}function we(e,t,n,i,o){const a=t[t.length-1],[s,u]=[e.length/a,a],c=r.D5U.getTypedArrayFromDType(n,s*i),l=r.D5U.getTypedArrayFromDType("int32",s*i);for(let t=0;t<s;t++){const n=t*u,r=e.subarray(n,n+u);let a=new Array(r.length);r.forEach(((e,t)=>a[t]={value:e,index:t})),i<a.length&&(ye(a,i),a=a.slice(0,i)),o&&a.sort(ve);const s=t*i,f=c.subarray(s,s+i),h=l.subarray(s,s+i);for(let e=0;e<i;e++)f[e]=a[e].value,h[e]=a[e].index}const f=t.slice();return f[f.length-1]=i,[(0,r.f3b)(f,n,c),(0,r.f3b)(f,"int32",l)]}function be(e,t,n,i){const o=r.D5U.parseAxisParam(t,n)[0],a=[1,n[0],1];for(let e=0;e<o;e++)a[0]*=n[e];a[1]=n[o];for(let e=o+1;e<n.length;e++)a[2]*=n[e];const s={},u=new Int32Array(n[o]),c=new r.YDk(a,i,e),l=[],f=1===a[0]&&1===a[2];for(let t=0;t<n[o];t++){let n;if(f)n=e[t].toString();else{const e=[];for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)e.push(c.get(n,t,r));n=e.join(",")}if(void 0!==s[n])u[t]=s[n];else{const e=Object.keys(s).length;s[n]=e,u[t]=e,l.push(t)}}const h=a.slice();h[1]=Object.keys(s).length;const d=new r.YDk(h,i);l.forEach(((e,t)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)d.set(c.get(n,e,r),n,t,r)}));const p=n.slice();return p[o]=h[1],{outputValues:d.values,outputShape:p,indices:u}}},25965:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i}),i.sessions=new Map,i.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){let e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||i.extension.isInstalled()}return!0};var r={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){let t=window.setTimeout((function(){let t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){let e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){let n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){let e=new Error("NavigatorUserMediaError");e.name="You cancelled the request for permission, giving up...",n(e)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&window.clearTimeout(t.data.id)}))}};function i(e){if((e=e||{}).success="function"==typeof e.success?e.success:i.noop,e.error="function"==typeof e.error?e.error:i.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:i.noop,!i.initDone)return e.error("Library not initialized"),{};if(!i.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(i.log("Library initialized: "+i.initDone),!e.server)return e.error("Invalid server url"),{};let t=!1,n=null,r={},o=null,a=null,s=0,u=e.server;i.isArray(u)?(i.log("Multiple servers provided ("+u.length+"), will use the first that works"),u=null,a=e.server,i.debug(a)):0===u.indexOf("ws")?(t=!0,i.log("Using WebSockets to contact Janus: "+u)):(t=!1,i.log("Using REST API to contact Janus: "+u));let c=e.iceServers||[{urls:"stun:stun.l.google.com:19302"}],l=e.iceTransportPolicy,f=e.bundlePolicy,h=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(h=!0===e.withCredentials);let d=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(d=e.max_poll_events),d<1&&(d=1);let p=null;void 0!==e.token&&null!==e.token&&(p=e.token);let g=null;void 0!==e.apisecret&&null!==e.apisecret&&(g=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);let m=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(m=e.keepAlivePeriod),isNaN(m)&&(m=25e3);let v=6e4;function y(e){let t={high:9e5,medium:3e5,low:1e5};return null!=e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(v=e.longPollTimeout),isNaN(v)&&(v=6e4);let w=!1,b=null,x=new Map,_=this,k=0,S=new Map;function T(){if(null==b)return;if(i.debug("Long poll..."),!w)return void i.warn("Is the server down? (connected=false)");let t=u+"/"+b+"?rid="+(new Date).getTime();d&&(t=t+"&maxev="+d),p&&(t=t+"&token="+encodeURIComponent(p)),g&&(t=t+"&apisecret="+encodeURIComponent(g)),i.httpAPICall(t,{verb:"GET",withCredentials:h,success:I,timeout:v,error:function(t,n){if(i.error(t+":",n),k++,k>3)return w=!1,void e.error("Lost connection to the server (is it down?)");T()}})}function I(e,r){if(k=0,t||null==b||!0===r||T(),t||!i.isArray(e))if("keepalive"!==e.janus)if("server_info"!==e.janus)if("ack"!==e.janus)if("success"!==e.janus)if("trickle"===e.janus){const t=e.sender;if(!t)return void i.warn("Missing sender...");const n=x.get(t);if(!n)return void i.debug("This handle is not attached to this session");let r=e.candidate;i.debug("Got a trickled candidate on session "+b),i.debug(r);let o=n.webrtcStuff;o.pc&&o.remoteSdp?(i.debug("Adding remote candidate:",r),r&&!0!==r.completed?o.pc.addIceCandidate(r):o.pc.addIceCandidate(i.endOfCandidates)):(i.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),o.candidates||(o.candidates=[]),o.candidates.push(r),i.debug(o.candidates))}else{if("webrtcup"===e.janus){i.debug("Got a webrtcup event on session "+b),i.debug(e);const t=e.sender;if(!t)return void i.warn("Missing sender...");const n=x.get(t);return n?void n.webrtcState(!0):void i.debug("This handle is not attached to this session")}if("hangup"===e.janus){i.debug("Got a hangup event on session "+b),i.debug(e);const t=e.sender;if(!t)return void i.warn("Missing sender...");const n=x.get(t);if(!n)return void i.debug("This handle is not attached to this session");n.webrtcState(!1,e.reason),n.hangup()}else if("detached"===e.janus){i.debug("Got a detached event on session "+b),i.debug(e);const t=e.sender;if(!t)return void i.warn("Missing sender...");const n=x.get(t);if(!n)return;n.ondetached(),n.detach()}else if("media"===e.janus){i.debug("Got a media event on session "+b),i.debug(e);const t=e.sender;if(!t)return void i.warn("Missing sender...");const n=x.get(t);if(!n)return void i.debug("This handle is not attached to this session");n.mediaState(e.type,e.receiving,e.mid)}else if("slowlink"===e.janus){i.debug("Got a slowlink event on session "+b),i.debug(e);const t=e.sender;if(!t)return void i.warn("Missing sender...");const n=x.get(t);if(!n)return void i.debug("This handle is not attached to this session");n.slowLink(e.uplink,e.lost,e.mid)}else{if("error"===e.janus){i.error("Ooops: "+e.error.code+" "+e.error.reason),i.debug(e);let t=e.transaction;if(t){let n=S.get(t);n&&n(e),S.delete(t)}return}if("event"===e.janus){i.debug("Got a plugin event on session "+b),i.debug(e);const t=e.sender;if(!t)return void i.warn("Missing sender...");let n=e.plugindata;if(!n)return void i.warn("Missing plugindata...");i.debug("  -- Event is coming from "+t+" ("+n.plugin+")");let r=n.data;i.debug(r);const o=x.get(t);if(!o)return void i.warn("This handle is not attached to this session");let a=e.jsep;a&&(i.debug("Handling SDP as well..."),i.debug(a));let s=o.onmessage;s?(i.debug("Notifying application..."),s(r,a)):i.debug("No provided notification callback")}else{if("timeout"===e.janus)return i.error("Timeout on session "+b),i.debug(e),void(t&&n.close(3504,"Gateway timeout"));i.warn("Unknown message/event  '"+e.janus+"' on session "+b),i.debug(e)}}}else{i.debug("Got a success on session "+b),i.debug(e);const t=e.transaction;if(t){const n=S.get(t);n&&n(e),S.delete(t)}}else{i.debug("Got an ack on session "+b),i.debug(e);const t=e.transaction;if(t){const n=S.get(t);n&&n(e),S.delete(t)}}else{i.debug("Got info on the Janus instance"),i.debug(e);const t=e.transaction;if(t){const n=S.get(t);n&&n(e),S.delete(t)}}else i.vdebug("Got a keepalive on session "+b);else for(let t=0;t<e.length;t++)I(e[t],!0)}function E(){if(!u||!t||!w)return;o=setTimeout(E,m);let e={janus:"keepalive",session_id:b,transaction:i.randomString(12)};p&&(e.token=p),g&&(e.apisecret=g),n.send(JSON.stringify(e))}function A(c){let l=i.randomString(12),f={janus:"create",transaction:l};if(c.reconnect&&(w=!1,f.janus="claim",f.session_id=b,n&&(n.onopen=null,n.onerror=null,n.onclose=null,o&&(clearTimeout(o),o=null))),p&&(f.token=p),g&&(f.apisecret=g),!u&&i.isArray(a)&&(u=a[s],0===u.indexOf("ws")?(t=!0,i.log("Server #"+(s+1)+": trying WebSockets to contact Janus ("+u+")")):(t=!1,i.log("Server #"+(s+1)+": trying REST API to contact Janus ("+u+")"))),t){n=i.newWebSocket(u,"janus-protocol"),r={error:function(){if(i.error("Error connecting to the Janus WebSockets server... "+u),i.isArray(a)&&!c.reconnect)return s++,s===a.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(u=null,void setTimeout((function(){A(c)}),200));c.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){S.set(l,(function(e){if(i.debug(e),"success"!==e.janus)return i.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);o=setTimeout(E,m),w=!0,b=e.session_id?e.session_id:e.data.id,c.reconnect?i.log("Claimed session: "+b):i.log("Created session: "+b),i.sessions.set(b,_),c.success()})),n.send(JSON.stringify(f))},message:function(e){I(JSON.parse(e.data))},close:function(){u&&w&&(w=!1,e.error("Lost connection to the server (is it down?)"))}};for(let e in r)n.addEventListener(e,r[e])}else i.httpAPICall(u,{verb:"POST",withCredentials:h,body:f,success:function(e){if(i.debug(e),"success"!==e.janus)return i.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);w=!0,b=e.session_id?e.session_id:e.data.id,c.reconnect?i.log("Claimed session: "+b):i.log("Created session: "+b),i.sessions.set(b,_),T(),c.success()},error:function(e,t){if(i.error(e+":",t),i.isArray(a)&&!c.reconnect)return s++,s===a.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(u=null,void setTimeout((function(){A(c)}),200));""===t?c.error(e+": Is the server down?"):t&&t.error?c.error(e+": "+t.error.message):c.error(e+": "+t)}})}function M(e,r){if((r=r||{}).success="function"==typeof r.success?r.success:i.noop,r.error="function"==typeof r.error?r.error:i.noop,!w)return i.warn("Is the server down? (connected=false)"),void r.error("Is the server down? (connected=false)");let o=x.get(e);if(!o||!o.webrtcStuff)return i.warn("Invalid handle"),void r.error("Invalid handle");let a=r.message,s=r.jsep,c=i.randomString(12),l={janus:"message",body:a,transaction:c};if(o.token&&(l.token=o.token),g&&(l.apisecret=g),s){l.jsep={type:s.type,sdp:s.sdp},s.e2ee&&(l.jsep.e2ee=!0),"hml"!==s.rid_order&&"lmh"!==s.rid_order||(l.jsep.rid_order=s.rid_order),s.force_relay&&(l.jsep.force_relay=!0);let e=null,t=o.webrtcStuff;if(t.pc){let n=t.pc.getTransceivers();if(n&&n.length>0)for(let t in n){let r=n[t];if(r&&r.sender&&r.sender.track&&"video"===r.sender.track.kind){let n=r.sender.getParameters();n&&n.encodings&&n.encodings[0]&&n.encodings[0].scalabilityMode&&(e||(e=[]),e.push({mindex:parseInt(t),mid:r.mid,svc:n.encodings[0].scalabilityMode}))}}}e&&(l.jsep.svc=e)}if(i.debug("Sending message to plugin (handle="+e+"):"),i.debug(l),t)return l.session_id=b,l.handle_id=e,S.set(c,(function(e){if(i.debug("Message sent!"),i.debug(e),"success"===e.janus){let t=e.plugindata;if(!t)return i.warn("Request succeeded, but missing plugindata..."),void r.success();i.log("Synchronous transaction successful ("+t.plugin+")");let n=t.data;return i.debug(n),void r.success(n)}"ack"===e.janus?r.success():e.error?(i.error("Ooops: "+e.error.code+" "+e.error.reason),r.error(e.error.code+" "+e.error.reason)):(i.error("Unknown error"),r.error("Unknown error"))})),void n.send(JSON.stringify(l));i.httpAPICall(u+"/"+b+"/"+e,{verb:"POST",withCredentials:h,body:l,success:function(e){if(i.debug("Message sent!"),i.debug(e),"success"===e.janus){let t=e.plugindata;if(!t)return i.warn("Request succeeded, but missing plugindata..."),void r.success();i.log("Synchronous transaction successful ("+t.plugin+")");let n=t.data;return i.debug(n),void r.success(n)}"ack"===e.janus?r.success():e.error?(i.error("Ooops: "+e.error.code+" "+e.error.reason),r.error(e.error.code+" "+e.error.reason)):(i.error("Unknown error"),r.error("Unknown error"))},error:function(e,t){i.error(e+":",t),r.error(e+": "+t)}})}function R(e,r){if(!w)return void i.warn("Is the server down? (connected=false)");let o=x.get(e);if(!o||!o.webrtcStuff)return void i.warn("Invalid handle");let a={janus:"trickle",candidate:r,transaction:i.randomString(12)};if(o.token&&(a.token=o.token),g&&(a.apisecret=g),i.vdebug("Sending trickle candidate (handle="+e+"):"),i.vdebug(a),t)return a.session_id=b,a.handle_id=e,void n.send(JSON.stringify(a));i.httpAPICall(u+"/"+b+"/"+e,{verb:"POST",withCredentials:h,body:a,success:function(e){i.vdebug("Candidate sent!"),i.vdebug(e),"ack"===e.janus||i.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,t){i.error(e+":",t)}})}function C(e,t,n,r,o){let a=x.get(e);if(!a||!a.webrtcStuff)return void i.warn("Invalid handle");let s=a.webrtcStuff;if(!s.pc)return void i.warn("Invalid PeerConnection");let u=function(e){i.log("Received state change on data channel:",e);let t=e.target.label,n=e.target.protocol,r=s.dataChannel[t]?s.dataChannel[t].readyState:"null";if(i.log("State change on <"+t+"> data channel: "+r),"open"===r){if(s.dataChannel[t].pending&&s.dataChannel[t].pending.length>0){i.log("Sending pending messages on <"+t+">:",s.dataChannel[t].pending.length);for(let e of s.dataChannel[t].pending)i.log("Sending data on data channel <"+t+">"),i.debug(e),s.dataChannel[t].send(e);s.dataChannel[t].pending=[]}a.ondataopen(t,n)}};if(r)s.dataChannel[t]=r;else{let e=s.dataChannelOptions;n&&(e.protocol=n),s.dataChannel[t]=s.pc.createDataChannel(t,e)}s.dataChannel[t].onmessage=function(e){i.log("Received message on data channel:",e);let t=e.target.label;a.ondata(e.data,t)},s.dataChannel[t].onopen=u,s.dataChannel[t].onclose=u,s.dataChannel[t].onerror=function(e){i.error("Got error on data channel:",e)},s.dataChannel[t].pending=[],o&&s.dataChannel[t].pending.push(o)}function P(e,t){(t=t||{}).success="function"==typeof t.success?t.success:i.noop,t.error="function"==typeof t.error?t.error:i.noop;let n=x.get(e);if(!n||!n.webrtcStuff)return i.warn("Invalid handle"),void t.error("Invalid handle");let r=n.webrtcStuff,o=t.text||t.data;if(!o)return i.warn("Invalid data"),void t.error("Invalid data");let a=t.label?t.label:i.dataChanDefaultLabel;return r.dataChannel[a]?"open"!==r.dataChannel[a].readyState?(r.dataChannel[a].pending.push(o),void t.success()):(i.log("Sending data on data channel <"+a+">"),i.debug(o),r.dataChannel[a].send(o),void t.success()):(C(e,a,t.protocol,!1,o,t.protocol),void t.success())}function O(e,t){(t=t||{}).success="function"==typeof t.success?t.success:i.noop,t.error="function"==typeof t.error?t.error:i.noop;let n=x.get(e);if(!n||!n.webrtcStuff)return i.warn("Invalid handle"),void t.error("Invalid handle");let r=n.webrtcStuff;if(!r.dtmfSender){if(r.pc){let e=r.pc.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(!e)return i.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");r.dtmfSender=e.dtmf,r.dtmfSender&&(i.log("Created DTMF Sender"),r.dtmfSender.ontonechange=function(e){i.debug("Sent DTMF tone: "+e.tone)})}if(!r.dtmfSender)return i.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}let o=t.dtmf;if(!o)return i.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");let a=o.tones;if(!a)return i.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");let s="number"==typeof o.duration?o.duration:500,u="number"==typeof o.gap?o.gap:50;i.debug("Sending DTMF string "+a+" (duration "+s+"ms, gap "+u+"ms)"),r.dtmfSender.insertDTMF(a,s,u),t.success()}function D(e,r){(r=r||{}).success="function"==typeof r.success?r.success:i.noop,r.error="function"==typeof r.error?r.error:i.noop;let o=!0===r.noRequest;i.log("Destroying handle "+e+" (only-locally="+o+")"),K(e);let a=x.get(e);if(!a||a.detached)return x.delete(e),void r.success();if(a.detached=!0,o)return x.delete(e),void r.success();if(!w)return i.warn("Is the server down? (connected=false)"),void r.error("Is the server down? (connected=false)");let s={janus:"detach",transaction:i.randomString(12)};if(a.token&&(s.token=a.token),g&&(s.apisecret=g),t)return s.session_id=b,s.handle_id=e,n.send(JSON.stringify(s)),x.delete(e),void r.success();i.httpAPICall(u+"/"+b+"/"+e,{verb:"POST",withCredentials:h,body:s,success:function(t){i.log("Destroyed handle:"),i.debug(t),"success"!==t.janus&&i.error("Ooops: "+t.error.code+" "+t.error.reason),x.delete(e),r.success()},error:function(t,n){i.error(t+":",n),x.delete(e),r.success()}})}async function F(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:i.noop,n.error="function"==typeof n.error?n.error:q;let r=n.jsep;if(t&&r)return i.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!(t||r&&r.type&&r.sdp))return i.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");if(n.media&&!n.tracks){if(n.tracks=i.mediaToTracks(n.media),!0===n.simulcast||!0===n.simulcast2||n.svc)for(let e of n.tracks)if("video"===e.type){!0===n.simulcast||!0===n.simulcast2?e.simulcast=!0:n.svc&&(e.svc=n.svc);break}i.warn("Deprecated media object passed, use tracks instead. Automatically translated to:",n.tracks)}if(n.tracks&&!Array.isArray(n.tracks))return i.error("Tracks must be an array"),void n.error("Tracks must be an array");let o=x.get(e);if(!o||!o.webrtcStuff)return i.warn("Invalid handle"),void n.error("Invalid handle");let a=o.webrtcStuff;var s;a.trickle=(s=n.trickle,i.debug("isTrickleEnabled:",s),!1!==s);try{if(function(e,t){let n=x.get(e);if(!n||!n.webrtcStuff)throw i.warn("Invalid handle"),"Invalid handle";let r=n.webrtcStuff;if(r.pc)return;let o={iceServers:c,iceTransportPolicy:l,bundlePolicy:f,sdpSemantics:"unified-plan"},a=!1;if(t.tracks)for(let e of t.tracks)if(e.transforms&&(e.transforms.sender||e.transforms.receiver)){a=!0;break}RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&a&&(r.insertableStreams=!0,o.forceEncodedAudioInsertableStreams=!0,o.forceEncodedVideoInsertableStreams=!0,o.encodedInsertableStreams=!0),i.log("Creating PeerConnection"),r.pc=new RTCPeerConnection(o),i.debug(r.pc),r.pc.getStats&&(r.volume={},r.bitrate.value="0 kbits/sec"),i.log("Preparing local SDP and gathering candidates (trickle="+r.trickle+")"),r.pc.oniceconnectionstatechange=function(){r.pc&&n.iceState(r.pc.iceConnectionState)},r.pc.onicecandidate=function(n){if(!n.candidate||n.candidate.candidate&&n.candidate.candidate.indexOf("endOfCandidates")>0)i.log("End of candidates."),r.iceDone=!0,!0===r.trickle?R(e,{completed:!0}):function(e,t){(t=t||{}).success="function"==typeof t.success?t.success:i.noop,t.error="function"==typeof t.error?t.error:i.noop;let n=x.get(e);if(!n||!n.webrtcStuff)return void i.warn("Invalid handle, not sending anything");let r=n.webrtcStuff;i.log("Sending offer/answer SDP..."),r.mySdp?(r.mySdp={type:r.pc.localDescription.type,sdp:r.pc.localDescription.sdp},!1===r.trickle&&(r.mySdp.trickle=!1),i.debug(t),r.sdpSent=!0,t.success(r.mySdp)):i.warn("Local SDP instance is invalid, not sending anything...")}(e,t);else{let t={candidate:n.candidate.candidate,sdpMid:n.candidate.sdpMid,sdpMLineIndex:n.candidate.sdpMLineIndex};!0===r.trickle&&R(e,t)}},r.pc.ontrack=function(e){if(i.log("Handling Remote Track",e),!e.streams)return;if(!e.track)return;let t=e.transceiver?e.transceiver.mid:e.track.id;try{n.onremotetrack(e.track,t,!0,{reason:"created"})}catch(e){i.error("Error calling onremotetrack",e)}if(e.track.onended)return;let o=null;i.log("Adding onended callback to track:",e.track),e.track.onended=function(e){i.log("Remote track removed:",e),clearTimeout(o);let t=r.pc?r.pc.getTransceivers():null,a=t?t.find((t=>t.receiver.track===e.target)):null,s=a?a.mid:e.target.id;try{n.onremotetrack(e.target,s,!1,{reason:"ended"})}catch(e){i.error("Error calling onremotetrack on removal",e)}},e.track.onmute=function(e){i.log("Remote track muted:",e),o||(o=setTimeout((function(){i.log("Removing remote track");let t=r.pc?r.pc.getTransceivers():null,a=t?t.find((t=>t.receiver.track===e.target)):null,s=a?a.mid:e.target.id;try{n.onremotetrack(e.target,s,!1,{reason:"mute"})}catch(e){i.error("Error calling onremotetrack on mute",e)}o=null}),2520))},e.track.onunmute=function(e){if(i.log("Remote track flowing again:",e),null!=o)clearTimeout(o),o=null;else try{let t=r.pc?r.pc.getTransceivers():null,i=t?t.find((t=>t.receiver.track===e.target)):null,o=i?i.mid:e.target.id;n.onremotetrack(e.target,o,!0,{reason:"unmute"})}catch(e){i.error("Error calling onremotetrack on unmute",e)}}}}(e,n),t&&await N(e,n),r){if(await a.pc.setRemoteDescription(r),i.log("Remote description accepted!"),a.remoteSdp=r.sdp,a.candidates&&a.candidates.length>0){for(let e=0;e<a.candidates.length;e++){let t=a.candidates[e];i.debug("Adding remote candidate:",t),t&&!0!==t.completed?a.pc.addIceCandidate(t):a.pc.addIceCandidate(i.endOfCandidates)}a.candidates=[]}await N(e,n);let t=await async function(e,t){(t=t||{}).customizeSdp="function"==typeof t.customizeSdp?t.customizeSdp:i.noop;let n=x.get(e);if(!n||!n.webrtcStuff)throw i.warn("Invalid handle"),"Invalid handle";let r=n.webrtcStuff;i.log("Creating answer (iceDone="+r.iceDone+")");let o=await r.pc.createAnswer();i.debug(o);let a={type:"answer",sdp:o.sdp};return t.customizeSdp(a),o.sdp=a.sdp,i.log("Setting local description"),r.mySdp={type:"answer",sdp:o.sdp},await r.pc.setLocalDescription(o),r.iceDone||r.trickle?(r.insertableStreams&&(o.e2ee=!0),o):(i.log("Waiting for all candidates..."),null)}(e,n);n.success(t)}else{let t=await async function(e,t){(t=t||{}).customizeSdp="function"==typeof t.customizeSdp?t.customizeSdp:i.noop;let n=x.get(e);if(!n||!n.webrtcStuff)throw i.warn("Invalid handle"),"Invalid handle";let r=n.webrtcStuff;i.log("Creating offer (iceDone="+r.iceDone+")");let o={};!0===t.iceRestart&&(o.iceRestart=!0),i.debug(o);let a=await r.pc.createOffer(o);i.debug(a);let s={type:"offer",sdp:a.sdp};return t.customizeSdp(s),a.sdp=s.sdp,i.log("Setting local description"),r.mySdp={type:"offer",sdp:a.sdp},await r.pc.setLocalDescription(a),r.mediaConstraints=o,r.iceDone||r.trickle?(r.insertableStreams&&(a.e2ee=!0),a):(i.log("Waiting for all candidates..."),null)}(e,n);n.success(t)}}catch(e){i.error(e),n.error(e)}}function L(e,t){(t=t||{}).success="function"==typeof t.success?t.success:i.noop,t.error="function"==typeof t.error?t.error:q,t.customizeSdp="function"==typeof t.customizeSdp?t.customizeSdp:i.noop;let n=t.jsep,r=x.get(e);if(!r||!r.webrtcStuff)return i.warn("Invalid handle"),void t.error("Invalid handle");let o=r.webrtcStuff;if(n){if(!o.pc)return i.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");t.customizeSdp(n),o.pc.setRemoteDescription(n).then((function(){if(i.log("Remote description accepted!"),o.remoteSdp=n.sdp,o.candidates&&o.candidates.length>0){for(let e=0;e<o.candidates.length;e++){let t=o.candidates[e];i.debug("Adding remote candidate:",t),t&&!0!==t.completed?o.pc.addIceCandidate(t):o.pc.addIceCandidate(i.endOfCandidates)}o.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}async function j(e,t){if((t=t||{}).success="function"==typeof t.success?t.success:i.noop,t.error="function"==typeof t.error?t.error:i.noop,t.tracks&&!Array.isArray(t.tracks))return i.error("Tracks must be an array"),void t.error("Tracks must be an array");for(let e of t.tracks)(e.add||!e.replace&&!e.remove)&&(e.replace=!0);try{await N(e,t),t.success()}catch(e){i.error(e),t.error(e)}}async function N(e,t){let n=x.get(e);if(!n||!n.webrtcStuff)throw i.warn("Invalid handle, not sending anything"),"Invalid handle";let r=n.webrtcStuff;if(!r.pc)throw i.warn("Invalid PeerConnection"),"Invalid PeerConnection";let o=t.tracks;if(!o||!Array.isArray(o)||0===o.length)return;let a=!1,s={};for(let e of o){if(delete e.gumGroup,!e.type||!["audio","video"].includes(e.type))continue;if(!e.capture||e.capture instanceof MediaStreamTrack)continue;let t=e.group?e.group:"default";s[t]||(s[t]={}),s[t][e.type]||(e.gumGroup=t,s[t][e.type]=e)}let u=Object.keys(s);for(let e of u){let t=s[e];t.audio&&t.video||(t.audio&&delete t.audio.gumGroup,t.video&&delete t.video.gumGroup,delete s[e])}let c=!!t.jsep;for(let t of o){if(!t.type){i.warn("Missing track type:",t);continue}if("data"===t.type){if(r.pc.ondatachannel){i.warn("Data channel exists already, not creating another one");continue}i.log("Creating default data channel"),C(e,i.dataChanDefaultLabel,null,!1),r.pc.ondatachannel=function(t){i.log("Data channel created by Janus:",t),C(e,t.channel.label,t.channel.protocol,t.channel)};continue}if(void 0!==t.add&&null!==t.add||void 0!==t.remove&&null!==t.remove||void 0!==t.replace&&null!==t.replace||(t.add=!0),t.add&&t.remove||t.add&&t.remove&&t.replace){i.warn("Conflicting actions for track, ignoring:",t);continue}t.add&&t.replace?(i.warn("Both add and replace provided, falling back to replace:",t),delete t.add):t.remove&&t.replace&&(i.warn("Both remove and replace provided, falling back to remove:",t),delete t.replace);let o=t.type;"screen"===t.type&&(o="video");let u=null,l=null;if(u=t.mid?r.pc.getTransceivers().find((e=>e.mid===t.mid&&e.receiver.track.kind===o)):r.pc.getTransceivers().find((e=>e.receiver.track.kind===o)),t.replace||t.remove){if(!u){i.warn("Couldn't find a transceiver for track:",t);continue}if(!u.sender){i.warn("No sender in the transceiver for track:",t);continue}l=u.sender}if(c&&!u&&(u=r.pc.getTransceivers().find((e=>e.receiver.track.kind===o)),!u)){i.warn("Couldn't find a transceiver for track:",t);continue}let f=null,h=null;if((t.remove||t.replace)&&(i.log("Removing track from PeerConnection",t),h=l.track?l.track.id:null,await l.replaceTrack(null),h&&r.myStream)){let e=null;if("audio"===o&&r.myStream.getAudioTracks()&&r.myStream.getAudioTracks().length)for(let t of r.myStream.getAudioTracks())t.id===h&&(e=t,i.log("Removing audio track:",e));else if("video"===o&&r.myStream.getVideoTracks()&&r.myStream.getVideoTracks().length)for(let t of r.myStream.getVideoTracks())t.id===h&&(e=t,i.log("Removing video track:",e));if(e){try{r.myStream.removeTrack(e),n.onlocaltrack(e,!1)}catch(e){i.error("Error calling onlocaltrack on removal for renegotiation",e)}if(!0!==e.dontStop)try{e.stop()}catch(e){}}}if(t.capture){if(t.gumGroup&&s[t.gumGroup]&&s[t.gumGroup].stream){let e=s[t.gumGroup].stream;f="audio"===t.type?e.getAudioTracks()[0]:e.getVideoTracks()[0],delete s[t.gumGroup].stream,delete s[t.gumGroup],delete t.gumGroup}else if(t.capture instanceof MediaStreamTrack)f=t.capture;else{a||(a=!0,n.consentDialog(!0));let e=i.trackConstraints(t),r=null;if("audio"===t.type||"video"===t.type){if(t.gumGroup){let n="audio"===t.type?"video":"audio";if(s[t.gumGroup]&&s[t.gumGroup][n]){let r=s[t.gumGroup][n],o=i.trackConstraints(r);e[n]=o[n]}}r=await navigator.mediaDevices.getUserMedia(e),t.gumGroup&&e.audio&&e.video&&(s[t.gumGroup].stream=r,delete t.gumGroup)}else r=await navigator.mediaDevices.getDisplayMedia(e);f="audio"===t.type?r.getAudioTracks()[0]:r.getVideoTracks()[0]}if(t.replace){await l.replaceTrack(f);let e="sendrecv";!1!==t.recv&&"inactive"!==u.direction&&"sendonly"!==u.direction||(e="sendonly"),u.setDirection?u.setDirection(e):u.direction=e}else{if(r.myStream||(r.myStream=new MediaStream),"audio"===o||!t.simulcast&&!t.svc)l=r.pc.addTrack(f,r.myStream),u=r.pc.getTransceivers().find((e=>e.sender===l));else if(t.simulcast){if("firefox"!==i.webRTCAdapter.browserDetails.browser){i.log("Enabling rid-based simulcasting:",f);let e=y(t.simulcastMaxBitrates);u=r.pc.addTransceiver(f,{direction:"sendrecv",streams:[r.myStream],sendEncodings:t.sendEncodings||[{rid:"h",active:!0,scalabilityMode:"L1T2",maxBitrate:e.high},{rid:"m",active:!0,scalabilityMode:"L1T2",maxBitrate:e.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,scalabilityMode:"L1T2",maxBitrate:e.low,scaleResolutionDownBy:4}]})}else if(i.log("Enabling Simulcasting for Firefox (RID)"),u=r.pc.addTransceiver(f,{direction:"sendrecv",streams:[r.myStream]}),l=u?u.sender:null,l){let e=l.getParameters();e||(e={});let n=y(t.simulcastMaxBitrates);e.encodings=t.sendEncodings||[{rid:"h",active:!0,maxBitrate:n.high},{rid:"m",active:!0,maxBitrate:n.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:n.low,scaleResolutionDownBy:4}],l.setParameters(e)}}else i.log("Enabling SVC ("+t.svc+"):",f),u=r.pc.addTransceiver(f,{direction:"sendrecv",streams:[r.myStream],sendEncodings:[{scalabilityMode:t.svc}]});if(l||(l=u?u.sender:null),t.codec)if("firefox"===i.webRTCAdapter.browserDetails.browser)i.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",t);else if("string"!=typeof t.codec)i.warn("Invalid codec value, ignoring for track:",t);else{let e=o+"/"+t.codec.toLowerCase(),n=RTCRtpReceiver.getCapabilities(o).codecs.filter((function(t){return t.mimeType.toLowerCase()===e}));if(n&&0!==n.length){if(u)try{u.setCodecPreferences(n)}catch(e){i.warn("Failed enforcing codec for this "+o+" track:",e)}}else i.warn("Codec not supported in this browser for this track, ignoring:",t)}if(t.bitrate)if(t.simulcast||t.svc)i.warn("Ignoring bitrate for simulcast/SVC track, use sendEncodings for that");else if(isNaN(t.bitrate)||t.bitrate<0)i.warn("Ignoring invalid bitrate for track:",t);else if(l){let e=l.getParameters();e&&e.encodings&&0!==e.encodings.length?(e.encodings[0].maxBitrate=t.bitrate,await l.setParameters(e)):i.warn("No encodings in the sender parameters, ignoring bitrate for track:",t)}if("video"===o&&t.framerate)if(t.simulcast||t.svc)i.warn("Ignoring framerate for simulcast/SVC track, use sendEncodings for that");else if(isNaN(t.framerate)||t.framerate<0)i.warn("Ignoring invalid framerate for track:",t);else if(l){let e=l.getParameters();e&&e.encodings&&0!==e.encodings.length?(e.encodings[0].maxFramerate=t.framerate,await l.setParameters(e)):i.warn("No encodings in the sender parameters, ignoring framerate for track:",t)}if(t.transforms){if(l&&t.transforms.sender){let e=null;RTCRtpSender.prototype.createEncodedStreams?e=l.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===o?e=l.createEncodedAudioStreams():"video"===o&&(e=l.createEncodedVideoStreams())),e&&(e.readableStream&&e.writableStream?e.readableStream.pipeThrough(t.transforms.sender).pipeTo(e.writableStream):e.readable&&e.writable&&e.readable.pipeThrough(t.transforms.sender).pipeTo(e.writable))}if(u&&u.receiver&&t.transforms.receiver){let e=null;RTCRtpReceiver.prototype.createEncodedStreams?e=u.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===o?e=u.receiver.createEncodedAudioStreams():"video"===o&&(e=u.receiver.createEncodedVideoStreams())),e&&(e.readableStream&&e.writableStream?e.readableStream.pipeThrough(t.transforms.receiver).pipeTo(e.writableStream):e.readable&&e.writable&&e.readable.pipeThrough(t.transforms.receiver).pipeTo(e.writable))}}}f&&!0===t.dontStop&&(f.dontStop=!0)}else if(t.recv&&(u||(u=r.pc.addTransceiver(o)),u)){if(t.codec)if("firefox"===i.webRTCAdapter.browserDetails.browser)i.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",t);else if("string"!=typeof t.codec)i.warn("Invalid codec value, ignoring for track:",t);else{let e=o+"/"+t.codec.toLowerCase(),n=RTCRtpReceiver.getCapabilities(o).codecs.filter((function(t){return t.mimeType.toLowerCase()===e}));if(n&&0!==n.length)try{u.setCodecPreferences(n)}catch(e){i.warn("Failed enforcing codec for this "+o+" track:",e)}else i.warn("Codec not supported in this browser for this track, ignoring:",t)}if(u.receiver&&t.transforms&&t.transforms.receiver){let e=null;RTCRtpReceiver.prototype.createEncodedStreams?e=u.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===o?e=u.receiver.createEncodedAudioStreams():"video"===o&&(e=u.receiver.createEncodedVideoStreams())),e&&(e.readableStream&&e.writableStream?e.readableStream.pipeThrough(t.transforms.receiver).pipeTo(e.writableStream):e.readable&&e.writable&&e.readable.pipeThrough(t.transforms.receiver).pipeTo(e.writable))}}if(f){r.myStream.addTrack(f),f.onended=function(e){i.log("Local track removed:",e);try{n.onlocaltrack(e.target,!1)}catch(e){i.error("Error calling onlocaltrack following end",e)}};try{n.onlocaltrack(f,!0)}catch(e){i.error("Error calling onlocaltrack for track add",e)}}if(u){let e=u.direction,n=null,r=f&&u.sender.track,o=!1!==t.recv&&u.receiver.track;r&&o?n="sendrecv":r&&!o?n="sendonly":!r&&o?n="recvonly":r||o||(n="inactive"),n&&n!==e&&(i.warn("Changing direction of transceiver to "+n+" (was "+e+")",t),u.setDirection?u.setDirection(n):u.direction=n)}}a&&n.consentDialog(!1)}function U(e){let t=x.get(e);if(!t||!t.webrtcStuff)return i.warn("Invalid handle"),null;let n=t.webrtcStuff;if(!n.pc)return i.warn("Invalid PeerConnection"),null;let r=[],o=n.pc.getTransceivers();for(let e of o){let t=null;e.sender&&e.sender.track&&(t={mid:e.mid},t.type=e.sender.track.kind,t.id=e.sender.track.id,t.label=e.sender.track.label),t&&r.push(t)}return r}function B(e){let t=x.get(e);if(!t||!t.webrtcStuff)return i.warn("Invalid handle"),null;let n=t.webrtcStuff;if(!n.pc)return i.warn("Invalid PeerConnection"),null;let r=[],o=n.pc.getTransceivers();for(let e of o){let t=null;e.receiver&&e.receiver.track&&(t={mid:e.mid},t.type=e.receiver.track.kind,t.id=e.receiver.track.id,t.label=e.receiver.track.label),t&&r.push(t)}return r}function z(e,t,n,r){r="function"==typeof r?r:i.noop;let o=x.get(e);if(!o||!o.webrtcStuff)return i.warn("Invalid handle"),void r(0);let a=n?"remote":"local",s=o.webrtcStuff;if(s.volume[a]||(s.volume[a]={value:0}),s.pc&&s.pc.getStats&&("chrome"===i.webRTCAdapter.browserDetails.browser||"safari"===i.webRTCAdapter.browserDetails.browser)){let e=s.pc;if(t){let o=s.pc.getTransceivers().find((e=>e.mid===t&&"audio"===e.receiver.track.kind));if(!o)return i.warn("No audio transceiver with mid "+t),void r(0);if(n&&!o.receiver)return i.warn("Remote transceiver track unavailable"),void r(0);if(!n&&!o.sender)return i.warn("Local transceiver track unavailable"),void r(0);e=n?o.receiver:o.sender}return e.getStats().then((function(e){e.forEach((function(e){e&&"audio"===e.kind&&(n&&!e.remoteSource||!n&&"media-source"!==e.type||r(e.audioLevel?e.audioLevel:0))}))})),s.volume[a].value}return i.warn("Getting the "+a+" volume unsupported by browser"),void r(0)}function V(e,t,n){let r=x.get(e);if(!r||!r.webrtcStuff)return i.warn("Invalid handle"),!0;let o=r.webrtcStuff;if(!o.pc)return i.warn("Invalid PeerConnection"),!0;if(!o.myStream)return i.warn("Invalid local MediaStream"),!0;if(n){if(!o.myStream.getVideoTracks()||0===o.myStream.getVideoTracks().length)return i.warn("No video track"),!0;if(t){let e=o.pc.getTransceivers().find((e=>e.mid===t&&"video"===e.receiver.track.kind));return e?e.sender&&e.sender.track?!e.sender.track.enabled:(i.warn("No video sender with mid "+t),!0):(i.warn("No video transceiver with mid "+t),!0)}return!o.myStream.getVideoTracks()[0].enabled}if(!o.myStream.getAudioTracks()||0===o.myStream.getAudioTracks().length)return i.warn("No audio track"),!0;if(t){let e=o.pc.getTransceivers().find((e=>e.mid===t&&"audio"===e.receiver.track.kind));return e?e.sender&&e.sender.track?!e.sender.track.enabled:(i.warn("No audio sender with mid "+t),!0):(i.warn("No audio transceiver with mid "+t),!0)}return!o.myStream.getAudioTracks()[0].enabled}function W(e,t,n,r){let o=x.get(e);if(!o||!o.webrtcStuff)return i.warn("Invalid handle"),!1;let a=o.webrtcStuff;if(!a.pc)return i.warn("Invalid PeerConnection"),!1;if(!a.myStream)return i.warn("Invalid local MediaStream"),!1;if(n){if(!a.myStream.getVideoTracks()||0===a.myStream.getVideoTracks().length)return i.warn("No video track"),!1;if(t){let e=a.pc.getTransceivers().find((e=>e.mid===t&&"video"===e.receiver.track.kind));if(!e)return i.warn("No video transceiver with mid "+t),!1;if(!e.sender||!e.sender.track)return i.warn("No video sender with mid "+t),!1;e.sender.track.enabled=!r}else for(const e of a.myStream.getVideoTracks())e.enabled=!r}else{if(!a.myStream.getAudioTracks()||0===a.myStream.getAudioTracks().length)return i.warn("No audio track"),!1;if(t){let e=a.pc.getTransceivers().find((e=>e.mid===t&&"audio"===e.receiver.track.kind));if(!e)return i.warn("No audio transceiver with mid "+t),!1;if(!e.sender||!e.sender.track)return i.warn("No audio sender with mid "+t),!1;e.sender.track.enabled=!r}else for(const e of a.myStream.getAudioTracks())e.enabled=!r}return!0}function H(e,t){let n=x.get(e);if(!n||!n.webrtcStuff)return i.warn("Invalid handle"),"Invalid handle";let r=n.webrtcStuff;if(!r.pc)return"Invalid PeerConnection";if(r.pc.getStats){let e=r.pc,n=t||"default";if(t){let n=r.pc.getTransceivers().find((e=>e.mid===t&&"video"===e.receiver.track.kind));if(!n)return i.warn("No video transceiver with mid "+t),"No video transceiver with mid "+t;if(!n.receiver)return i.warn("No video receiver with mid "+t),"No video receiver with mid "+t;e=n.receiver}return r.bitrate[n]||(r.bitrate[n]={timer:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,value:"0 kbits/sec"}),r.bitrate[n].timer?r.bitrate[n].value:(i.log("Starting bitrate timer"+(t?" for mid "+t:"")+" (via getStats)"),r.bitrate[n].timer=setInterval((function(){e.getStats().then((function(e){e.forEach((function(e){if(!e)return;let t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(r.bitrate[n].bsnow=e.bytesReceived,r.bitrate[n].tsnow=e.timestamp,null===r.bitrate[n].bsbefore||null===r.bitrate[n].tsbefore)r.bitrate[n].bsbefore=r.bitrate[n].bsnow,r.bitrate[n].tsbefore=r.bitrate[n].tsnow;else{let e=r.bitrate[n].tsnow-r.bitrate[n].tsbefore;"safari"===i.webRTCAdapter.browserDetails.browser&&(e/=1e3);let t=Math.round(8*(r.bitrate[n].bsnow-r.bitrate[n].bsbefore)/e);"safari"===i.webRTCAdapter.browserDetails.browser&&(t=parseInt(t/1e3)),r.bitrate[n].value=t+" kbits/sec",r.bitrate[n].bsbefore=r.bitrate[n].bsnow,r.bitrate[n].tsbefore=r.bitrate[n].tsnow}}))}))}),1e3),"0 kbits/sec")}return i.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function G(e,t,n){let r=x.get(e);if(!r||!r.webrtcStuff)return void i.warn("Invalid handle");let o=r.webrtcStuff;if(!o.pc)return void i.warn("Invalid PeerConnection");let a=o.pc.getTransceivers().find((e=>e.mid===t));if(!a)return void i.warn("No transceiver with mid",t);if(!a.sender)return void i.warn("No sender for transceiver with mid",t);let s=a.sender.getParameters();s&&s.encodings&&0!==s.encodings.length?s.encodings.length>1?i.warn("Ignoring bitrate for simulcast track, use sendEncodings for that"):isNaN(n)||n<0?i.warn("Invalid bitrate (must be a positive integer)"):(s.encodings[0].maxBitrate=n,a.sender.setParameters(s)):i.warn("No parameters encodings")}function q(e){i.error("WebRTC error:",e)}function K(e,r){i.log("Cleaning WebRTC stuff");let o=x.get(e);if(!o)return;let a=o.webrtcStuff;if(a){if(!0===r){let r={janus:"hangup",transaction:i.randomString(12)};o.token&&(r.token=o.token),g&&(r.apisecret=g),i.debug("Sending hangup request (handle="+e+"):"),i.debug(r),t?(r.session_id=b,r.handle_id=e,n.send(JSON.stringify(r))):i.httpAPICall(u+"/"+b+"/"+e,{verb:"POST",withCredentials:h,body:r})}a.volume&&(a.volume.local&&a.volume.local.timer&&clearInterval(a.volume.local.timer),a.volume.remote&&a.volume.remote.timer&&clearInterval(a.volume.remote.timer));for(let e in a.bitrate)a.bitrate[e].timer&&clearInterval(a.bitrate[e].timer);a.bitrate={},!a.streamExternal&&a.myStream&&(i.log("Stopping local stream tracks"),i.stopAllTracks(a.myStream)),a.streamExternal=!1,a.myStream=null;try{a.pc.close()}catch(e){}a.pc=null,a.candidates=null,a.mySdp=null,a.remoteSdp=null,a.iceDone=!1,a.dataChannel={},a.dtmfSender=null,a.insertableStreams=!1}o.oncleanup()}A(e),this.getServer=function(){return u},this.isConnected=function(){return w},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:i.noop,e.error="function"==typeof e.error?e.error:i.noop,e.reconnect=!0,A(e)},this.getSessionId=function(){return b},this.getInfo=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:i.noop,e.error="function"==typeof e.error?e.error:i.noop,i.log("Getting info on Janus instance"),!w)return i.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");let r=i.randomString(12),o={janus:"info",transaction:r};if(p&&(o.token=p),g&&(o.apisecret=g),t)return S.set(r,(function(t){i.log("Server info:"),i.debug(t),"server_info"!==t.janus&&i.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)})),void n.send(JSON.stringify(o));i.httpAPICall(u,{verb:"POST",withCredentials:h,body:o,success:function(t){i.log("Server info:"),i.debug(t),"server_info"!==t.janus&&i.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},error:function(t,n){i.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)},this.destroy=function(a){!function(a){(a=a||{}).success="function"==typeof a.success?a.success:i.noop,a.error="function"==typeof a.error?a.error:i.noop;let s=!0===a.unload,c=!0;void 0!==a.notifyDestroyed&&null!==a.notifyDestroyed&&(c=!0===a.notifyDestroyed);let l=!0===a.cleanupHandles;if(i.log("Destroying session "+b+" (unload="+s+")"),!b)return i.warn("No session to destroy"),a.success(),void(c&&e.destroyed());if(l)for(const e of x.keys())D(e,{noRequest:!0});if(!w)return i.warn("Is the server down? (connected=false)"),b=null,void a.success();let f={janus:"destroy",transaction:i.randomString(12)};if(p&&(f.token=p),g&&(f.apisecret=g),s)return t?(n.onclose=null,n.close(),n=null):navigator.sendBeacon(u+"/"+b,JSON.stringify(f)),i.log("Destroyed session:"),b=null,w=!1,a.success(),void(c&&e.destroyed());if(t){f.session_id=b;let t=function(){for(let e in r)n.removeEventListener(e,r[e]);n.removeEventListener("message",i),n.removeEventListener("error",s),o&&clearTimeout(o),n.close()},i=function(n){let r=JSON.parse(n.data);r.session_id==f.session_id&&r.transaction==f.transaction&&(t(),a.success(),c&&e.destroyed())},s=function(){t(),a.error("Failed to destroy the server: Is the server down?"),c&&e.destroyed()};return n.addEventListener("message",i),n.addEventListener("error",s),void(1===n.readyState?n.send(JSON.stringify(f)):s())}i.httpAPICall(u+"/"+b,{verb:"POST",withCredentials:h,body:f,success:function(t){i.log("Destroyed session:"),i.debug(t),b=null,w=!1,"success"!==t.janus&&i.error("Ooops: "+t.error.code+" "+t.error.reason),a.success(),c&&e.destroyed()},error:function(t,n){i.error(t+":",n),b=null,w=!1,a.success(),c&&e.destroyed()}})}(a)},this.attach=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:i.noop,e.error="function"==typeof e.error?e.error:i.noop,e.dataChannelOptions=e.dataChannelOptions||{ordered:!0},e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:i.noop,e.iceState="function"==typeof e.iceState?e.iceState:i.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:i.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:i.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:i.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:i.noop,e.onlocaltrack="function"==typeof e.onlocaltrack?e.onlocaltrack:i.noop,e.onremotetrack="function"==typeof e.onremotetrack?e.onremotetrack:i.noop,e.ondata="function"==typeof e.ondata?e.ondata:i.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:i.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:i.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:i.noop,!w)return i.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");let r=e.plugin;if(!r)return i.error("Invalid plugin"),void e.error("Invalid plugin");let o=e.opaqueId,a=e.loopIndex,s=e.token?e.token:p,c=i.randomString(12),l={janus:"attach",plugin:r,opaque_id:o,loop_index:a,transaction:c};if(s&&(l.token=s),g&&(l.apisecret=g),t)return S.set(c,(function(t){if(i.debug(t),"success"!==t.janus)return i.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);let n=t.data.id;i.log("Created handle: "+n);let o={session:_,plugin:r,id:n,token:s,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:e.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return n},getPlugin:function(){return r},getVolume:function(e,t){return z(n,e,!0,t)},getRemoteVolume:function(e,t){return z(n,e,!0,t)},getLocalVolume:function(e,t){return z(n,e,!1,t)},isAudioMuted:function(e){return V(n,e,!1)},muteAudio:function(e){return W(n,e,!1,!0)},unmuteAudio:function(e){return W(n,e,!1,!1)},isVideoMuted:function(e){return V(n,e,!0)},muteVideo:function(e){return W(n,e,!0,!0)},unmuteVideo:function(e){return W(n,e,!0,!1)},getBitrate:function(e){return H(n,e)},setMaxBitrate:function(e,t){return G(n,e,t)},send:function(e){M(n,e)},data:function(e){P(n,e)},dtmf:function(e){O(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){F(n,!0,e)},createAnswer:function(e){F(n,!1,e)},handleRemoteJsep:function(e){L(n,e)},replaceTracks:function(e){j(n,e)},getLocalTracks:function(){return U(n)},getRemoteTracks:function(){return B(n)},onlocaltrack:e.onlocaltrack,onremotetrack:e.onremotetrack,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){K(n,!0===e)},detach:function(e){D(n,e)}};x.set(n,o),e.success(o)})),l.session_id=b,void n.send(JSON.stringify(l));i.httpAPICall(u+"/"+b,{verb:"POST",withCredentials:h,body:l,success:function(t){if(i.debug(t),"success"!==t.janus)return i.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);let n=t.data.id;i.log("Created handle: "+n);let o={session:_,plugin:r,id:n,token:s,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:e.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return n},getPlugin:function(){return r},getVolume:function(e,t){return z(n,e,!0,t)},getRemoteVolume:function(e,t){return z(n,e,!0,t)},getLocalVolume:function(e,t){return z(n,e,!1,t)},isAudioMuted:function(e){return V(n,e,!1)},muteAudio:function(e){return W(n,e,!1,!0)},unmuteAudio:function(e){return W(n,e,!1,!1)},isVideoMuted:function(e){return V(n,e,!0)},muteVideo:function(e){return W(n,e,!0,!0)},unmuteVideo:function(e){return W(n,e,!0,!1)},getBitrate:function(e){return H(n,e)},setMaxBitrate:function(e,t){return G(n,e,t)},send:function(e){M(n,e)},data:function(e){P(n,e)},dtmf:function(e){O(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){F(n,!0,e)},createAnswer:function(e){F(n,!1,e)},handleRemoteJsep:function(e){L(n,e)},replaceTracks:function(e){j(n,e)},getLocalTracks:function(){return U(n)},getRemoteTracks:function(){return B(n)},onlocaltrack:e.onlocaltrack,onremotetrack:e.onremotetrack,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){K(n,!0===e)},detach:function(e){D(n,e)}};x.set(n,o),e.success(o)},error:function(t,n){i.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)}}i.useDefaultDependencies=function(e){let t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,o=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new o(e,t)},extension:e&&e.extension||r,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,r){let o={method:r.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===r.verb&&(o.headers["Content-Type"]="application/json"),void 0!==r.withCredentials&&(o.credentials=!0===r.withCredentials?"include":r.withCredentials?r.withCredentials:"omit"),r.body&&(o.body=JSON.stringify(r.body));let a=t(e,o).catch((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(r.timeout){let e=new n((function(e,t){let n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:r.timeout})}),r.timeout)}));a=n.race([a,e])}return a.then((function(e){return e.ok?typeof r.success==typeof i.noop?e.json().then((function(e){try{r.success(e)}catch(e){i.error("Unhandled httpAPICall success callback error",e)}}),(function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})})).catch((function(e){typeof r.error==typeof i.noop&&r.error(e.message||"<< internal error >>",e)})),a}}},i.useOldDependencies=function(e){let t=e&&e.jQuery||jQuery,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||r,webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,n){let r=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},o=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(r,o,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){typeof n.success==typeof i.noop&&n.success(e)},error:function(e,t,r){typeof n.error==typeof i.noop&&n.error(t,r)}}))}}},i.mediaToTracks=function(e){let t=[];if(e){if(!e.keepAudio&&!1!==e.audio&&(void 0===e.audio||e.audio||e.audioSend||e.audioRecv||e.addAudio||e.replaceAudio||e.removeAudio)){let n={type:"audio"};e.removeAudio?n.remove=!0:(e.addAudio?n.add=!0:e.replaceAudio&&(n.replace=!0),!1!==e.audioSend&&(n.capture=e.audio||!0),!1!==e.audioRecv&&(n.recv=!0)),(n.remove||n.capture||n.recv)&&t.push(n)}if(!e.keepVideo&&!1!==e.video&&(void 0===e.video||e.video||e.videoSend||e.videoRecv||e.addVideo||e.replaceVideo||e.removeVideo)){let n={type:"video"};e.removeVideo?n.remove=!0:(e.addVideo?n.add=!0:e.replaceVideo&&(n.replace=!0),!1!==e.videoSend&&(n.capture=e.video||!0,["screen","window","desktop"].includes(n.capture)&&(n.type="screen",n.capture={video:{}},e.screenshareFrameRate&&(n.capture.frameRate=e.screenshareFrameRate),e.screenshareHeight&&(n.capture.height=e.screenshareHeight),e.screenshareWidth&&(n.capture.width=e.screenshareWidth))),!1!==e.videoRecv&&(n.recv=!0)),(n.remove||n.capture||n.recv)&&t.push(n)}e.data&&t.push({type:"data"})}else t.push({type:"audio",capture:!0,recv:!0}),t.push({type:"video",capture:!0,recv:!0});return t},i.trackConstraints=function(e){let t={};if(!e||!e.capture)return t;if("audio"===e.type)t.audio=e.capture;else if("video"===e.type)if((e.simulcast||e.svc)&&!0===e.capture&&(e.capture="hires"),!0===e.capture||"object"==typeof e.capture)t.video=e.capture;else{let n=0,r=0;"lowres"===e.capture?(n=320,r=240):"lowres-16:9"===e.capture?(n=320,r=180):"hires"===e.capture||"hires-16:9"===e.capture||"hdres"===e.capture?(n=1280,r=720):"fhdres"===e.capture?(n=1920,r=1080):"4kres"===e.capture?(n=3840,r=2160):"stdres"===e.capture?(n=640,r=480):"stdres-16:9"===e.capture?(n=640,r=360):(i.log("Default video setting is stdres 4:3"),n=640,r=480),t.video={width:{ideal:n},height:{ideal:r}}}else"screen"===e.type&&(t.video=e.capture);return t},i.noop=function(){},i.dataChanDefaultLabel="JanusDataChannel",i.endOfCandidates=null,i.stopAllTracks=function(e){try{let t=e.getTracks();for(let e of t)i.log(e),e&&!0!==e.dontStop&&e.stop()}catch(e){}},i.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:i.noop,i.initDone)e.callback();else{if(void 0===console.log&&(console.log=function(){}),i.trace=i.noop,i.debug=i.noop,i.vdebug=i.noop,i.log=i.noop,i.warn=i.noop,i.error=i.noop,!0===e.debug||"all"===e.debug)i.trace=console.trace.bind(console),i.debug=console.debug.bind(console),i.vdebug=console.debug.bind(console),i.log=console.log.bind(console),i.warn=console.warn.bind(console),i.error=console.error.bind(console);else if(Array.isArray(e.debug))for(let t of e.debug)switch(t){case"trace":i.trace=console.trace.bind(console);break;case"debug":i.debug=console.debug.bind(console);break;case"vdebug":i.vdebug=console.debug.bind(console);break;case"log":i.log=console.log.bind(console);break;case"warn":i.warn=console.warn.bind(console);break;case"error":i.error=console.error.bind(console)}i.log("Initializing library");let t=e.dependencies||i.useDefaultDependencies();i.isArray=t.isArray,i.webRTCAdapter=t.webRTCAdapter,i.httpAPICall=t.httpAPICall,i.newWebSocket=t.newWebSocket,i.extension=t.extension,i.extension.init(),i.listDevices=function(e,t){e="function"==typeof e?e:i.noop,t||(t={audio:!0,video:!0}),i.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){i.debug(n),e(n),i.stopAllTracks(t)}))})).catch((function(t){i.error(t),e([])})):(i.warn("navigator.mediaDevices unavailable"),e([]))},i.attachMediaStream=function(e,t){try{e.srcObject=t}catch(n){try{e.src=URL.createObjectURL(t)}catch(e){i.error("Error attaching stream to element",e)}}},i.reattachMediaStream=function(e,t){try{e.srcObject=t.srcObject}catch(n){try{e.src=t.src}catch(e){i.error("Error reattaching stream to element",e)}}};let n=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",r=window["on"+n];if(window.addEventListener(n,(function(){i.log("Closing window");for(const[e,t]of i.sessions)t&&t.destroyOnUnload&&(i.log("Destroying session "+e),t.destroy({unload:!0,notifyDestroyed:!1}));r&&"function"==typeof r&&r()})),i.safariVp8=!1,i.safariVp9=!1,"safari"===i.webRTCAdapter.browserDetails.browser&&i.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(let e of RTCRtpSender.getCapabilities("video").codecs)e&&e.mimeType&&"video/vp8"===e.mimeType.toLowerCase()?i.safariVp8=!0:e&&e.mimeType&&"video/vp9"===e.mimeType.toLowerCase()&&(i.safariVp9=!0);i.safariVp8?i.log("This version of Safari supports VP8"):i.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{let e=new RTCPeerConnection({});e.createOffer({offerToReceiveVideo:!0}).then((function(t){i.safariVp8=-1!==t.sdp.indexOf("VP8"),i.safariVp9=-1!==t.sdp.indexOf("VP9"),i.safariVp8?i.log("This version of Safari supports VP8"):i.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),e.close(),e=null}))}i.initDone=!0,e.callback()}},i.isWebrtcSupported=function(){return!!window.RTCPeerConnection},i.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},i.randomString=function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<e;r++){let e=Math.floor(Math.random()*t.length);n+=t.charAt(e)}return n}},96486:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,c=128,l=1/0,f=9007199254740991,h=NaN,d=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",v="[object Boolean]",y="[object Date]",w="[object Error]",b="[object Function]",x="[object GeneratorFunction]",_="[object Map]",k="[object Number]",S="[object Object]",T="[object Promise]",I="[object RegExp]",E="[object Set]",A="[object String]",M="[object Symbol]",R="[object WeakMap]",C="[object ArrayBuffer]",P="[object DataView]",O="[object Float32Array]",D="[object Float64Array]",F="[object Int8Array]",L="[object Int16Array]",j="[object Int32Array]",N="[object Uint8Array]",U="[object Uint8ClampedArray]",B="[object Uint16Array]",z="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,K=RegExp(G.source),X=RegExp(q.source),Y=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ie=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,he=/\w*$/,de=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,be=/['\n\r\u2028\u2029\\]/g,xe="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="["+xe+"]",Me="["+Ee+"]",Re="["+_e+"]",Ce="\\d+",Pe="["+ke+"]",Oe="["+Se+"]",De="[^"+xe+Ee+Ce+ke+Se+Te+"]",Fe="\\ud83c[\\udffb-\\udfff]",Le="[^"+xe+"]",je="(?:\\ud83c[\\udde6-\\uddff]){2}",Ne="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+Te+"]",Be="\\u200d",ze="(?:"+Oe+"|"+De+")",Ve="(?:"+Ue+"|"+De+")",We="(?:['](?:d|ll|m|re|s|t|ve))?",He="(?:['](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+Re+"|"+Fe+")?",qe="["+Ie+"]?",Ke=qe+Ge+"(?:"+Be+"(?:"+[Le,je,Ne].join("|")+")"+qe+Ge+")*",Xe="(?:"+[Pe,je,Ne].join("|")+")"+Ke,Ye="(?:"+[Le+Re+"?",Re,je,Ne,Ae].join("|")+")",$e=RegExp("[']","g"),Je=RegExp(Re,"g"),Ze=RegExp(Fe+"(?="+Fe+")|"+Ye+Ke,"g"),Qe=RegExp([Ue+"?"+Oe+"+"+We+"(?="+[Me,Ue,"$"].join("|")+")",Ve+"+"+He+"(?="+[Me,Ue+ze,"$"].join("|")+")",Ue+"?"+ze+"+"+We,Ue+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ce,Xe].join("|"),"g"),et=RegExp("["+Be+xe+_e+Ie+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,it={};it[O]=it[D]=it[F]=it[L]=it[j]=it[N]=it[U]=it[B]=it[z]=!0,it[g]=it[m]=it[C]=it[v]=it[P]=it[y]=it[w]=it[b]=it[_]=it[k]=it[S]=it[I]=it[E]=it[A]=it[R]=!1;var ot={};ot[g]=ot[m]=ot[C]=ot[P]=ot[v]=ot[y]=ot[O]=ot[D]=ot[F]=ot[L]=ot[j]=ot[_]=ot[k]=ot[S]=ot[I]=ot[E]=ot[A]=ot[M]=ot[N]=ot[U]=ot[B]=ot[z]=!0,ot[w]=ot[b]=ot[R]=!1;var at={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ut=parseInt,ct="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,lt="object"==typeof self&&self&&self.Object===Object&&self,ft=ct||lt||Function("return this")(),ht=t&&!t.nodeType&&t,dt=ht&&e&&!e.nodeType&&e,pt=dt&&dt.exports===ht,gt=pt&&ct.process,mt=function(){try{return dt&&dt.require&&dt.require("util").types||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),vt=mt&&mt.isArrayBuffer,yt=mt&&mt.isDate,wt=mt&&mt.isMap,bt=mt&&mt.isRegExp,xt=mt&&mt.isSet,_t=mt&&mt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function At(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Mt(e,t){return!(null==e||!e.length)&&Ut(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Ct(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ot(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Dt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Lt=Wt("length");function jt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Nt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Ut(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Nt(e,zt,n)}function Bt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Vt(e,t){var n=null==e?0:e.length;return n?qt(e,t)/n:h}function Wt(e){return function(t){return null==t?i:t[e]}}function Ht(e){return function(t){return null==e?i:e[t]}}function Gt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function qt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Kt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,dn(e)+1).replace(re,""):e}function Yt(e){return function(t){return e(t)}}function $t(e,t){return Ct(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function Zt(e,t){for(var n=-1,r=e.length;++n<r&&Ut(t,e[n],0)>-1;);return n}function Qt(e,t){for(var n=e.length;n--&&Ut(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var tn=Ht({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),nn=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(e){return"\\"+at[e]}function on(e){return et.test(e)}function an(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function sn(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return on(e)?function(e){for(var t=Ze.lastIndex=0;Ze.test(e);)++t;return t}(e):Lt(e)}function hn(e){return on(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var pn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gn=function e(t){var n,r=(t=null==t?ft:gn.defaults(ft.Object(),t,gn.pick(ft,nt))).Array,ie=t.Date,xe=t.Error,_e=t.Function,ke=t.Math,Se=t.Object,Te=t.RegExp,Ie=t.String,Ee=t.TypeError,Ae=r.prototype,Me=_e.prototype,Re=Se.prototype,Ce=t["__core-js_shared__"],Pe=Me.toString,Oe=Re.hasOwnProperty,De=0,Fe=(n=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Le=Re.toString,je=Pe.call(Se),Ne=ft._,Ue=Te("^"+Pe.call(Oe).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=pt?t.Buffer:i,ze=t.Symbol,Ve=t.Uint8Array,We=Be?Be.allocUnsafe:i,He=sn(Se.getPrototypeOf,Se),Ge=Se.create,qe=Re.propertyIsEnumerable,Ke=Ae.splice,Xe=ze?ze.isConcatSpreadable:i,Ye=ze?ze.iterator:i,Ze=ze?ze.toStringTag:i,et=function(){try{var e=co(Se,"defineProperty");return e({},"",{}),e}catch(e){}}(),at=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,ct=ie&&ie.now!==ft.Date.now&&ie.now,lt=t.setTimeout!==ft.setTimeout&&t.setTimeout,ht=ke.ceil,dt=ke.floor,gt=Se.getOwnPropertySymbols,mt=Be?Be.isBuffer:i,Lt=t.isFinite,Ht=Ae.join,mn=sn(Se.keys,Se),vn=ke.max,yn=ke.min,wn=ie.now,bn=t.parseInt,xn=ke.random,_n=Ae.reverse,kn=co(t,"DataView"),Sn=co(t,"Map"),Tn=co(t,"Promise"),In=co(t,"Set"),En=co(t,"WeakMap"),An=co(Se,"create"),Mn=En&&new En,Rn={},Cn=Uo(kn),Pn=Uo(Sn),On=Uo(Tn),Dn=Uo(In),Fn=Uo(En),Ln=ze?ze.prototype:i,jn=Ln?Ln.valueOf:i,Nn=Ln?Ln.toString:i;function Un(e){if(ns(e)&&!Ga(e)&&!(e instanceof Wn)){if(e instanceof Vn)return e;if(Oe.call(e,"__wrapped__"))return Bo(e)}return new Vn(e)}var Bn=function(){function e(){}return function(t){if(!ts(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function zn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Yn(e,t){var n=Ga(e),r=!n&&Ha(e),i=!n&&!r&&Ya(e),o=!n&&!r&&!i&&ls(e),a=n||r||i||o,s=a?Kt(e.length,Ie):[],u=s.length;for(var c in e)!t&&!Oe.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vo(c,u))||s.push(c);return s}function $n(e){var t=e.length;return t?e[qr(0,t-1)]:i}function Jn(e,t){return Do(Ei(e),ar(t,0,e.length))}function Zn(e){return Do(Ei(e))}function Qn(e,t,n){(n!==i&&!za(e[t],n)||n===i&&!(t in e))&&ir(e,t,n)}function er(e,t,n){var r=e[t];Oe.call(e,t)&&za(r,n)&&(n!==i||t in e)||ir(e,t,n)}function tr(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function nr(e,t,n,r){return fr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function rr(e,t){return e&&Ai(t,Ps(t),e)}function ir(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:Es(e,t[n]);return a}function ar(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function sr(e,t,n,r,o,a){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!ts(e))return e;var f=Ga(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Oe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return Ei(e,s)}else{var h=ho(e),d=h==b||h==x;if(Ya(e))return xi(e,u);if(h==S||h==g||d&&!o){if(s=c||d?{}:go(e),!u)return c?function(e,t){return Ai(e,fo(e),t)}(e,function(e,t){return e&&Ai(t,Os(t),e)}(s,e)):function(e,t){return Ai(e,lo(e),t)}(e,rr(s,e))}else{if(!ot[h])return o?e:{};s=function(e,t,n){var r,i=e.constructor;switch(t){case C:return _i(e);case v:case y:return new i(+e);case P:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case O:case D:case F:case L:case j:case N:case U:case B:case z:return ki(e,n);case _:return new i;case k:case A:return new i(e);case I:return function(e){var t=new e.constructor(e.source,he.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return new i;case M:return r=e,jn?Se(jn.call(r)):{}}}(e,h,u)}}a||(a=new Xn);var p=a.get(e);if(p)return p;a.set(e,s),ss(e)?e.forEach((function(r){s.add(sr(r,t,n,r,e,a))})):rs(e)&&e.forEach((function(r,i){s.set(i,sr(r,t,n,i,e,a))}));var m=f?i:(l?c?no:to:c?Os:Ps)(e);return Tt(m||e,(function(r,i){m&&(r=e[i=r]),er(s,i,sr(r,t,n,i,e,a))})),s}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=Se(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function cr(e,t,n){if("function"!=typeof e)throw new Ee(o);return Ro((function(){e.apply(i,n)}),t)}function lr(e,t,n,r){var i=-1,o=Mt,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Ct(t,Yt(n))),r?(o=Rt,a=!1):t.length>=200&&(o=Jt,a=!1,t=new Kn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}Un.templateSettings={escape:Y,evaluate:$,interpolate:J,variable:"",imports:{_:Un}},Un.prototype=zn.prototype,Un.prototype.constructor=Un,Vn.prototype=Bn(zn.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Bn(zn.prototype),Wn.prototype.constructor=Wn,Hn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===a?i:n}return Oe.call(t,e)?t[e]:i},Hn.prototype.has=function(e){var t=this.__data__;return An?t[e]!==i:Oe.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&t===i?a:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=tr(t,e);return!(n<0||(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,0))},Gn.prototype.get=function(e){var t=this.__data__,n=tr(t,e);return n<0?i:t[n][1]},Gn.prototype.has=function(e){return tr(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=tr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Sn||Gn),string:new Hn}},qn.prototype.delete=function(e){var t=so(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return so(this,e).get(e)},qn.prototype.has=function(e){return so(this,e).has(e)},qn.prototype.set=function(e,t){var n=so(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,a),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var fr=Ci(wr),hr=Ci(br,!0);function dr(e,t){var n=!0;return fr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function pr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(u===i?s==s&&!cs(s):n(s,u)))var u=s,c=a}return c}function gr(e,t){var n=[];return fr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function mr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=mo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?mr(s,t-1,n,r,i):Pt(i,s):r||(i[i.length]=s)}return i}var vr=Pi(),yr=Pi(!0);function wr(e,t){return e&&vr(e,t,Ps)}function br(e,t){return e&&yr(e,t,Ps)}function xr(e,t){return At(t,(function(t){return Za(e[t])}))}function _r(e,t){for(var n=0,r=(t=vi(t,e)).length;null!=e&&n<r;)e=e[No(t[n++])];return n&&n==r?e:i}function kr(e,t,n){var r=t(e);return Ga(e)?r:Pt(r,n(e))}function Sr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Ze&&Ze in Se(e)?function(e){var t=Oe.call(e,Ze),n=e[Ze];try{e[Ze]=i;var r=!0}catch(e){}var o=Le.call(e);return r&&(t?e[Ze]=n:delete e[Ze]),o}(e):function(e){return Le.call(e)}(e)}function Tr(e,t){return e>t}function Ir(e,t){return null!=e&&Oe.call(e,t)}function Er(e,t){return null!=e&&t in Se(e)}function Ar(e,t,n){for(var o=n?Rt:Mt,a=e[0].length,s=e.length,u=s,c=r(s),l=1/0,f=[];u--;){var h=e[u];u&&t&&(h=Ct(h,Yt(t))),l=yn(h.length,l),c[u]=!n&&(t||a>=120&&h.length>=120)?new Kn(u&&h):i}h=e[0];var d=-1,p=c[0];e:for(;++d<a&&f.length<l;){var g=h[d],m=t?t(g):g;if(g=n||0!==g?g:0,!(p?Jt(p,m):o(f,m,n))){for(u=s;--u;){var v=c[u];if(!(v?Jt(v,m):o(e[u],m,n)))continue e}p&&p.push(m),f.push(g)}}return f}function Mr(e,t,n){var r=null==(e=Io(e,t=vi(t,e)))?e:e[No(Jo(t))];return null==r?i:kt(r,e,n)}function Rr(e){return ns(e)&&Sr(e)==g}function Cr(e,t,n,r,o){return e===t||(null==e||null==t||!ns(e)&&!ns(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=Ga(e),u=Ga(t),c=s?m:ho(e),l=u?m:ho(t),f=(c=c==g?S:c)==S,h=(l=l==g?S:l)==S,d=c==l;if(d&&Ya(e)){if(!Ya(t))return!1;s=!0,f=!1}if(d&&!f)return a||(a=new Xn),s||ls(e)?Qi(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!o(new Ve(e),new Ve(t)));case v:case y:case k:return za(+e,+t);case w:return e.name==t.name&&e.message==t.message;case I:case A:return e==t+"";case _:var s=an;case E:var u=1&r;if(s||(s=cn),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=Qi(s(e),s(t),r,i,o,a);return a.delete(e),l;case M:if(jn)return jn.call(e)==jn.call(t)}return!1}(e,t,c,n,r,o,a);if(!(1&n)){var p=f&&Oe.call(e,"__wrapped__"),b=h&&Oe.call(t,"__wrapped__");if(p||b){var x=p?e.value():e,T=b?t.value():t;return a||(a=new Xn),o(x,T,n,r,a)}}return!!d&&(a||(a=new Xn),function(e,t,n,r,o,a){var s=1&n,u=to(e),c=u.length;if(c!=to(t).length&&!s)return!1;for(var l=c;l--;){var f=u[l];if(!(s?f in t:Oe.call(t,f)))return!1}var h=a.get(e),d=a.get(t);if(h&&d)return h==t&&d==e;var p=!0;a.set(e,t),a.set(t,e);for(var g=s;++l<c;){var m=e[f=u[l]],v=t[f];if(r)var y=s?r(v,m,f,t,e,a):r(m,v,f,e,t,a);if(!(y===i?m===v||o(m,v,n,r,a):y)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var w=e.constructor,b=t.constructor;w==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,o,a))}(e,t,n,r,Cr,o))}function Pr(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Se(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=n[o])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===i&&!(c in e))return!1}else{var h=new Xn;if(r)var d=r(l,f,c,e,t,h);if(!(d===i?Cr(f,l,3,r,h):d))return!1}}return!0}function Or(e){return!(!ts(e)||(t=e,Fe&&Fe in t))&&(Za(e)?Ue:ge).test(Uo(e));var t}function Dr(e){return"function"==typeof e?e:null==e?iu:"object"==typeof e?Ga(e)?Ur(e[0],e[1]):Nr(e):du(e)}function Fr(e){if(!_o(e))return mn(e);var t=[];for(var n in Se(e))Oe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Lr(e,t){return e<t}function jr(e,t){var n=-1,i=Ka(e)?r(e.length):[];return fr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Nr(e){var t=uo(e);return 1==t.length&&t[0][2]?So(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Ur(e,t){return wo(e)&&ko(t)?So(No(e),t):function(n){var r=Es(n,e);return r===i&&r===t?As(n,e):Cr(t,r,3)}}function Br(e,t,n,r,o){e!==t&&vr(t,(function(a,s){if(o||(o=new Xn),ts(a))!function(e,t,n,r,o,a,s){var u=Ao(e,n),c=Ao(t,n),l=s.get(c);if(l)Qn(e,n,l);else{var f=a?a(u,c,n+"",e,t,s):i,h=f===i;if(h){var d=Ga(c),p=!d&&Ya(c),g=!d&&!p&&ls(c);f=c,d||p||g?Ga(u)?f=u:Xa(u)?f=Ei(u):p?(h=!1,f=xi(c,!0)):g?(h=!1,f=ki(c,!0)):f=[]:os(c)||Ha(c)?(f=u,Ha(u)?f=ys(u):ts(u)&&!Za(u)||(f=go(c))):h=!1}h&&(s.set(c,f),o(f,c,r,a,s),s.delete(c)),Qn(e,n,f)}}(e,t,s,n,Br,r,o);else{var u=r?r(Ao(e,s),a,s+"",e,t,o):i;u===i&&(u=a),Qn(e,s,u)}}),Os)}function zr(e,t){var n=e.length;if(n)return vo(t+=t<0?n:0,n)?e[t]:i}function Vr(e,t,n){t=t.length?Ct(t,(function(e){return Ga(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[iu];var r=-1;t=Ct(t,Yt(ao()));var i=jr(e,(function(e,n,i){var o=Ct(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var r=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=Si(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));r--;)e[r]=e[r].value;return e}(i)}function Wr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=_r(e,a);n(s,a)&&Jr(o,vi(a,e),s)}return o}function Hr(e,t,n,r){var i=r?Bt:Ut,o=-1,a=t.length,s=e;for(e===t&&(t=Ei(t)),n&&(s=Ct(e,Yt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ke.call(s,u,1),Ke.call(e,u,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;vo(i)?Ke.call(e,i,1):ci(e,i)}}return e}function qr(e,t){return e+dt(xn()*(t-e+1))}function Kr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=dt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Co(To(e,t,iu),e+"")}function Yr(e){return $n(zs(e))}function $r(e,t){var n=zs(e);return Do(n,ar(t,0,n.length))}function Jr(e,t,n,r){if(!ts(e))return e;for(var o=-1,a=(t=vi(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var c=No(t[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var f=u[c];(l=r?r(f,c,u):i)===i&&(l=ts(f)?f:vo(t[o+1])?[]:{})}er(u,c,l),u=u[c]}return e}var Zr=Mn?function(e,t){return Mn.set(e,t),e}:iu,Qr=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:tu(t),writable:!0})}:iu;function ei(e){return Do(zs(e))}function ti(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function ni(e,t){var n;return fr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ri(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!cs(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ii(e,t,iu,n)}function ii(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,u=null===t,c=cs(t),l=t===i;o<a;){var f=dt((o+a)/2),h=n(e[f]),d=h!==i,p=null===h,g=h==h,m=cs(h);if(s)var v=r||g;else v=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!m):!p&&!m&&(r?h<=t:h<t);v?o=f+1:a=f}return yn(a,4294967294)}function oi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!za(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ai(e){return"number"==typeof e?e:cs(e)?h:+e}function si(e){if("string"==typeof e)return e;if(Ga(e))return Ct(e,si)+"";if(cs(e))return Nn?Nn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t,n){var r=-1,i=Mt,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=Rt;else if(o>=200){var c=t?null:Ki(e);if(c)return cn(c);a=!1,i=Jt,u=new Kn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function ci(e,t){return null==(e=Io(e,t=vi(t,e)))||delete e[No(Jo(t))]}function li(e,t,n,r){return Jr(e,t,n(_r(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ti(e,r?0:o,r?o+1:i):ti(e,r?o+1:0,r?i:o)}function hi(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Ot(t,(function(e,t){return t.func.apply(t.thisArg,Pt([e],t.args))}),n)}function di(e,t,n){var i=e.length;if(i<2)return i?ui(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=lr(a[o]||s,e[u],t,n));return ui(mr(a,1),t,n)}function pi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var u=r<a?t[r]:i;n(s,e[r],u)}return s}function gi(e){return Xa(e)?e:[]}function mi(e){return"function"==typeof e?e:iu}function vi(e,t){return Ga(e)?e:wo(e,t)?[e]:jo(ws(e))}var yi=Xr;function wi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ti(e,t,n)}var bi=at||function(e){return ft.clearTimeout(e)};function xi(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function ki(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=cs(e),s=t!==i,u=null===t,c=t==t,l=cs(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!l&&e<t||l&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function Ti(e,t,n,i){for(var o=-1,a=e.length,s=n.length,u=-1,c=t.length,l=vn(a-s,0),f=r(c+l),h=!i;++u<c;)f[u]=t[u];for(;++o<s;)(h||o<a)&&(f[n[o]]=e[o]);for(;l--;)f[u++]=e[o++];return f}function Ii(e,t,n,i){for(var o=-1,a=e.length,s=-1,u=n.length,c=-1,l=t.length,f=vn(a-u,0),h=r(f+l),d=!i;++o<f;)h[o]=e[o];for(var p=o;++c<l;)h[p+c]=t[c];for(;++s<u;)(d||o<a)&&(h[p+n[s]]=e[o++]);return h}function Ei(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Ai(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),o?ir(n,u,c):er(n,u,c)}return n}function Mi(e,t){return function(n,r){var i=Ga(n)?St:nr,o=t?t():{};return i(n,e,ao(r,2),o)}}function Ri(e){return Xr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&yo(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Se(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t}))}function Ci(e,t){return function(n,r){if(null==n)return n;if(!Ka(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Se(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Pi(e){return function(t,n,r){for(var i=-1,o=Se(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Oi(e){return function(t){var n=on(t=ws(t))?hn(t):i,r=n?n[0]:t.charAt(0),o=n?wi(n,1).join(""):t.slice(1);return r[e]()+o}}function Di(e){return function(t){return Ot(Zs(Hs(t).replace($e,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),r=e.apply(n,t);return ts(r)?r:n}}function Li(e){return function(t,n,r){var o=Se(t);if(!Ka(t)){var a=ao(n,3);t=Ps(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function ji(e){return eo((function(t){var n=t.length,r=n,a=Vn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ee(o);if(a&&!u&&"wrapper"==io(s))var u=new Vn([],!0)}for(r=u?r:n;++r<n;){var c=io(s=t[r]),l="wrapper"==c?ro(s):i;u=l&&bo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[io(l[0])].apply(u,l[3]):1==s.length&&bo(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Ga(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Ni(e,t,n,o,a,s,u,l,f,h){var d=t&c,p=1&t,g=2&t,m=24&t,v=512&t,y=g?i:Fi(e);return function i(){for(var c=arguments.length,w=r(c),b=c;b--;)w[b]=arguments[b];if(m)var x=oo(i),_=en(w,x);if(o&&(w=Ti(w,o,a,m)),s&&(w=Ii(w,s,u,m)),c-=_,m&&c<h){var k=un(w,x);return Gi(e,t,Ni,i.placeholder,n,w,k,l,f,h-c)}var S=p?n:this,T=g?S[e]:e;return c=w.length,l?w=Eo(w,l):v&&c>1&&w.reverse(),d&&f<c&&(w.length=f),this&&this!==ft&&this instanceof i&&(T=y||Fi(T)),T.apply(S,w)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Bi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=si(n),r=si(r)):(n=ai(n),r=ai(r)),o=e(n,r)}return o}}function zi(e){return eo((function(t){return t=Ct(t,Yt(ao())),Xr((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function Vi(e,t){var n=(t=t===i?" ":si(t)).length;if(n<2)return n?Kr(t,e):t;var r=Kr(t,ht(e/fn(t)));return on(t)?wi(hn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,n,o){return o&&"number"!=typeof o&&yo(t,n,o)&&(n=o=i),t=ps(t),n===i?(n=t,t=0):n=ps(n),function(e,t,n,i){for(var o=-1,a=vn(ht((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:ps(o),e)}}function Hi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vs(t),n=vs(n)),e(t,n)}}function Gi(e,t,n,r,o,a,s,c,l,f){var h=8&t;t|=h?u:64,4&(t&=~(h?64:u))||(t&=-4);var d=[e,t,o,h?a:i,h?s:i,h?i:a,h?i:s,c,l,f],p=n.apply(i,d);return bo(e)&&Mo(p,d),p.placeholder=r,Po(p,e,t)}function qi(e){var t=ke[e];return function(e,n){if(e=vs(e),(n=null==n?0:yn(gs(n),292))&&Lt(e)){var r=(ws(e)+"e").split("e");return+((r=(ws(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ki=In&&1/cn(new In([,-0]))[1]==l?function(e){return new In(e)}:cu;function Xi(e){return function(t){var n=ho(t);return n==_?an(t):n==E?ln(t):function(e,t){return Ct(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Yi(e,t,n,a,l,f,h,d){var p=2&t;if(!p&&"function"!=typeof e)throw new Ee(o);var g=a?a.length:0;if(g||(t&=-97,a=l=i),h=h===i?h:vn(gs(h),0),d=d===i?d:gs(d),g-=l?l.length:0,64&t){var m=a,v=l;a=l=i}var y=p?i:ro(e),w=[e,t,n,a,l,m,v,f,h,d];if(y&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==c&&8==n||r==c&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?Ti(l,u,t[4]):u,e[4]=l?un(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?Ii(l,u,t[6]):u,e[6]=l?un(e[5],s):t[6]),(u=t[7])&&(e[7]=u),r&c&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(w,y),e=w[0],t=w[1],n=w[2],a=w[3],l=w[4],!(d=w[9]=w[9]===i?p?0:e.length:vn(w[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var o=Fi(e);return function a(){for(var s=arguments.length,u=r(s),c=s,l=oo(a);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:un(u,l);return(s-=f.length)<n?Gi(e,t,Ni,a.placeholder,i,u,f,i,i,n-s):kt(this&&this!==ft&&this instanceof a?o:e,this,u)}}(e,t,d):t!=u&&33!=t||l.length?Ni.apply(i,w):function(e,t,n,i){var o=1&t,a=Fi(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=r(l+u),h=this&&this!==ft&&this instanceof t?a:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return kt(h,o?n:this,f)}}(e,t,n,a);else var b=function(e,t,n){var r=1&t,i=Fi(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Po((y?Zr:Mo)(b,w),e,t)}function $i(e,t,n,r){return e===i||za(e,Re[n])&&!Oe.call(r,n)?t:e}function Ji(e,t,n,r,o,a){return ts(e)&&ts(t)&&(a.set(t,e),Br(e,t,i,Ji,a),a.delete(t)),e}function Zi(e){return os(e)?i:e}function Qi(e,t,n,r,o,a){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e),f=a.get(t);if(l&&f)return l==t&&f==e;var h=-1,d=!0,p=2&n?new Kn:i;for(a.set(e,t),a.set(t,e);++h<u;){var g=e[h],m=t[h];if(r)var v=s?r(m,g,h,t,e,a):r(g,m,h,e,t,a);if(v!==i){if(v)continue;d=!1;break}if(p){if(!Ft(t,(function(e,t){if(!Jt(p,t)&&(g===e||o(g,e,n,r,a)))return p.push(t)}))){d=!1;break}}else if(g!==m&&!o(g,m,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function eo(e){return Co(To(e,i,qo),e+"")}function to(e){return kr(e,Ps,lo)}function no(e){return kr(e,Os,fo)}var ro=Mn?function(e){return Mn.get(e)}:cu;function io(e){for(var t=e.name+"",n=Rn[t],r=Oe.call(Rn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function oo(e){return(Oe.call(Un,"placeholder")?Un:e).placeholder}function ao(){var e=Un.iteratee||ou;return e=e===ou?Dr:e,arguments.length?e(arguments[0],arguments[1]):e}function so(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function uo(e){for(var t=Ps(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ko(i)]}return t}function co(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Or(n)?n:i}var lo=gt?function(e){return null==e?[]:(e=Se(e),At(gt(e),(function(t){return qe.call(e,t)})))}:mu,fo=gt?function(e){for(var t=[];e;)Pt(t,lo(e)),e=He(e);return t}:mu,ho=Sr;function po(e,t,n){for(var r=-1,i=(t=vi(t,e)).length,o=!1;++r<i;){var a=No(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&es(i)&&vo(a,i)&&(Ga(e)||Ha(e))}function go(e){return"function"!=typeof e.constructor||_o(e)?{}:Bn(He(e))}function mo(e){return Ga(e)||Ha(e)||!!(Xe&&e&&e[Xe])}function vo(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&ve.test(e))&&e>-1&&e%1==0&&e<t}function yo(e,t,n){if(!ts(n))return!1;var r=typeof t;return!!("number"==r?Ka(n)&&vo(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function wo(e,t){if(Ga(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||Q.test(e)||!Z.test(e)||null!=t&&e in Se(t)}function bo(e){var t=io(e),n=Un[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=ro(n);return!!r&&e===r[0]}(kn&&ho(new kn(new ArrayBuffer(1)))!=P||Sn&&ho(new Sn)!=_||Tn&&ho(Tn.resolve())!=T||In&&ho(new In)!=E||En&&ho(new En)!=R)&&(ho=function(e){var t=Sr(e),n=t==S?e.constructor:i,r=n?Uo(n):"";if(r)switch(r){case Cn:return P;case Pn:return _;case On:return T;case Dn:return E;case Fn:return R}return t});var xo=Ce?Za:vu;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function ko(e){return e==e&&!ts(e)}function So(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in Se(n))}}function To(e,t,n){return t=vn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=vn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(s),kt(e,this,u)}}function Io(e,t){return t.length<2?e:_r(e,ti(t,0,-1))}function Eo(e,t){for(var n=e.length,r=yn(t.length,n),o=Ei(e);r--;){var a=t[r];e[r]=vo(a,n)?o[a]:i}return e}function Ao(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Mo=Oo(Zr),Ro=lt||function(e,t){return ft.setTimeout(e,t)},Co=Oo(Qr);function Po(e,t,n){var r=t+"";return Co(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(p,(function(n){var r="_."+n[0];t&n[1]&&!Mt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(se):[]}(r),n)))}function Oo(e){var t=0,n=0;return function(){var r=wn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Do(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=qr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Fo,Lo,jo=(Fo=Fa((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,r,i){t.push(r?i.replace(le,"$1"):n||e)})),t}),(function(e){return 500===Lo.size&&Lo.clear(),e})),Lo=Fo.cache,Fo);function No(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Uo(e){if(null!=e){try{return Pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Bo(e){if(e instanceof Wn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Ei(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zo=Xr((function(e,t){return Xa(e)?lr(e,mr(t,1,Xa,!0)):[]})),Vo=Xr((function(e,t){var n=Jo(t);return Xa(n)&&(n=i),Xa(e)?lr(e,mr(t,1,Xa,!0),ao(n,2)):[]})),Wo=Xr((function(e,t){var n=Jo(t);return Xa(n)&&(n=i),Xa(e)?lr(e,mr(t,1,Xa,!0),i,n):[]}));function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=vn(r+i,0)),Nt(e,ao(t,3),i)}function Go(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=gs(n),o=n<0?vn(r+o,0):yn(o,r-1)),Nt(e,ao(t,3),o,!0)}function qo(e){return null!=e&&e.length?mr(e,1):[]}function Ko(e){return e&&e.length?e[0]:i}var Xo=Xr((function(e){var t=Ct(e,gi);return t.length&&t[0]===e[0]?Ar(t):[]})),Yo=Xr((function(e){var t=Jo(e),n=Ct(e,gi);return t===Jo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ar(n,ao(t,2)):[]})),$o=Xr((function(e){var t=Jo(e),n=Ct(e,gi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Ar(n,i,t):[]}));function Jo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Zo=Xr(Qo);function Qo(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}var ea=eo((function(e,t){var n=null==e?0:e.length,r=or(e,t);return Gr(e,Ct(t,(function(e){return vo(e,n)?+e:e})).sort(Si)),r}));function ta(e){return null==e?e:_n.call(e)}var na=Xr((function(e){return ui(mr(e,1,Xa,!0))})),ra=Xr((function(e){var t=Jo(e);return Xa(t)&&(t=i),ui(mr(e,1,Xa,!0),ao(t,2))})),ia=Xr((function(e){var t=Jo(e);return t="function"==typeof t?t:i,ui(mr(e,1,Xa,!0),i,t)}));function oa(e){if(!e||!e.length)return[];var t=0;return e=At(e,(function(e){if(Xa(e))return t=vn(e.length,t),!0})),Kt(t,(function(t){return Ct(e,Wt(t))}))}function aa(e,t){if(!e||!e.length)return[];var n=oa(e);return null==t?n:Ct(n,(function(e){return kt(t,i,e)}))}var sa=Xr((function(e,t){return Xa(e)?lr(e,t):[]})),ua=Xr((function(e){return di(At(e,Xa))})),ca=Xr((function(e){var t=Jo(e);return Xa(t)&&(t=i),di(At(e,Xa),ao(t,2))})),la=Xr((function(e){var t=Jo(e);return t="function"==typeof t?t:i,di(At(e,Xa),i,t)})),fa=Xr(oa),ha=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,aa(e,n)}));function da(e){var t=Un(e);return t.__chain__=!0,t}function pa(e,t){return t(e)}var ga=eo((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Wn&&vo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:pa,args:[o],thisArg:i}),new Vn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)})),ma=Mi((function(e,t,n){Oe.call(e,n)?++e[n]:ir(e,n,1)})),va=Li(Ho),ya=Li(Go);function wa(e,t){return(Ga(e)?Tt:fr)(e,ao(t,3))}function ba(e,t){return(Ga(e)?It:hr)(e,ao(t,3))}var xa=Mi((function(e,t,n){Oe.call(e,n)?e[n].push(t):ir(e,n,[t])})),_a=Xr((function(e,t,n){var i=-1,o="function"==typeof t,a=Ka(e)?r(e.length):[];return fr(e,(function(e){a[++i]=o?kt(t,e,n):Mr(e,t,n)})),a})),ka=Mi((function(e,t,n){ir(e,n,t)}));function Sa(e,t){return(Ga(e)?Ct:jr)(e,ao(t,3))}var Ta=Mi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Ia=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&yo(e,t[0],t[1])?t=[]:n>2&&yo(t[0],t[1],t[2])&&(t=[t[0]]),Vr(e,mr(t,1),[])})),Ea=ct||function(){return ft.Date.now()};function Aa(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Yi(e,c,i,i,i,i,t)}function Ma(e,t){var n;if("function"!=typeof t)throw new Ee(o);return e=gs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Ra=Xr((function(e,t,n){var r=1;if(n.length){var i=un(n,oo(Ra));r|=u}return Yi(e,r,t,n,i)})),Ca=Xr((function(e,t,n){var r=3;if(n.length){var i=un(n,oo(Ca));r|=u}return Yi(t,r,e,n,i)}));function Pa(e,t,n){var r,a,s,u,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ee(o);function g(t){var n=r,o=a;return r=a=i,f=t,u=e.apply(o,n)}function m(e){return f=e,c=Ro(y,t),h?g(e):u}function v(e){var n=e-l;return l===i||n>=t||n<0||d&&e-f>=s}function y(){var e=Ea();if(v(e))return w(e);c=Ro(y,function(e){var n=t-(e-l);return d?yn(n,s-(e-f)):n}(e))}function w(e){return c=i,p&&r?g(e):(r=a=i,u)}function b(){var e=Ea(),n=v(e);if(r=arguments,a=this,l=e,n){if(c===i)return m(l);if(d)return bi(c),c=Ro(y,t),g(l)}return c===i&&(c=Ro(y,t)),u}return t=vs(t)||0,ts(n)&&(h=!!n.leading,s=(d="maxWait"in n)?vn(vs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==i&&bi(c),f=0,r=l=a=c=i},b.flush=function(){return c===i?u:w(Ea())},b}var Oa=Xr((function(e,t){return cr(e,1,t)})),Da=Xr((function(e,t,n){return cr(e,vs(t)||0,n)}));function Fa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ee(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Fa.Cache||qn),n}function La(e){if("function"!=typeof e)throw new Ee(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Fa.Cache=qn;var ja=yi((function(e,t){var n=(t=1==t.length&&Ga(t[0])?Ct(t[0],Yt(ao())):Ct(mr(t,1),Yt(ao()))).length;return Xr((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),Na=Xr((function(e,t){var n=un(t,oo(Na));return Yi(e,u,i,t,n)})),Ua=Xr((function(e,t){var n=un(t,oo(Ua));return Yi(e,64,i,t,n)})),Ba=eo((function(e,t){return Yi(e,256,i,i,i,t)}));function za(e,t){return e===t||e!=e&&t!=t}var Va=Hi(Tr),Wa=Hi((function(e,t){return e>=t})),Ha=Rr(function(){return arguments}())?Rr:function(e){return ns(e)&&Oe.call(e,"callee")&&!qe.call(e,"callee")},Ga=r.isArray,qa=vt?Yt(vt):function(e){return ns(e)&&Sr(e)==C};function Ka(e){return null!=e&&es(e.length)&&!Za(e)}function Xa(e){return ns(e)&&Ka(e)}var Ya=mt||vu,$a=yt?Yt(yt):function(e){return ns(e)&&Sr(e)==y};function Ja(e){if(!ns(e))return!1;var t=Sr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Za(e){if(!ts(e))return!1;var t=Sr(e);return t==b||t==x||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qa(e){return"number"==typeof e&&e==gs(e)}function es(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ns(e){return null!=e&&"object"==typeof e}var rs=wt?Yt(wt):function(e){return ns(e)&&ho(e)==_};function is(e){return"number"==typeof e||ns(e)&&Sr(e)==k}function os(e){if(!ns(e)||Sr(e)!=S)return!1;var t=He(e);if(null===t)return!0;var n=Oe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==je}var as=bt?Yt(bt):function(e){return ns(e)&&Sr(e)==I},ss=xt?Yt(xt):function(e){return ns(e)&&ho(e)==E};function us(e){return"string"==typeof e||!Ga(e)&&ns(e)&&Sr(e)==A}function cs(e){return"symbol"==typeof e||ns(e)&&Sr(e)==M}var ls=_t?Yt(_t):function(e){return ns(e)&&es(e.length)&&!!it[Sr(e)]},fs=Hi(Lr),hs=Hi((function(e,t){return e<=t}));function ds(e){if(!e)return[];if(Ka(e))return us(e)?hn(e):Ei(e);if(Ye&&e[Ye])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ye]());var t=ho(e);return(t==_?an:t==E?cn:zs)(e)}function ps(e){return e?(e=vs(e))===l||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function gs(e){var t=ps(e),n=t%1;return t==t?n?t-n:t:0}function ms(e){return e?ar(gs(e),0,d):0}function vs(e){if("number"==typeof e)return e;if(cs(e))return h;if(ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=pe.test(e);return n||me.test(e)?ut(e.slice(2),n?2:8):de.test(e)?h:+e}function ys(e){return Ai(e,Os(e))}function ws(e){return null==e?"":si(e)}var bs=Ri((function(e,t){if(_o(t)||Ka(t))Ai(t,Ps(t),e);else for(var n in t)Oe.call(t,n)&&er(e,n,t[n])})),xs=Ri((function(e,t){Ai(t,Os(t),e)})),_s=Ri((function(e,t,n,r){Ai(t,Os(t),e,r)})),ks=Ri((function(e,t,n,r){Ai(t,Ps(t),e,r)})),Ss=eo(or),Ts=Xr((function(e,t){e=Se(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&yo(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Os(a),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===i||za(f,Re[l])&&!Oe.call(e,l))&&(e[l]=a[l])}return e})),Is=Xr((function(e){return e.push(i,Ji),kt(Fs,i,e)}));function Es(e,t,n){var r=null==e?i:_r(e,t);return r===i?n:r}function As(e,t){return null!=e&&po(e,t,Er)}var Ms=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),e[t]=n}),tu(iu)),Rs=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),Oe.call(e,t)?e[t].push(n):e[t]=[n]}),ao),Cs=Xr(Mr);function Ps(e){return Ka(e)?Yn(e):Fr(e)}function Os(e){return Ka(e)?Yn(e,!0):function(e){if(!ts(e))return function(e){var t=[];if(null!=e)for(var n in Se(e))t.push(n);return t}(e);var t=_o(e),n=[];for(var r in e)("constructor"!=r||!t&&Oe.call(e,r))&&n.push(r);return n}(e)}var Ds=Ri((function(e,t,n){Br(e,t,n)})),Fs=Ri((function(e,t,n,r){Br(e,t,n,r)})),Ls=eo((function(e,t){var n={};if(null==e)return n;var r=!1;t=Ct(t,(function(t){return t=vi(t,e),r||(r=t.length>1),t})),Ai(e,no(e),n),r&&(n=sr(n,7,Zi));for(var i=t.length;i--;)ci(n,t[i]);return n})),js=eo((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return As(e,n)}))}(e,t)}));function Ns(e,t){if(null==e)return{};var n=Ct(no(e),(function(e){return[e]}));return t=ao(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Us=Xi(Ps),Bs=Xi(Os);function zs(e){return null==e?[]:$t(e,Ps(e))}var Vs=Di((function(e,t,n){return t=t.toLowerCase(),e+(n?Ws(t):t)}));function Ws(e){return Js(ws(e).toLowerCase())}function Hs(e){return(e=ws(e))&&e.replace(ye,tn).replace(Je,"")}var Gs=Di((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),qs=Di((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ks=Oi("toLowerCase"),Xs=Di((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Ys=Di((function(e,t,n){return e+(n?" ":"")+Js(t)})),$s=Di((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Js=Oi("toUpperCase");function Zs(e,t,n){return e=ws(e),(t=n?i:t)===i?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Qs=Xr((function(e,t){try{return kt(e,i,t)}catch(e){return Ja(e)?e:new xe(e)}})),eu=eo((function(e,t){return Tt(t,(function(t){t=No(t),ir(e,t,Ra(e[t],e))})),e}));function tu(e){return function(){return e}}var nu=ji(),ru=ji(!0);function iu(e){return e}function ou(e){return Dr("function"==typeof e?e:sr(e,1))}var au=Xr((function(e,t){return function(n){return Mr(n,e,t)}})),su=Xr((function(e,t){return function(n){return Mr(e,n,t)}}));function uu(e,t,n){var r=Ps(t),i=xr(t,r);null!=n||ts(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=xr(t,Ps(t)));var o=!(ts(n)&&"chain"in n&&!n.chain),a=Za(e);return Tt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ei(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Pt([this.value()],arguments))})})),e}function cu(){}var lu=zi(Ct),fu=zi(Et),hu=zi(Ft);function du(e){return wo(e)?Wt(No(e)):function(e){return function(t){return _r(t,e)}}(e)}var pu=Wi(),gu=Wi(!0);function mu(){return[]}function vu(){return!1}var yu,wu=Bi((function(e,t){return e+t}),0),bu=qi("ceil"),xu=Bi((function(e,t){return e/t}),1),_u=qi("floor"),ku=Bi((function(e,t){return e*t}),1),Su=qi("round"),Tu=Bi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Ee(o);return e=gs(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=Aa,Un.assign=bs,Un.assignIn=xs,Un.assignInWith=_s,Un.assignWith=ks,Un.at=Ss,Un.before=Ma,Un.bind=Ra,Un.bindAll=eu,Un.bindKey=Ca,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ga(e)?e:[e]},Un.chain=da,Un.chunk=function(e,t,n){t=(n?yo(e,t,n):t===i)?1:vn(gs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,u=r(ht(o/t));a<o;)u[s++]=ti(e,a,a+=t);return u},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Pt(Ga(n)?Ei(n):[n],mr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=ao();return e=t?Ct(e,(function(e){if("function"!=typeof e[1])throw new Ee(o);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Ps(e);return function(n){return ur(n,e,t)}}(sr(e,1))},Un.constant=tu,Un.countBy=ma,Un.create=function(e,t){var n=Bn(e);return null==t?n:rr(n,t)},Un.curry=function e(t,n,r){var o=Yi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Un.curryRight=function e(t,n,r){var o=Yi(t,16,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Un.debounce=Pa,Un.defaults=Ts,Un.defaultsDeep=Is,Un.defer=Oa,Un.delay=Da,Un.difference=zo,Un.differenceBy=Vo,Un.differenceWith=Wo,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ti(e,(t=n||t===i?1:gs(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ti(e,0,(t=r-(t=n||t===i?1:gs(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?fi(e,ao(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?fi(e,ao(t,3),!0):[]},Un.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&yo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=gs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:gs(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Ga(e)?At:gr)(e,ao(t,3))},Un.flatMap=function(e,t){return mr(Sa(e,t),1)},Un.flatMapDeep=function(e,t){return mr(Sa(e,t),l)},Un.flatMapDepth=function(e,t,n){return n=n===i?1:gs(n),mr(Sa(e,t),n)},Un.flatten=qo,Un.flattenDeep=function(e){return null!=e&&e.length?mr(e,l):[]},Un.flattenDepth=function(e,t){return null!=e&&e.length?mr(e,t=t===i?1:gs(t)):[]},Un.flip=function(e){return Yi(e,512)},Un.flow=nu,Un.flowRight=ru,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:xr(e,Ps(e))},Un.functionsIn=function(e){return null==e?[]:xr(e,Os(e))},Un.groupBy=xa,Un.initial=function(e){return null!=e&&e.length?ti(e,0,-1):[]},Un.intersection=Xo,Un.intersectionBy=Yo,Un.intersectionWith=$o,Un.invert=Ms,Un.invertBy=Rs,Un.invokeMap=_a,Un.iteratee=ou,Un.keyBy=ka,Un.keys=Ps,Un.keysIn=Os,Un.map=Sa,Un.mapKeys=function(e,t){var n={};return t=ao(t,3),wr(e,(function(e,r,i){ir(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=ao(t,3),wr(e,(function(e,r,i){ir(n,r,t(e,r,i))})),n},Un.matches=function(e){return Nr(sr(e,1))},Un.matchesProperty=function(e,t){return Ur(e,sr(t,1))},Un.memoize=Fa,Un.merge=Ds,Un.mergeWith=Fs,Un.method=au,Un.methodOf=su,Un.mixin=uu,Un.negate=La,Un.nthArg=function(e){return e=gs(e),Xr((function(t){return zr(t,e)}))},Un.omit=Ls,Un.omitBy=function(e,t){return Ns(e,La(ao(t)))},Un.once=function(e){return Ma(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Ga(t)||(t=null==t?[]:[t]),Ga(n=r?i:n)||(n=null==n?[]:[n]),Vr(e,t,n))},Un.over=lu,Un.overArgs=ja,Un.overEvery=fu,Un.overSome=hu,Un.partial=Na,Un.partialRight=Ua,Un.partition=Ta,Un.pick=js,Un.pickBy=Ns,Un.property=du,Un.propertyOf=function(e){return function(t){return null==e?i:_r(e,t)}},Un.pull=Zo,Un.pullAll=Qo,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,ao(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,i,n):e},Un.pullAt=ea,Un.range=pu,Un.rangeRight=gu,Un.rearg=Ba,Un.reject=function(e,t){return(Ga(e)?At:gr)(e,La(ao(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=ao(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Gr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Ee(o);return Xr(e,t=t===i?t:gs(t))},Un.reverse=ta,Un.sampleSize=function(e,t,n){return t=(n?yo(e,t,n):t===i)?1:gs(t),(Ga(e)?Jn:$r)(e,t)},Un.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Jr(e,t,n,r)},Un.shuffle=function(e){return(Ga(e)?Zn:ei)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&yo(e,t,n)?(t=0,n=r):(t=null==t?0:gs(t),n=n===i?r:gs(n)),ti(e,t,n)):[]},Un.sortBy=Ia,Un.sortedUniq=function(e){return e&&e.length?oi(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?oi(e,ao(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&yo(e,t,n)&&(t=n=i),(n=n===i?d:n>>>0)?(e=ws(e))&&("string"==typeof t||null!=t&&!as(t))&&!(t=si(t))&&on(e)?wi(hn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Ee(o);return t=null==t?0:vn(gs(t),0),Xr((function(n){var r=n[t],i=wi(n,0,t);return r&&Pt(i,r),kt(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ti(e,0,(t=n||t===i?1:gs(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ti(e,(t=r-(t=n||t===i?1:gs(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?fi(e,ao(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?fi(e,ao(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ee(o);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Pa(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=pa,Un.toArray=ds,Un.toPairs=Us,Un.toPairsIn=Bs,Un.toPath=function(e){return Ga(e)?Ct(e,No):cs(e)?[e]:Ei(jo(ws(e)))},Un.toPlainObject=ys,Un.transform=function(e,t,n){var r=Ga(e),i=r||Ya(e)||ls(e);if(t=ao(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ts(e)&&Za(o)?Bn(He(e)):{}}return(i?Tt:wr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return Aa(e,1)},Un.union=na,Un.unionBy=ra,Un.unionWith=ia,Un.uniq=function(e){return e&&e.length?ui(e):[]},Un.uniqBy=function(e,t){return e&&e.length?ui(e,ao(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ui(e,i,t):[]},Un.unset=function(e,t){return null==e||ci(e,t)},Un.unzip=oa,Un.unzipWith=aa,Un.update=function(e,t,n){return null==e?e:li(e,t,mi(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:li(e,t,mi(n),r)},Un.values=zs,Un.valuesIn=function(e){return null==e?[]:$t(e,Os(e))},Un.without=sa,Un.words=Zs,Un.wrap=function(e,t){return Na(mi(t),e)},Un.xor=ua,Un.xorBy=ca,Un.xorWith=la,Un.zip=fa,Un.zipObject=function(e,t){return pi(e||[],t||[],er)},Un.zipObjectDeep=function(e,t){return pi(e||[],t||[],Jr)},Un.zipWith=ha,Un.entries=Us,Un.entriesIn=Bs,Un.extend=xs,Un.extendWith=_s,uu(Un,Un),Un.add=wu,Un.attempt=Qs,Un.camelCase=Vs,Un.capitalize=Ws,Un.ceil=bu,Un.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=vs(n))==n?n:0),t!==i&&(t=(t=vs(t))==t?t:0),ar(vs(e),t,n)},Un.clone=function(e){return sr(e,4)},Un.cloneDeep=function(e){return sr(e,5)},Un.cloneDeepWith=function(e,t){return sr(e,5,t="function"==typeof t?t:i)},Un.cloneWith=function(e,t){return sr(e,4,t="function"==typeof t?t:i)},Un.conformsTo=function(e,t){return null==t||ur(e,t,Ps(t))},Un.deburr=Hs,Un.defaultTo=function(e,t){return null==e||e!=e?t:e},Un.divide=xu,Un.endsWith=function(e,t,n){e=ws(e),t=si(t);var r=e.length,o=n=n===i?r:ar(gs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Un.eq=za,Un.escape=function(e){return(e=ws(e))&&X.test(e)?e.replace(q,nn):e},Un.escapeRegExp=function(e){return(e=ws(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Un.every=function(e,t,n){var r=Ga(e)?Et:dr;return n&&yo(e,t,n)&&(t=i),r(e,ao(t,3))},Un.find=va,Un.findIndex=Ho,Un.findKey=function(e,t){return jt(e,ao(t,3),wr)},Un.findLast=ya,Un.findLastIndex=Go,Un.findLastKey=function(e,t){return jt(e,ao(t,3),br)},Un.floor=_u,Un.forEach=wa,Un.forEachRight=ba,Un.forIn=function(e,t){return null==e?e:vr(e,ao(t,3),Os)},Un.forInRight=function(e,t){return null==e?e:yr(e,ao(t,3),Os)},Un.forOwn=function(e,t){return e&&wr(e,ao(t,3))},Un.forOwnRight=function(e,t){return e&&br(e,ao(t,3))},Un.get=Es,Un.gt=Va,Un.gte=Wa,Un.has=function(e,t){return null!=e&&po(e,t,Ir)},Un.hasIn=As,Un.head=Ko,Un.identity=iu,Un.includes=function(e,t,n,r){e=Ka(e)?e:zs(e),n=n&&!r?gs(n):0;var i=e.length;return n<0&&(n=vn(i+n,0)),us(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ut(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=vn(r+i,0)),Ut(e,t,i)},Un.inRange=function(e,t,n){return t=ps(t),n===i?(n=t,t=0):n=ps(n),function(e,t,n){return e>=yn(t,n)&&e<vn(t,n)}(e=vs(e),t,n)},Un.invoke=Cs,Un.isArguments=Ha,Un.isArray=Ga,Un.isArrayBuffer=qa,Un.isArrayLike=Ka,Un.isArrayLikeObject=Xa,Un.isBoolean=function(e){return!0===e||!1===e||ns(e)&&Sr(e)==v},Un.isBuffer=Ya,Un.isDate=$a,Un.isElement=function(e){return ns(e)&&1===e.nodeType&&!os(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Ka(e)&&(Ga(e)||"string"==typeof e||"function"==typeof e.splice||Ya(e)||ls(e)||Ha(e)))return!e.length;var t=ho(e);if(t==_||t==E)return!e.size;if(_o(e))return!Fr(e).length;for(var n in e)if(Oe.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Cr(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Cr(e,t,i,n):!!r},Un.isError=Ja,Un.isFinite=function(e){return"number"==typeof e&&Lt(e)},Un.isFunction=Za,Un.isInteger=Qa,Un.isLength=es,Un.isMap=rs,Un.isMatch=function(e,t){return e===t||Pr(e,t,uo(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,uo(t),n)},Un.isNaN=function(e){return is(e)&&e!=+e},Un.isNative=function(e){if(xo(e))throw new xe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=is,Un.isObject=ts,Un.isObjectLike=ns,Un.isPlainObject=os,Un.isRegExp=as,Un.isSafeInteger=function(e){return Qa(e)&&e>=-9007199254740991&&e<=f},Un.isSet=ss,Un.isString=us,Un.isSymbol=cs,Un.isTypedArray=ls,Un.isUndefined=function(e){return e===i},Un.isWeakMap=function(e){return ns(e)&&ho(e)==R},Un.isWeakSet=function(e){return ns(e)&&"[object WeakSet]"==Sr(e)},Un.join=function(e,t){return null==e?"":Ht.call(e,t)},Un.kebabCase=Gs,Un.last=Jo,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=gs(n))<0?vn(r+o,0):yn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Nt(e,zt,o,!0)},Un.lowerCase=qs,Un.lowerFirst=Ks,Un.lt=fs,Un.lte=hs,Un.max=function(e){return e&&e.length?pr(e,iu,Tr):i},Un.maxBy=function(e,t){return e&&e.length?pr(e,ao(t,2),Tr):i},Un.mean=function(e){return Vt(e,iu)},Un.meanBy=function(e,t){return Vt(e,ao(t,2))},Un.min=function(e){return e&&e.length?pr(e,iu,Lr):i},Un.minBy=function(e,t){return e&&e.length?pr(e,ao(t,2),Lr):i},Un.stubArray=mu,Un.stubFalse=vu,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=ku,Un.nth=function(e,t){return e&&e.length?zr(e,gs(t)):i},Un.noConflict=function(){return ft._===this&&(ft._=Ne),this},Un.noop=cu,Un.now=Ea,Un.pad=function(e,t,n){e=ws(e);var r=(t=gs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Vi(dt(i),n)+e+Vi(ht(i),n)},Un.padEnd=function(e,t,n){e=ws(e);var r=(t=gs(t))?fn(e):0;return t&&r<t?e+Vi(t-r,n):e},Un.padStart=function(e,t,n){e=ws(e);var r=(t=gs(t))?fn(e):0;return t&&r<t?Vi(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(ws(e).replace(re,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&yo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ps(e),t===i?(t=e,e=0):t=ps(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=xn();return yn(e+o*(t-e+st("1e-"+((o+"").length-1))),t)}return qr(e,t)},Un.reduce=function(e,t,n){var r=Ga(e)?Ot:Gt,i=arguments.length<3;return r(e,ao(t,4),n,i,fr)},Un.reduceRight=function(e,t,n){var r=Ga(e)?Dt:Gt,i=arguments.length<3;return r(e,ao(t,4),n,i,hr)},Un.repeat=function(e,t,n){return t=(n?yo(e,t,n):t===i)?1:gs(t),Kr(ws(e),t)},Un.replace=function(){var e=arguments,t=ws(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,o=(t=vi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[No(t[r])];a===i&&(r=o,a=n),e=Za(a)?a.call(e):a}return e},Un.round=Su,Un.runInContext=e,Un.sample=function(e){return(Ga(e)?$n:Yr)(e)},Un.size=function(e){if(null==e)return 0;if(Ka(e))return us(e)?fn(e):e.length;var t=ho(e);return t==_||t==E?e.size:Fr(e).length},Un.snakeCase=Xs,Un.some=function(e,t,n){var r=Ga(e)?Ft:ni;return n&&yo(e,t,n)&&(t=i),r(e,ao(t,3))},Un.sortedIndex=function(e,t){return ri(e,t)},Un.sortedIndexBy=function(e,t,n){return ii(e,t,ao(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ri(e,t);if(r<n&&za(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return ri(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return ii(e,t,ao(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ri(e,t,!0)-1;if(za(e[n],t))return n}return-1},Un.startCase=Ys,Un.startsWith=function(e,t,n){return e=ws(e),n=null==n?0:ar(gs(n),0,e.length),t=si(t),e.slice(n,n+t.length)==t},Un.subtract=Tu,Un.sum=function(e){return e&&e.length?qt(e,iu):0},Un.sumBy=function(e,t){return e&&e.length?qt(e,ao(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&yo(e,t,n)&&(t=i),e=ws(e),t=_s({},t,r,$i);var o,a,s=_s({},t.imports,r.imports,$i),u=Ps(s),c=$t(s,u),l=0,f=t.interpolate||we,h="__p += '",d=Te((t.escape||we).source+"|"+f.source+"|"+(f===J?fe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(l,u).replace(be,rn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var g=Oe.call(t,"variable")&&t.variable;if(g){if(ce.test(g))throw new xe("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(V,""):h).replace(W,"$1").replace(H,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Qs((function(){return _e(u,p+"return "+h).apply(i,c)}));if(m.source=h,Ja(m))throw m;return m},Un.times=function(e,t){if((e=gs(e))<1||e>f)return[];var n=d,r=yn(e,d);t=ao(t),e-=d;for(var i=Kt(r,t);++n<e;)t(n);return i},Un.toFinite=ps,Un.toInteger=gs,Un.toLength=ms,Un.toLower=function(e){return ws(e).toLowerCase()},Un.toNumber=vs,Un.toSafeInteger=function(e){return e?ar(gs(e),-9007199254740991,f):0===e?e:0},Un.toString=ws,Un.toUpper=function(e){return ws(e).toUpperCase()},Un.trim=function(e,t,n){if((e=ws(e))&&(n||t===i))return Xt(e);if(!e||!(t=si(t)))return e;var r=hn(e),o=hn(t);return wi(r,Zt(r,o),Qt(r,o)+1).join("")},Un.trimEnd=function(e,t,n){if((e=ws(e))&&(n||t===i))return e.slice(0,dn(e)+1);if(!e||!(t=si(t)))return e;var r=hn(e);return wi(r,0,Qt(r,hn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=ws(e))&&(n||t===i))return e.replace(re,"");if(!e||!(t=si(t)))return e;var r=hn(e);return wi(r,Zt(r,hn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(ts(t)){var o="separator"in t?t.separator:o;n="length"in t?gs(t.length):n,r="omission"in t?si(t.omission):r}var a=(e=ws(e)).length;if(on(e)){var s=hn(e);a=s.length}if(n>=a)return e;var u=n-fn(r);if(u<1)return r;var c=s?wi(s,0,u).join(""):e.slice(0,u);if(o===i)return c+r;if(s&&(u+=c.length-u),as(o)){if(e.slice(u).search(o)){var l,f=c;for(o.global||(o=Te(o.source,ws(he.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var h=l.index;c=c.slice(0,h===i?u:h)}}else if(e.indexOf(si(o),u)!=u){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+r},Un.unescape=function(e){return(e=ws(e))&&K.test(e)?e.replace(G,pn):e},Un.uniqueId=function(e){var t=++De;return ws(e)+t},Un.upperCase=$s,Un.upperFirst=Js,Un.each=wa,Un.eachRight=ba,Un.first=Ko,uu(Un,(yu={},wr(Un,(function(e,t){Oe.call(Un.prototype,t)||(yu[t]=e)})),yu),{chain:!1}),Un.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),Tt(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===i?1:vn(gs(n),0);var r=this.__filtered__&&!t?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,d),type:e+(r.__dir__<0?"Right":"")}),r},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ao(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(iu)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Mr(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(La(ao(e)))},Wn.prototype.slice=function(e,t){e=gs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=gs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(d)},wr(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Un[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Un.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Wn,c=s[0],l=u||Ga(t),f=function(e){var t=o.apply(Un,Pt([e],s));return r&&h?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=a&&!h,g=u&&!d;if(!a&&l){t=g?t:new Wn(this);var m=e.apply(t,s);return m.__actions__.push({func:pa,args:[f],thisArg:i}),new Vn(m,h)}return p&&g?e.apply(this,s):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ga(i)?i:[],e)}return this[n]((function(n){return t.apply(Ga(n)?n:[],e)}))}})),wr(Wn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Oe.call(Rn,r)||(Rn[r]=[]),Rn[r].push({name:t,func:n})}})),Rn[Ni(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ei(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ei(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ei(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ga(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=yn(t,e+a);break;case"takeRight":e=vn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,d=yn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return hi(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var g=-1,m=e[c+=t];++g<f;){var v=l[g],y=v.iteratee,w=v.type,b=y(m);if(2==w)m=b;else if(!b){if(1==w)continue e;break e}}p[h++]=m}return p},Un.prototype.at=ga,Un.prototype.chain=function(){return da(this)},Un.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=ds(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof zn;){var r=Bo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:pa,args:[ta],thisArg:i}),new Vn(t,this.__chain__)}return this.thru(ta)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Ye&&(Un.prototype[Ye]=function(){return this}),Un}();ft._=gn,(r=function(){return gn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},43720:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=u(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=u(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(e>=d)return _}else{if(e<=-p)return k;if(e+1>=p)return x}return e<0?s(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var i=s(c(n,8)),o=m,a=0;a<e.length;a+=8){var u=Math.min(8,e.length-a),f=parseInt(e.substring(a,a+u),n);if(u<8){var h=s(c(n,u));o=o.mul(h).add(s(f))}else o=(o=o.mul(i)).add(s(f))}return o.unsigned=t,o}function f(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?l(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=f;var h=4294967296,d=h*h,p=d/2,g=a(1<<24),m=a(0);n.ZERO=m;var v=a(0,!0);n.UZERO=v;var y=a(1);n.ONE=y;var w=a(1,!0);n.UONE=w;var b=a(-1);n.NEG_ONE=b;var x=u(-1,2147483647,!1);n.MAX_VALUE=x;var _=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var k=u(0,-2147483648,!1);n.MIN_VALUE=k;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=s(c(e,6),this.unsigned),o=this,a="";;){var u=o.div(i),l=(o.sub(u.mul(i)).toInt()>>>0).toString(e);if((o=u).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(y)},S.neg=S.negate,S.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,h=0,d=0,p=0;return d+=(p+=o+(65535&e.low))>>>16,h+=(d+=i+c)>>>16,l+=(h+=n+s)>>>16,l+=t+a,u((d&=65535)<<16|(p&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=f(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(k))return e.isOdd()?k:m;if(e.eq(k))return this.isOdd()?k:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,c=e.high>>>16,l=65535&e.high,h=e.low>>>16,d=65535&e.low,p=0,v=0,y=0,w=0;return y+=(w+=a*d)>>>16,v+=(y+=o*d)>>>16,y&=65535,v+=(y+=a*h)>>>16,p+=(v+=i*d)>>>16,v&=65535,p+=(v+=o*h)>>>16,v&=65535,p+=(v+=a*l)>>>16,p+=n*d+i*h+o*l+a*c,u((y&=65535)<<16|(w&=65535),(p&=65535)<<16|(v&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;o=v}else{if(this.eq(k))return e.eq(y)||e.eq(b)?k:e.eq(k)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:b:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(k))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),l=a<=48?1:c(2,a-48),h=s(n),d=h.mul(e);d.isNegative()||d.gt(i);)d=(h=s(n-=l,this.unsigned)).mul(e);h.isZero()&&(h=y),o=o.add(h),i=i.sub(d)}return o},S.div=S.divide,S.modulo=function(e){return r(e)||(e=f(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},57539:e=>{"use strict";const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":n.relatedAddress=t[e+1];break;case"rport":n.relatedPort=parseInt(t[e+1],10);break;case"tcptype":n.tcpType=t[e+1];break;case"ufrag":n.ufrag=t[e+1],n.usernameFragment=t[e+1];break;default:void 0===n[t[e]]&&(n[t[e]]=t[e+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)n=r[e].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let i=3;i<r.length;i++){const o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){const r=t.parseRtpMap(a),i=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(r.parameters=i.length?t.parseFmtp(i[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),s=a.length>0&&a[0].ssrc;let u;const c=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));c.length>0&&c[0].length>1&&c[0][0]===s&&(u=c[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&u&&(t.rtx={ssrc:u}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&s&&n.push({ssrc:s});let l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substring(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=l}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){const e=a[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;return i=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let e=0;e<r.length;e++)switch(r[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[e].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let e=0;e<n.length;e++)if(n[e].length<2||"="!==n[e].charAt(1))return!1;return!0},e.exports=t},36377:(e,t,n)=>{var r=n(84832),i=n(68652),o=n(90801),a=n(92030),s=n(3618),u=n(89049),c=n(51971);c.alea=r,c.xor128=i,c.xorwow=o,c.xorshift7=a,c.xor4096=s,c.tychei=u,e.exports=c},84832:function(e,t,n){var r;!function(e,i,o){function a(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,i))||(i.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},89049:function(e,t,n){var r;!function(e,i,o){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,i))||(i.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},68652:function(e,t,n){var r;!function(e,i,o){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,i))||(i.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},3618:function(e,t,n){var r;!function(e,i,o){function a(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,i))||(i.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},92030:function(e,t,n){var r;!function(e,i,o){function a(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,i))||(i.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},90801:function(e,t,n){var r;!function(e,i,o){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,i))||(i.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},51971:function(e,t,n){var r;!function(i,o,a){var s,u=256,c=a.pow(u,6),l=a.pow(2,52),f=2*l,h=255;function d(e,t,n){var r=[],h=v(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(i.crypto||i.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,y(o)]}}():e,3),r),d=new p(r),w=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=d.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|d.g(4)},w.quick=function(){return d.g(4)/4294967296},w.double=w,v(y(d.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&g(r,d),e.state=function(){return g(d,{})}),n?(a.random=e,t):e})(w,h,"global"in t?t.global:this==a,t.state)}function p(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<u;)a[i]=i++;for(i=0;i<u;i++)a[i]=a[o=h&o+e[i%n]+(t=a[i])],a[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,a=r.S;e--;)t=a[i=h&i+1],n=n*u+a[h&(a[i]=a[o=h&o+t])+(a[o]=t)];return r.i=i,r.j=o,n})(u)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(m(e[n],t-1))}catch(e){}return r.length?r:"string"==i?e:e+"\0"}function v(e,t){for(var n,r=e+"",i=0;i<r.length;)t[h&i]=h&(n^=19*t[h&i])+r.charCodeAt(i++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(v(a.random(),o),e.exports){e.exports=d;try{s=n(75042)}catch(e){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)}}]);